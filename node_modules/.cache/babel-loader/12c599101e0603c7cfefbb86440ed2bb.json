{"ast":null,"code":"import _slicedToArray from \"/Users/jenny/Desktop/SOAS/scheduler/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Schedule.js\";\nimport React from 'react';\nimport firebase from './Firebase.js';\nimport \"./Schedule.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport { thisExpression } from '@babel/types';\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\nvar yyyy = today.getFullYear();\ntoday = mm + '/' + dd + '/' + yyyy;\n\nfunction RenderDate(props) {\n  var weekday = props.date.getDay();\n  var day = props.date.getDate();\n  var month = props.date.getMonth();\n  var year = props.date.getFullYear();\n  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\n  if (props.view == 'sm-view') {\n    return React.createElement(\"div\", {\n      className: 'flight-date sm-view',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, month + \" / \" + day + \" / \" + year));\n  }\n\n  return React.createElement(\"div\", {\n    className: 'flight-date lg-view',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, days[weekday] + \", \" + months[month] + \" \" + day + \", \" + year));\n}\n\nfunction parseName(name) {\n  return name[0].toUpperCase() + \". \" + name[1].toUpperCase() + name.slice(2);\n}\n\nfunction RenderDayHeader(props) {\n  var displayDate = new Date(props.date);\n  var curDate = new Date();\n  var diff = Math.round((displayDate.getTime() - curDate.getTime()) / (24 * 60 * 60 * 1000)); // Only show flights for last 3 days to the next 2 weeks\n\n  var disableLeft = diff == -3;\n  var disableRight = diff == 14;\n  return React.createElement(\"div\", {\n    className: \"day-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: 'date-btn' + (disableLeft ? ' disabled' : ''),\n    src: LEFT_BTN,\n    onClick: () => {\n      props.changeDate(disableLeft ? 0 : -1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(RenderDate, {\n    date: displayDate,\n    view: \"lg-view\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(RenderDate, {\n    date: displayDate,\n    view: \"sm-view\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    className: 'date-btn' + (disableRight ? ' disabled' : ''),\n    src: RIGHT_BTN,\n    onClick: () => {\n      props.changeDate(disableRight ? 0 : 1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }));\n}\n\nfunction Event(props) {\n  return React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: props.name,\n    style: props.style,\n    onClick: props.toggleOverlay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }));\n}\n\nfunction createRow(pilot, events, toggleOverlay, flag) {\n  var r = [];\n  r.push(React.createElement(\"td\", {\n    className: \"pilot-col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, flag ? parseName(pilot) : pilot));\n\n  for (var i = 0; i < 12; i += 1) {\n    r.push(React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }));\n  }\n\n  if (events.length > 0) {\n    console.log(events);\n    events.forEach(event => {\n      if (flag) {\n        var _ref = ['flight', event.startTime / 100, event.endTime / 100, event.id],\n            name = _ref[0],\n            left = _ref[1],\n            right = _ref[2],\n            id = _ref[3];\n      } else {\n        var _event = _slicedToArray(event, 3),\n            name = _event[0],\n            left = _event[1],\n            right = _event[2];\n      }\n\n      var offset = 0;\n      offset = Math.floor(left % 2 / 0.5);\n      var style = {\n        width: (right - left) * 50 + '%',\n        left: offset * 25 + '%'\n      };\n      r[1 + parseInt(left / 2)] = React.createElement(Event, {\n        name: name,\n        style: style,\n        toggleOverlay: () => {\n          toggleOverlay('flight', '7893521');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n    });\n  }\n\n  return r;\n}\n\nfunction Day(props) {\n  var data = props.data;\n  var tableRows = [];\n  var teamLength = Object.keys(props.teamdata).length; //Create table header \n\n  var tableHeaders = [];\n  tableHeaders.push(React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }));\n\n  for (var i = 0; i < 24; i += 2) {\n    tableHeaders.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, (i < 10 ? '0' + i.toString() : i.toString()) + '00'));\n  } //Create empty columns for gridline\n\n\n  var rowTemplate = [];\n\n  for (var i = 0; i < 12; i += 1) {\n    rowTemplate.push(React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }));\n  }\n\n  Object.keys(props.teamdata).forEach(key => {\n    if (tableRows.length == teamLength - 1) {\n      //Add divider to last element of team \n      tableRows.push(React.createElement(\"tr\", {\n        className: \"underline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, createRow(key, props.teamdata[key], props.toggleOverlay, true)));\n    } else {\n      tableRows.push(React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, createRow(key, props.teamdata[key], props.toggleOverlay, true)));\n    }\n  });\n  Object.keys(data).forEach(key => {\n    tableRows.push(React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, createRow(key, data[key], props.toggleOverlay)));\n  });\n  return React.createElement(\"div\", {\n    className: \"day-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"schedule-table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, tableHeaders), tableRows));\n}\n\nfunction Legend(props) {\n  return React.createElement(\"div\", {\n    className: \"legend-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"legend-color flight\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    className: \"legend-entry\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Flight\"), React.createElement(\"div\", {\n    className: \"legend-color apt\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    className: \"legend-entry\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Appointment\"), React.createElement(\"div\", {\n    className: \"legend-color meeting\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    className: \"legend-entry\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Meeting\"));\n}\n\nclass Schedule extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        'Amelia Earhart': [['flight', 2, 5], ['flight', 8, 9], ['meeting', 12, 15], ['apt', 20, 21]],\n        'D.B. Cooper': [['meeting', 4, 6], ['flight', 10, 14]],\n        'Pete Mitchell': [['apt', 8, 9], ['flight', 14, 17], ['meeting', 19, 21]],\n        'Jimmy Doolittle': [['flight', 5, 8], ['meeting', 9, 10], ['apt', 17, 18]],\n        'Maverick': [['apt', 4, 5], ['flight', 12, 14]],\n        'Charles Lindbergh': [['meeting', 5, 6], ['apt', 14, 17], ['meeting', 19.5, 22]],\n        'Iceman': [['flight', 3, 5], ['flight', 9, 10], ['meeting', 12, 15]],\n        'Jenny': [['apt', 5, 6], ['flight', 10, 14]],\n        'Orvill Wright': [['apt', 8, 9], ['flight', 15.5, 17], ['meeting', 19, 21]],\n        'Wilbur Wright': [['flight', 4.25, 8], ['meeting', 9, 10], ['apt', 17.5, 18.75]],\n        'Erich Hartmann': [['apt', 4, 5], ['flight', 12, 14]],\n        'Chuck Yeager': [['meeting', 5, 6], ['apt', 14, 17], ['meeting', 19, 20]]\n      },\n      date: new Date(),\n      team: [],\n      userid: '',\n      userdata: [],\n      teamdata: []\n    };\n  }\n\n  getData(newDate) {\n    var date = newDate.getFullYear() + '-' + (newDate.getMonth() < 9 ? '0' : '') + (newDate.getMonth() + 1) + '-' + (newDate.getDate() < 10 ? '0' : '') + newDate.getDate(); //get new data\n\n    firebase.firestore().collection(\"dates\").doc(date).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        var data = querySnapshot.data();\n\n        if (data.events) {\n          var tmpteamdata = {};\n          var tmpdata = {}; //For each pilot with events today: check if they are user/same team/neither and push accordingly\n\n          this.setState({\n            userdata: data.events[this.state.userid] || []\n          });\n          this.state.team.forEach(p => {\n            tmpteamdata[p] = data.events[p] || [];\n          });\n          Object.keys(data.events).forEach(key => {\n            tmpdata[key] = data.events[key];\n          });\n          this.setState({\n            data: tmpdata,\n            teamdata: tmpteamdata\n          });\n          console.log(tmpdata, tmpteamdata);\n        }\n      } else {\n        console.log(\"Document doesn't exist\");\n        this.setState({\n          data: null\n        });\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }\n\n  changeDate(offset) {\n    if (offset != 0) {\n      var newDate = new Date(this.state.date);\n      newDate.setDate(newDate.getDate() + offset);\n      this.setState({\n        date: new Date(newDate)\n      });\n      this.getData(newDate);\n    }\n  }\n\n  componentDidMount() {\n    //Convert displayName to userID\n    var id = this.props.user[0].toLowerCase() + this.props.user.split(' ')[1].toLowerCase();\n    this.setState({\n      userid: id\n    }); //get team members\n\n    firebase.firestore().collection(\"pilots\").doc(id).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        var data = querySnapshot.data();\n        this.setState({\n          team: data.team\n        });\n      } else {\n        console.log(\"Document doesn't exist\");\n        this.setState({\n          team: null\n        });\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"page-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(RenderDayHeader, {\n      date: this.state.date,\n      changeDate: i => {\n        this.changeDate(i);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(Day, {\n      toggleOverlay: (event, id) => {\n        this.props.toggleOverlay(event, id);\n      },\n      data: this.state.data,\n      teamdata: this.state.teamdata,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(Legend, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Schedule;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Schedule.js"],"names":["React","firebase","RIGHT_BTN","LEFT_BTN","thisExpression","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","RenderDate","props","weekday","date","getDay","day","month","year","days","months","view","parseName","name","toUpperCase","slice","RenderDayHeader","displayDate","curDate","diff","Math","round","getTime","disableLeft","disableRight","changeDate","Event","style","toggleOverlay","createRow","pilot","events","flag","r","push","i","length","console","log","forEach","event","startTime","endTime","id","left","right","offset","floor","width","parseInt","Day","data","tableRows","teamLength","Object","keys","teamdata","tableHeaders","toString","rowTemplate","key","Legend","Schedule","Component","constructor","state","team","userid","userdata","getData","newDate","firestore","collection","doc","get","then","querySnapshot","empty","tmpteamdata","tmpdata","setState","p","catch","error","setDate","componentDidMount","user","toLowerCase","split","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport firebase from './Firebase.js';\nimport \"./Schedule.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport { thisExpression } from '@babel/types';\n\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\nvar yyyy = today.getFullYear();\n\ntoday = mm + '/' + dd + '/' + yyyy;\n\nfunction RenderDate(props) {\n    var weekday = props.date.getDay();\n    var day = props.date.getDate();\n    var month = props.date.getMonth();\n    var year = props.date.getFullYear();\n    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\n    \n    if (props.view == 'sm-view') {\n        return (\n            <div className={'flight-date sm-view'}>\n                <h2>{month+\" / \"+day+\" / \"+year}</h2>\n            </div>\n        )\n    }\n    \n    return (\n        <div className={'flight-date lg-view'}>\n            <h2>{days[weekday] +\", \"+months[month]+\" \"+day+\", \"+year}</h2>\n        </div>\n    )\n}\n\nfunction parseName(name) {\n    return name[0].toUpperCase() + \". \" + name[1].toUpperCase() + name.slice(2);\n}\n\nfunction RenderDayHeader(props) {\n    var displayDate = new Date(props.date);\n    var curDate = new Date();\n    var diff = Math.round((displayDate.getTime() - curDate.getTime())/(24*60*60*1000));\n\n    // Only show flights for last 3 days to the next 2 weeks\n    var disableLeft = diff == -3;\n    var disableRight= diff == 14;\n    return (\n        <div className=\"day-header\">\n            <img className={'date-btn' + (disableLeft ? ' disabled': '')} src={LEFT_BTN} onClick={()=>{props.changeDate(disableLeft ? 0 : -1)}}></img>\n            <RenderDate date={displayDate} view=\"lg-view\"/>\n            <RenderDate date={displayDate} view=\"sm-view\"/>\n            <img className={'date-btn' + (disableRight ? ' disabled': '')} src={RIGHT_BTN} onClick={()=>{props.changeDate(disableRight ? 0 : 1)}}></img>\n        </div>\n    )\n}\n\nfunction Event(props) {\n    return (<td><button className={props.name} style={props.style} onClick={props.toggleOverlay}/></td>)\n}\n\nfunction createRow(pilot, events, toggleOverlay, flag) {\n    var r = [];\n    r.push(<td className='pilot-col'>{flag ? parseName(pilot): pilot}</td>);\n    for (var i = 0; i < 12 ; i += 1) {\n        r.push(<td></td>);\n    }\n        if (events.length > 0) {\n            console.log(events)\n            events.forEach(event => {\n                if (flag){\n                    var [name, left, right, id] = ['flight', event.startTime/100, event.endTime/100, event.id];\n                }\n                else {\n                    var [name, left, right] = event;\n                }\n                var offset = 0;\n                offset = Math.floor((left%2)/0.5);\n                var style = {width: ((right-left)*50)+'%', left: (offset*25)+'%'};\n                r[1+parseInt(left/2)] = <Event name={name} style={style} toggleOverlay={()=>{toggleOverlay('flight', '7893521')}}/>;\n            })\n        }\n\n    return r;\n}\n\nfunction Day(props) {\n    var data = props.data;\n    var tableRows = [];\n    var teamLength = Object.keys(props.teamdata).length;\n\n    //Create table header \n    var tableHeaders = [];\n    tableHeaders.push(<th></th>);\n    for (var i = 0; i < 24 ; i += 2) {\n        tableHeaders.push(<th>{(i < 10 ? '0'+i.toString() : i.toString())+'00'}</th>);\n    }\n    //Create empty columns for gridline\n    var rowTemplate = [];\n    for (var i = 0; i < 12 ; i += 1) {\n        rowTemplate.push(<td></td>);\n    }\n\n    Object.keys(props.teamdata).forEach(key => {\n        if (tableRows.length == teamLength-1) {\n            //Add divider to last element of team \n            tableRows.push(<tr className='underline'>{createRow(key, props.teamdata[key], props.toggleOverlay, true)}</tr>);\n        }\n        else {\n            tableRows.push(<tr>{createRow(key, props.teamdata[key], props.toggleOverlay, true)}</tr>);\n        }\n    });\n    \n\n    Object.keys(data).forEach(key => {\n        tableRows.push(<tr>{createRow(key, data[key], props.toggleOverlay)}</tr>);\n    });\n\n    return (\n        <div className=\"day-container\">\n            <table className='schedule-table'>\n                <tr>\n                    {tableHeaders}\n                </tr>\n                {tableRows}\n            </table>\n        </div>\n        \n    )\n}\n\nfunction Legend(props) {\n    return (\n        <div className=\"legend-container\">\n            <div className=\"legend-color flight\"></div>\n            <h4 className=\"legend-entry\">Flight</h4>\n            <div className=\"legend-color apt\"></div>\n            <h4 className=\"legend-entry\">Appointment</h4>\n            <div className=\"legend-color meeting\"></div>\n            <h4 className=\"legend-entry\">Meeting</h4>\n        </div>\n    )\n}\n\n\nclass Schedule extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {'Amelia Earhart' : [['flight', 2, 5], ['flight', 8, 9], ['meeting', 12, 15], ['apt', 20, 21]], \n            'D.B. Cooper' : [['meeting', 4, 6], ['flight', 10, 14]], \n            'Pete Mitchell' : [['apt', 8, 9], ['flight', 14, 17], ['meeting', 19, 21]], \n            'Jimmy Doolittle' : [['flight', 5, 8], ['meeting', 9, 10], ['apt', 17, 18]], \n            'Maverick' : [['apt', 4, 5], ['flight', 12, 14]], \n            'Charles Lindbergh' : [['meeting', 5, 6], ['apt', 14, 17], ['meeting', 19.5, 22]], \n            'Iceman' : [['flight', 3, 5], ['flight', 9, 10], ['meeting', 12, 15]], \n            'Jenny' : [['apt', 5, 6], ['flight', 10, 14]], \n            'Orvill Wright' : [['apt', 8, 9], ['flight', 15.5, 17], ['meeting', 19, 21]], \n            'Wilbur Wright' : [['flight', 4.25, 8], ['meeting', 9, 10], ['apt', 17.5, 18.75]], \n            'Erich Hartmann' : [['apt', 4, 5], ['flight', 12, 14]], \n            'Chuck Yeager' : [['meeting', 5, 6], ['apt', 14, 17], ['meeting', 19, 20]]},\n            date: new Date(),\n            team: [],\n            userid: '',\n            userdata: [],\n            teamdata: [],\n        }\n    }\n\n\n    getData(newDate) {\n        var date = newDate.getFullYear() + '-' + (newDate.getMonth() < 9 ? '0':'') + (newDate.getMonth()+1) + '-' + (newDate.getDate() < 10 ? '0':'') + (newDate.getDate()) ;\n\n        //get new data\n        firebase.firestore().collection(\"dates\").doc(date)\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                var data = querySnapshot.data();\n                if (data.events) {\n                    var tmpteamdata = {};\n                    var tmpdata = {};\n\n                    //For each pilot with events today: check if they are user/same team/neither and push accordingly\n                    this.setState({userdata: data.events[this.state.userid] || []})\n                    this.state.team.forEach(p => {\n                        tmpteamdata[p] = data.events[p] || []\n                    })\n                    Object.keys(data.events).forEach(key => {\n                        tmpdata[key] = data.events[key];\n                    })\n                    this.setState({data: tmpdata, teamdata: tmpteamdata})\n                    console.log(tmpdata, tmpteamdata)\n                }\n            }\n            else {\n                console.log(\"Document doesn't exist\");\n                this.setState({data: null});\n            };\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n    }\n\n    changeDate(offset) {\n        if (offset != 0) {\n            var newDate = new Date(this.state.date);\n            newDate.setDate(newDate.getDate() + offset);\n            this.setState({date: new Date(newDate)})\n            this.getData(newDate);\n        }\n    }\n\n    componentDidMount() {\n        //Convert displayName to userID\n        var id = this.props.user[0].toLowerCase() + this.props.user.split(' ')[1].toLowerCase();\n        this.setState({userid: id});\n        \n         //get team members\n         firebase.firestore().collection(\"pilots\").doc(id)\n         .get()\n         .then((querySnapshot) => {\n             if (!querySnapshot.empty) {\n                 var data = querySnapshot.data();\n                 this.setState({team: data.team});\n             }\n             else {\n                 console.log(\"Document doesn't exist\");\n                 this.setState({team: null});\n             };\n         })\n         .catch(function(error) {\n             console.log(\"Error getting documents: \", error);\n         });\n    }\n\n\n    render() {\n        return (\n            <div className='page-container'>\n                <RenderDayHeader date={this.state.date} changeDate={(i)=>{this.changeDate(i)}}/>\n                <Day toggleOverlay={(event,id)=>{this.props.toggleOverlay(event, id)}} data={this.state.data} teamdata={this.state.teamdata}/>\n                <Legend/>\n            </div>\n        )\n    }\n}\n\nexport default Schedule;"]},"metadata":{},"sourceType":"module"}