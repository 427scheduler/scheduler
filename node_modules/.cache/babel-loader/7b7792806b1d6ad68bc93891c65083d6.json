{"ast":null,"code":"import _slicedToArray from \"/Users/jenny/Desktop/SOAS/scheduler/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Login.js\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport \"./Login.css\";\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\n/*function checkInput(input) {\n    if (input == \"Amelia Earhart\") {\n        document.getElementsByClassName(\"pswdForm\")[0].hidden = false;\n        document.getElementsByClassName(\"pswdInput\")[0].hidden = false;\n    }\n    else {\n        if (document.getElementsByClassName(\"pswdForm\")[0].hidden == false) {\n            document.getElementsByClassName(\"pswdForm\")[0].hidden = true;\n            document.getElementsByClassName(\"pswdInput\")[0].hidden = true;\n        }\n    }\n}*/\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Login');\n}\n\nfunction validateInput(signUp, email, password, passwordConfirm) {\n  var ok = true;\n\n  if ((email.length < 4 || email.slice(-13) !== '@forces.gc.ca') && email !== 'amelia.earhart97@outlook.com') {\n    //if (email.length < 4){\n    setAlert('email', 'Please enter your @forces.gc.ca email address');\n    ok = false;\n  } else {\n    setAlert('email', '');\n  }\n\n  if (password.length < 5) {\n    setAlert('password', 'Please enter a password');\n    ok = false;\n  } else {\n    setAlert('password', '');\n  }\n\n  if (signUp) {\n    if (passwordConfirm != password) {\n      setAlert('password', 'Passwords don\\'t match');\n      ok = false;\n    }\n  }\n\n  return ok;\n}\n\nfunction handleError(errorCode, errorMessage) {\n  switch (errorCode) {\n    case 'auth/weak-password':\n      setAlert('password', 'The password is too weak');\n      break;\n\n    case 'auth/wrong-password':\n      setAlert('password', 'Wrong password');\n      break;\n\n    case 'auth/email-already-in-use':\n      setAlert('email', 'The email address is already in use by another account.');\n      break;\n\n    case 'auth/user-not-found':\n      setAlert('email', 'This user does not exist. Please sign up.');\n      break;\n\n    default:\n      setAlert('email', errorMessage);\n  }\n}\n/**\n * Handles the sign up button press.\n */\n\n\nfunction signUp() {\n  var email = document.getElementById('su_email').value;\n  var password = document.getElementById('su_password').value;\n  var passwordConfirm = document.getElementById('su_passwordConfirm').value;\n\n  if (!validateInput(true, email, password, passwordConfirm)) {\n    return;\n  } // Sign in with email and pass.\n  // [START createwithemail]\n\n\n  firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {\n    // Handle Errors here.\n    handleError(error.code, error.message);\n    console.log(error);\n    return;\n  });\n  firebase.auth().onAuthStateChanged(function (user) {\n    if (user) {\n      if (!user.displayName) {\n        var userName = user.email.split(/([0-9]+)/)[0];\n        userName = userName.split('@')[0];\n\n        var _userName$split = userName.split('.'),\n            _userName$split2 = _slicedToArray(_userName$split, 2),\n            first = _userName$split2[0],\n            last = _userName$split2[1];\n\n        first = first[0].toUpperCase() + first.substring(1).toLowerCase();\n        last = last[0].toUpperCase() + last.substring(1).toLowerCase();\n        user.updateProfile({\n          displayName: first + \" \" + last\n        }).catch(function (error) {\n          console.log(\"An error occurred while creating name. Please try again.\");\n        });\n      }\n\n      if (!user.emailVerified) {\n        user.sendEmailVerification();\n      }\n    }\n  });\n  var user = firebase.auth().currentUser;\n\n  if (user) {}\n}\n\nfunction logIn() {\n  if (firebase.auth().currentUser) {\n    // [START signout]\n    firebase.auth().signOut(); // [END signout]\n  } else {\n    var email = document.getElementById('login_email').value;\n    var password = document.getElementById('login_password').value;\n\n    if (!validateInput(false, email, password, null)) {\n      return;\n    } // Sign in with email and pass.\n\n\n    firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {\n      // Handle Errors here.\n      handleError(error.code, error.message);\n      console.log(error);\n    });\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user) {\n        if (!user.emailVerified) {\n          setAlert('email', 'Please verify your email.');\n        }\n      }\n    });\n  } //document.getElementById('quickstart-sign-in').disabled = true;\n\n}\n\nfunction setAlert(type, alertText) {\n  var errorType = type + 'Error';\n  document.getElementById(errorType).innerHTML = alertText;\n}\n\nfunction LoginForm(props) {\n  //var pilots = []\n  //firebase.ref('/pilots').once('name').then(function(snapshot) {\n  //    console.log(snapshot.val())\n  //});\n  return React.createElement(\"form\", {\n    className: \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"userForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"login_input\",\n    id: \"login_email\",\n    onKeyUp: handleEnter,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"emailError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(\"h2\", {\n    className: \"pswdForm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    className: \"login_input\",\n    id: \"login_password\",\n    onKeyUp: handleEnter,\n    type: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"passwordError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }), React.createElement(RenderLoginButtons, {\n    getSignUpForm: props.getSignUpForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }));\n}\n\nfunction SignUpForm(props) {\n  //var pilots = []\n  //firebase.ref('/pilots').once('name').then(function(snapshot) {\n  //    console.log(snapshot.val())\n  //});\n  return React.createElement(\"form\", {\n    className: \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"surow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sutext\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"suinput\",\n    id: \"su_email\",\n    onKeyUp: handleEnter,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"emailError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"surow su_narrow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sutext\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \"First Name\"), React.createElement(\"input\", {\n    className: \"suinput\",\n    id: \"su_firstName\",\n    onKeyUp: handleEnter,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"surow su_narrow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sutext\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Last Name\"), React.createElement(\"input\", {\n    className: \"suinput\",\n    id: \"su_lastName\",\n    onKeyUp: handleEnter,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"surow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sutext\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    className: \"suinput\",\n    id: \"su_password\",\n    onKeyUp: handleEnter,\n    type: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"surow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"sutext\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, \"Confirm Password\"), React.createElement(\"input\", {\n    className: \"suinput\",\n    id: \"su_passwordConfirm\",\n    onKeyUp: handleEnter,\n    type: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"passwordError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  })), React.createElement(RenderSignUpButtons, {\n    getLoginForm: props.getLoginForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }));\n}\n\nfunction handleEnter(event) {\n  if (event.keyCode === 13) {\n    // Trigger the button element with a click\n    document.getElementsByClassName(\"sign-in-btn\")[0].click();\n  }\n}\n\nfunction RenderLoginButtons(props) {\n  return React.createElement(\"div\", {\n    className: \"login-form-btns \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"sign-up-btn\",\n    type: \"button\",\n    onClick: props.getSignUpForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, \"Sign Up\"), React.createElement(\"button\", {\n    className: \"sign-in-btn\",\n    onKeyUp: handleEnter,\n    type: \"button\",\n    onClick: logIn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Next\"));\n}\n\nfunction RenderSignUpButtons(props) {\n  return React.createElement(\"div\", {\n    className: \"login-form-btns \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"sign-up-btn\",\n    type: \"button\",\n    onClick: props.getLoginForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(\"button\", {\n    className: \"sign-in-btn\",\n    onKeyUp: handleEnter,\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, \"Sign Up\"));\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      signUp: false\n    };\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n  }\n\n  getLoginForm() {\n    this.setState({\n      signUp: false\n    });\n    return;\n  }\n\n  getSignUpForm() {\n    this.setState({\n      signUp: true\n    });\n    return;\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.signUp) {\n      return React.createElement(SignUpForm, {\n        getLoginForm: this.getLoginForm.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(LoginForm, {\n        getSignUpForm: this.getSignUpForm.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Login.js"],"names":["React","ReactGA","firebase","ErrorPage","initializeReactGA","initialize","pageview","validateInput","signUp","email","password","passwordConfirm","ok","length","slice","setAlert","handleError","errorCode","errorMessage","document","getElementById","value","auth","createUserWithEmailAndPassword","catch","error","code","message","console","log","onAuthStateChanged","user","displayName","userName","split","first","last","toUpperCase","substring","toLowerCase","updateProfile","emailVerified","sendEmailVerification","currentUser","logIn","signOut","signInWithEmailAndPassword","type","alertText","errorType","innerHTML","LoginForm","props","handleEnter","getSignUpForm","SignUpForm","getLoginForm","event","keyCode","getElementsByClassName","click","RenderLoginButtons","RenderSignUpButtons","Login","Component","constructor","state","hasError","componentDidCatch","info","setState","componentDidMount","render","bind"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactGA from 'react-ga';\nimport \"./Login.css\"\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\n\n\n/*function checkInput(input) {\n    if (input == \"Amelia Earhart\") {\n        document.getElementsByClassName(\"pswdForm\")[0].hidden = false;\n        document.getElementsByClassName(\"pswdInput\")[0].hidden = false;\n    }\n    else {\n        if (document.getElementsByClassName(\"pswdForm\")[0].hidden == false) {\n            document.getElementsByClassName(\"pswdForm\")[0].hidden = true;\n            document.getElementsByClassName(\"pswdInput\")[0].hidden = true;\n        }\n    }\n}*/\n\nfunction initializeReactGA() {\n    ReactGA.initialize('UA-108277898-5');\n    ReactGA.pageview('/Login');\n  }\n\nfunction validateInput(signUp, email, password, passwordConfirm) {\n    var ok = true;\n    if ((email.length < 4 || email.slice(-13) !== '@forces.gc.ca') && email !== 'amelia.earhart97@outlook.com') {\n    //if (email.length < 4){\n        setAlert('email', 'Please enter your @forces.gc.ca email address');\n        ok = false;\n    }\n    else {setAlert('email', '')}\n    if (password.length < 5 ) {\n        setAlert('password','Please enter a password');\n        ok = false;\n    }\n    else {setAlert('password', '')}\n\n    if (signUp) {\n        if (passwordConfirm != password) {\n            setAlert('password','Passwords don\\'t match');\n            ok = false;\n        }\n    }\n    return ok;\n}\n\n\n\nfunction handleError(errorCode, errorMessage) {\n    switch(errorCode) {\n        case 'auth/weak-password':\n            setAlert('password','The password is too weak');\n            break;\n        case 'auth/wrong-password': \n            setAlert('password', 'Wrong password')\n            break;\n        case 'auth/email-already-in-use': \n            setAlert('email','The email address is already in use by another account.');\n            break;\n        case 'auth/user-not-found': \n            setAlert('email', 'This user does not exist. Please sign up.');\n            break;\n        default: \n            setAlert('email', errorMessage);\n    }\n}\n/**\n * Handles the sign up button press.\n */\nfunction signUp() {\n    var email = document.getElementById('su_email').value;\n    var password = document.getElementById('su_password').value;\n    var passwordConfirm = document.getElementById('su_passwordConfirm').value;\n\n    if (!validateInput(true, email, password, passwordConfirm)) {\n        return;\n    }\n    // Sign in with email and pass.\n    // [START createwithemail]\n    firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {\n        // Handle Errors here.\n        handleError(error.code, error.message);\n        console.log(error);\n        return;\n    });\n    firebase.auth().onAuthStateChanged(function(user) {\n        if (user) {\n            if (!user.displayName) {\n                var userName = user.email.split(/([0-9]+)/)[0];\n                userName = userName.split('@')[0];\n                var [first, last] = userName.split('.');\n                first = first[0].toUpperCase() + first.substring(1).toLowerCase();\n                last = last[0].toUpperCase() + last.substring(1).toLowerCase();\n                user.updateProfile({\n                    displayName: first + \" \" + last\n                }).catch(function(error) {\n                    console.log(\"An error occurred while creating name. Please try again.\");\n                });\n            }\n            if (!user.emailVerified) {\n                user.sendEmailVerification();\n            }\n        }\n    });\n    var user = firebase.auth().currentUser;\n    if (user) {\n        \n    }\n}\n\nfunction logIn() {\n    if (firebase.auth().currentUser) {\n      // [START signout]\n      firebase.auth().signOut();\n      // [END signout]\n    } else {\n        var email = document.getElementById('login_email').value;\n        var password = document.getElementById('login_password').value;\n        if (!validateInput(false, email, password, null)) {\n            return;\n        }\n        // Sign in with email and pass.\n        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {\n            // Handle Errors here.\n            handleError(error.code, error.message);\n            console.log(error);\n        });\n\n        firebase.auth().onAuthStateChanged(function(user) {\n            if (user) {\n              if (!user.emailVerified) {\n                  setAlert('email', 'Please verify your email.')\n              }\n            }\n        });\n    }\n    //document.getElementById('quickstart-sign-in').disabled = true;\n  }\n\n\n\nfunction setAlert(type, alertText) {\n    var errorType = type + 'Error';\n    document.getElementById(errorType).innerHTML = alertText;\n}\nfunction LoginForm(props) {\n    //var pilots = []\n    //firebase.ref('/pilots').once('name').then(function(snapshot) {\n    //    console.log(snapshot.val())\n    //});\n    \n    return (\n        <form className=\"form\">\n            <h2 className=\"userForm\">Email</h2>\n            <input className=\"login_input\" id=\"login_email\" onKeyUp={handleEnter} type=\"text\"/>\n            <p id=\"emailError\"/>\n            <br/>\n            <h2 className=\"pswdForm\" >Password</h2>\n            <input className=\"login_input\" id=\"login_password\" onKeyUp={handleEnter} type=\"password\"/>\n            <p id=\"passwordError\"/>\n            <RenderLoginButtons getSignUpForm={props.getSignUpForm}/>\n        </form> \n    )\n}\n\nfunction SignUpForm(props) {\n    //var pilots = []\n    //firebase.ref('/pilots').once('name').then(function(snapshot) {\n    //    console.log(snapshot.val())\n    //});\n    \n    return (\n        <form className=\"form\">\n            <div className=\"surow\">\n            <h3 className=\"sutext\">Email</h3>\n            <input className=\"suinput\" id=\"su_email\" onKeyUp={handleEnter} type=\"text\"/>\n            <p id=\"emailError\"/>\n            </div>\n            <div>\n            <div className=\"surow su_narrow\">\n                <h3 className=\"sutext\">First Name</h3>\n                <input className=\"suinput\" id=\"su_firstName\" onKeyUp={handleEnter} type=\"text\"/>\n            </div>\n            <div className=\"surow su_narrow\">\n                <h3 className=\"sutext\">Last Name</h3>\n                <input className=\"suinput\" id=\"su_lastName\" onKeyUp={handleEnter} type=\"text\"/>\n            </div>\n            </div>\n            <br/>\n            <div className=\"surow\">\n                <h3 className=\"sutext\">Password</h3>\n                <input className=\"suinput\" id=\"su_password\" onKeyUp={handleEnter} type=\"password\"/>\n            </div>\n            <br/>\n            <div className=\"surow\">\n                <h3 className=\"sutext\">Confirm Password</h3>\n                <input className=\"suinput\" id=\"su_passwordConfirm\" onKeyUp={handleEnter} type=\"password\"/>\n                <p id=\"passwordError\"/>\n            </div>\n            <RenderSignUpButtons getLoginForm={props.getLoginForm}/>\n        </form> \n    )\n}\n\nfunction handleEnter(event) {\n    if (event.keyCode === 13) {\n        // Trigger the button element with a click\n        document.getElementsByClassName(\"sign-in-btn\")[0].click();\n    }\n}\n\nfunction RenderLoginButtons(props) {\n    return (\n        <div className='login-form-btns '>\n                <button className=\"sign-up-btn\" type=\"button\" onClick={props.getSignUpForm}>\n                    Sign Up\n                </button>\n                <button className=\"sign-in-btn\" onKeyUp={handleEnter} type=\"button\" onClick={logIn}>\n                    Next\n                </button>\n        </div>\n    );\n}\n\nfunction RenderSignUpButtons(props) {\n    return (\n        <div className='login-form-btns '>\n                <button className=\"sign-up-btn\" type=\"button\" onClick={props.getLoginForm}>\n                    Cancel\n                </button>\n                <button className=\"sign-in-btn\" onKeyUp={handleEnter} type=\"button\">\n                    Sign Up\n                </button>\n        </div>\n    );\n}\n\n\nclass Login extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state={hasError: false, \n        signUp: false,};\n    }\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    componentDidMount() {\n        initializeReactGA();\n    }\n\n    getLoginForm() {\n        this.setState({signUp: false});\n        return;\n    }\n\n    getSignUpForm() {\n        this.setState({signUp: true});\n        return;\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return <ErrorPage/>\n        }\n        if (this.state.signUp) {\n            return <SignUpForm getLoginForm={this.getLoginForm.bind(this)}/>\n        }\n        else {\n            return (\n                <LoginForm getSignUpForm={this.getSignUpForm.bind(this)}/>\n            )\n        }\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}