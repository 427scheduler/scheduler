{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Calendar.js\";\nimport React from 'react';\nimport moment from 'moment';\nimport firebase from \"./Firebase.js\";\nimport './Dashboard.css';\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\n\nfunction DayHeader(props) {\n  return React.createElement(\"div\", {\n    className: \"dayHeader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    id: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, props.day + \"  \"), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, props.date));\n}\n\nfunction DayContents(props) {\n  var content = [];\n\n  if (props.curDayData) {\n    props.curDayData.forEach(event => {\n      var _ref = [event.type, event.startTime, event.endTime, event.title || event.type],\n          type = _ref[0],\n          start = _ref[1],\n          end = _ref[2],\n          details = _ref[3];\n      content.push(React.createElement(\"div\", {\n        className: type + 'Event',\n        style: {\n          height: (end - start) * 60 + 'px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, (start < 100 ? '0' : '') + (start < 1000 ? '0' : '') + start + \" - \" + (end < 100 ? '0' : '') + (end < 1000 ? '0' : '') + end), React.createElement(\"h5\", {\n        className: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, type[0].toUpperCase() + type.slice(1)), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, details)));\n    });\n  }\n\n  return content;\n}\n\nfunction DayView(props) {\n  return React.createElement(\"div\", {\n    className: \"dayView\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(DayHeader, {\n    day: props.day,\n    date: props.date,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), React.createElement(DayContents, {\n    events: props.events,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }));\n}\n\nfunction WeekdaysHeader(props) {\n  var weekdayShort = moment.weekdaysShort();\n  var content = [];\n\n  for (var i = 1; i < 6; i++) {\n    content.push(React.createElement(\"th\", {\n      key: weekdayShort[i],\n      className: \"week-day\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, weekdayShort[i]));\n  }\n  /*weekdayShort.forEach(day => {\n      content.push(<th key={day} className=\"week-day\">\n      {day}\n     </th>);\n  })*/\n\n\n  return content;\n}\n\nfunction DaysOfMonth(props) {\n  var m = props.displayed.format(\"MM\");\n  var y = props.displayed.format(\"YYYY\");\n  var blanks = [];\n\n  for (let i = 0; i < props.firstDayOfMonth; i++) {\n    blanks.push(React.createElement(\"td\", {\n      className: \"calendar-day empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"\"));\n  }\n\n  var parsedWeek = {\n    firstDay: props.curWeek[0][1],\n    month: props.curWeek[0][0],\n    doesOverlap: props.curWeek[0][1] > 22 && props.curWeek[4][1] < 6,\n    days: []\n  };\n  props.curWeek.forEach(a => {\n    parsedWeek.days.push(a[1]);\n  });\n  var daysInMonth = [];\n  var displayedMonth = props.displayed.month();\n\n  for (let d = 1; d <= props.daysInMonth; d++) {\n    var currentDay = \"\";\n\n    if (displayedMonth == parsedWeek.month && parsedWeek.days.includes(d)) {\n      currentDay = \"curweek\";\n    }\n\n    var testDate = y + \"-\" + m + \"-\" + (d < 10 ? '0' : '') + d;\n    var dot = props.flights[testDate] == true ? 'cal-dot hasFlight' : 'cal-dot';\n    daysInMonth.push(React.createElement(\"td\", {\n      key: d,\n      className: \"calendar-day \".concat(currentDay),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      onClick: e => {\n        props.changeCurWeek(moment().month(displayedMonth).date(d));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, d), React.createElement(\"div\", {\n      className: dot,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })));\n  }\n\n  var totalSlots = [...blanks, ...daysInMonth];\n  let rows = [];\n  let cells = [];\n  totalSlots.forEach((row, i) => {\n    if (i % 7 !== 0) {\n      cells.push(row); // if index not equal 7 that means not go to next week\n    } else {\n      rows.push(cells.slice(1, 6)); // when reach next week we contain all td in last week to rows : we're excluding weekends\n\n      cells = []; // empty container \n\n      cells.push(row); // in current loop we still push current row to new container\n    }\n\n    if (i === totalSlots.length - 1) {\n      // when end loop we add remain date\n      rows.push(cells);\n    }\n  });\n  let daysinmonth = rows.map((d, i) => {\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, d);\n  });\n  return React.createElement(\"table\", {\n    className: \"calendar-table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, WeekdaysHeader())), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, daysinmonth));\n}\n\nclass WeekCalendar extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var days = ['Mon', 'Tues', 'Wed', 'Thur', 'Fri'];\n    var content = [];\n\n    for (var i = 0; i < 5; i++) {\n      console.log(this.props.curWeekData[i]);\n      content.push(React.createElement(DayView, {\n        day: days[i],\n        date: this.props.dates[i][1],\n        curDayData: this.props.curWeekData[i],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }));\n    }\n\n    return content;\n  }\n\n}\n\nclass MonthCalendar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.firstDayOfMonth = () => {\n      let dateObject = this.state.displayed;\n      let firstDay = moment(dateObject).startOf(\"month\").format(\"d\");\n      return firstDay;\n    };\n\n    this.month = () => {\n      return this.state.displayed.format(\"MMMM\");\n    };\n\n    this.year = () => {\n      return this.state.displayed.format(\"YYYY\");\n    };\n\n    this.onPrev = () => {\n      this.setState({\n        displayed: this.state.displayed.subtract(1, 'month')\n      });\n      console.log('changing displayed: ', this.state.displayed);\n    };\n\n    this.onNext = () => {\n      this.setState({\n        displayed: this.state.displayed.add(1, 'month')\n      });\n      console.log('changing displayed: ', this.state.displayed);\n    };\n\n    this.state = {\n      displayed: moment(),\n      flights: {}\n    };\n  }\n\n  componentDidMount() {\n    //Convert displayName to userID\n    var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase(); //Retrieving data\n\n    firebase.firestore().collection('pilots').doc(id).get().then(querySnapshot => {\n      this.setState({\n        flights: querySnapshot.data().flights\n      });\n      console.log(this.state.flights);\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }\n\n  render() {\n    var firstDay = this.firstDayOfMonth();\n    var daysInMonth = this.state.displayed.daysInMonth();\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"month-calendar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"month-btn\",\n      src: LEFT_BTN,\n      onClick: e => {\n        this.onPrev();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"month-calendar-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, this.month() + \" \" + this.year()), React.createElement(\"img\", {\n      className: \"month-btn\",\n      src: RIGHT_BTN,\n      onClick: e => {\n        this.onNext();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    })), React.createElement(DaysOfMonth, {\n      curWeek: this.props.curWeek,\n      changeCurWeek: day => {\n        this.props.changeCurWeek(day);\n      },\n      displayed: this.state.displayed,\n      firstDayOfMonth: firstDay,\n      daysInMonth: daysInMonth,\n      flights: this.state.flights,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default WeekCalendar;\nexport { MonthCalendar };","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Calendar.js"],"names":["React","moment","firebase","RIGHT_BTN","LEFT_BTN","DayHeader","props","day","date","DayContents","content","curDayData","forEach","event","type","startTime","endTime","title","start","end","details","push","height","toUpperCase","slice","DayView","events","WeekdaysHeader","weekdayShort","weekdaysShort","i","DaysOfMonth","m","displayed","format","y","blanks","firstDayOfMonth","parsedWeek","firstDay","curWeek","month","doesOverlap","days","a","daysInMonth","displayedMonth","d","currentDay","includes","testDate","dot","flights","e","changeCurWeek","totalSlots","rows","cells","row","length","daysinmonth","map","WeekCalendar","Component","constructor","render","console","log","curWeekData","dates","MonthCalendar","dateObject","state","startOf","year","onPrev","setState","subtract","onNext","add","componentDidMount","id","toLowerCase","split","firestore","collection","doc","get","then","querySnapshot","data","catch","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from 'moment'\nimport firebase from \"./Firebase.js\";\nimport './Dashboard.css';\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\n\nfunction DayHeader(props) {\n    return (\n        \n        <div className='dayHeader'>\n            <h3 id='date'>{props.day + \"  \"}</h3><h3>{props.date}</h3>\n        </div>\n    )\n}\n\nfunction DayContents(props) {\n    var content = [];\n    if (props.curDayData) {\n        props.curDayData.forEach(event => {\n            var [type, start, end, details] = [event.type, event.startTime, event.endTime, event.title || event.type];\n            content.push(\n                <div className={type+'Event'} style={{height: ((end-start)*60)+'px'}}>\n                    <p>{(start < 100 ? '0' : '')+(start < 1000 ? '0' : '')+start + \" - \" + (end < 100 ? '0' : '')+(end < 1000 ? '0' : '')+end}</p>\n                    <h5 className='name'>{type[0].toUpperCase()+type.slice(1,)}</h5>\n                    <h6>{details}</h6>\n                </div>\n            )\n        });\n    }\n    return content;\n}\n\nfunction DayView(props) {\n    return (\n        <div className='dayView'>\n            <DayHeader day={props.day} date={props.date}/>\n            <DayContents events={props.events}/>\n        </div>\n    )\n}\n\nfunction WeekdaysHeader(props) {\n    var weekdayShort = moment.weekdaysShort();\n    var content = []\n    for (var i = 1; i < 6; i++) {\n        content.push(<th key={weekdayShort[i]} className=\"week-day\">\n        {weekdayShort[i]}\n       </th>);\n    }\n    /*weekdayShort.forEach(day => {\n        content.push(<th key={day} className=\"week-day\">\n        {day}\n       </th>);\n    })*/\n\n    return content;\n}\n\n\n\nfunction DaysOfMonth(props) {\n    var m = props.displayed.format(\"MM\");\n    var y = props.displayed.format(\"YYYY\");\n\n    var blanks = [];\n    for (let i = 0; i < props.firstDayOfMonth; i++) {\n      blanks.push(\n        <td className=\"calendar-day empty\">{\"\"}</td>\n      );\n    }\n    var parsedWeek = {firstDay: props.curWeek[0][1], month: props.curWeek[0][0], doesOverlap: (props.curWeek[0][1]>22 && props.curWeek[4][1] < 6), days: []};\n    props.curWeek.forEach(a => {parsedWeek.days.push(a[1])});\n    var daysInMonth = [];\n    var displayedMonth = props.displayed.month();\n    \n    for (let d = 1; d <= props.daysInMonth; d++) { \n        var currentDay = \"\";   \n        if (displayedMonth == parsedWeek.month && parsedWeek.days.includes(d)) {\n            currentDay = \"curweek\";\n        }\n        var testDate = y + \"-\" + m + \"-\" + (d < 10 ? '0':'') + d;\n        var dot = props.flights[testDate] == true ? 'cal-dot hasFlight' : 'cal-dot';\n        daysInMonth.push(  \n            <td key={d} className={`calendar-day ${currentDay}`}>   \n                <span onClick={e => { props.changeCurWeek(moment().month(displayedMonth).date(d));}} >{d}</span>\n                <div className={dot}></div>\n            </td>);\n    }\n    var totalSlots = [...blanks, ...daysInMonth];\n    let rows = [];\n    let cells = [];\n\n    totalSlots.forEach((row, i) => {\n        if (i % 7 !== 0 ) {\n          cells.push(row); // if index not equal 7 that means not go to next week\n        } else {\n            rows.push(cells.slice(1, 6)); // when reach next week we contain all td in last week to rows : we're excluding weekends\n            cells = []; // empty container \n            cells.push(row); // in current loop we still push current row to new container\n        }\n        if (i === totalSlots.length - 1) { // when end loop we add remain date\n          rows.push(cells);\n        }\n    });\n\n    let daysinmonth = rows.map((d, i) => {\n    return <tr>{d}</tr>;\n    });\n\n    return (\n        <table className=\"calendar-table\">\n        <thead>\n            <tr>{WeekdaysHeader()}</tr>\n        </thead>\n        <tbody>{daysinmonth}</tbody>\n        </table>\n    )\n}\n\nclass WeekCalendar extends React.Component {\n\n    constructor(props) {\n        super(props);\n        \n    }\n\n    render () {\n        var days = ['Mon', 'Tues', 'Wed', 'Thur', 'Fri'];\n        var content = [];\n        for (var i=0; i < 5; i++) {\n            console.log(this.props.curWeekData[i])\n            content.push(<DayView day={days[i]} date={this.props.dates[i][1]} curDayData={this.props.curWeekData[i]}/>)\n        }\n        return content;\n    }\n}\n\nclass MonthCalendar extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            displayed: moment(), \n            flights: {},\n        }\n    }\n\n    firstDayOfMonth = () => {\n        let dateObject = this.state.displayed;\n        let firstDay = moment(dateObject)\n                     .startOf(\"month\")\n                     .format(\"d\"); \n       return firstDay;\n    };\n\n    month = () => {\n        return this.state.displayed.format(\"MMMM\");};\n    year = () => {\n        return this.state.displayed.format(\"YYYY\");\n    }\n\n    onPrev = () => {\n        this.setState({displayed: this.state.displayed.subtract(1, 'month')});\n        console.log('changing displayed: ', this.state.displayed)\n    };\n    onNext = () => {\n        this.setState({displayed: this.state.displayed.add(1, 'month')});\n        console.log('changing displayed: ', this.state.displayed)\n    };\n\n    componentDidMount() {\n        //Convert displayName to userID\n        var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase();\n\n        //Retrieving data\n        firebase.firestore().collection('pilots').doc(id).get()\n        .then((querySnapshot) => {\n            this.setState({flights: querySnapshot.data().flights})\n            console.log(this.state.flights)\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n    }\n\n    render () {\n       \n        var firstDay = this.firstDayOfMonth();\n        var daysInMonth = this.state.displayed.daysInMonth();\n        return (\n        <div>\n            <div className=\"month-calendar\">\n                <img className='month-btn' src={LEFT_BTN} onClick={e => {this.onPrev();}}></img>\n                <div className=\"month-calendar-header\">{this.month() + \" \" + this.year()}</div>\n                <img className='month-btn' src={RIGHT_BTN} onClick={e => {this.onNext();}}></img>\n            </div>\n            <DaysOfMonth curWeek={this.props.curWeek} \n                            changeCurWeek={(day)=>{this.props.changeCurWeek(day)}} \n                            displayed={this.state.displayed} \n                            firstDayOfMonth={firstDay} \n                            daysInMonth={daysInMonth}\n                            flights={this.state.flights}/>\n        </div>)\n    }\n}\n\nexport default WeekCalendar;\nexport {MonthCalendar};"]},"metadata":{},"sourceType":"module"}