{"ast":null,"code":"import firebase from \"./Firebase.js\";\nlet firestore = firebase.firestore();\n\nfunction firebaseDeleteFlight(id, props) {\n  //Delete from events \n  firestore.collection(\"events\").doc(id).delete().then(console.log(\"Document successfully deleted from events\")).catch(function (error) {\n    console.log(\"Error getting documents: \", error);\n  });\n  var pilots = [props.captain, props.fo];\n\n  if (props.crew) {\n    pilots.push(props.crew);\n  }\n\n  ;\n\n  if (props.fe) {\n    pilots.push(props.fe);\n  }\n\n  ;\n  pilots.forEach(pilot => {\n    var path = \"events.\" + pilot; //Delete from dates\n\n    console.log(\"Deleting from date: \", props.date);\n    firestore.collection(\"dates\").doc(props.date).update({\n      [path]: firebase.firestore.FieldValue.arrayRemove({\n        'type': 'flight',\n        'startTime': props.timeStart,\n        'endTime': props.timeEnd,\n        'id': id\n      })\n    }).then(console.log(\"Document successfully deleted from events\")).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    }); //Delete from pilots\n\n    firestore.collection(\"pilots\").doc(pilot).collection('upcoming-events').where('flightid', '==', id).get().then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        doc.ref.delete();\n      });\n    });\n  });\n}\n\nfunction firebaseCreateDate(date) {\n  firebase.firestore().collection(\"dates\").doc(date).set({\n    twilight: 'N/A',\n    sgt: 'N/A',\n    mvp: 'N/A',\n    fdo: 'N/A',\n    groundrun: 'N/A',\n    events: {}\n  });\n}\n\nexport { firebaseDeleteFlight, firebaseCreateDate };","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/FirebaseHelper.js"],"names":["firebase","firestore","firebaseDeleteFlight","id","props","collection","doc","delete","then","console","log","catch","error","pilots","captain","fo","crew","push","fe","forEach","pilot","path","date","update","FieldValue","arrayRemove","timeStart","timeEnd","where","get","querySnapshot","ref","firebaseCreateDate","set","twilight","sgt","mvp","fdo","groundrun","events"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,eAArB;AAEA,IAAIC,SAAS,GAAGD,QAAQ,CAACC,SAAT,EAAhB;;AAEA,SAASC,oBAAT,CAA8BC,EAA9B,EAAkCC,KAAlC,EAAyC;AACrC;AACAH,EAAAA,SAAS,CAACI,UAAV,CAAqB,QAArB,EAA+BC,GAA/B,CAAmCH,EAAnC,EACKI,MADL,GAEKC,IAFL,CAGQC,OAAO,CAACC,GAAR,CAAY,2CAAZ,CAHR,EAIKC,KAJL,CAIW,UAASC,KAAT,EAAgB;AACnBH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC;AACP,GAND;AAQA,MAAIC,MAAM,GAAG,CAACT,KAAK,CAACU,OAAP,EAAgBV,KAAK,CAACW,EAAtB,CAAb;;AACA,MAAIX,KAAK,CAACY,IAAV,EAAgB;AAACH,IAAAA,MAAM,CAACI,IAAP,CAAYb,KAAK,CAACY,IAAlB;AAAwB;;AAAA;;AACzC,MAAIZ,KAAK,CAACc,EAAV,EAAc;AAACL,IAAAA,MAAM,CAACI,IAAP,CAAYb,KAAK,CAACc,EAAlB;AAAsB;;AAAA;AAErCL,EAAAA,MAAM,CAACM,OAAP,CAAeC,KAAK,IAAI;AACpB,QAAIC,IAAI,GAAG,YAAYD,KAAvB,CADoB,CAGpB;;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCN,KAAK,CAACkB,IAA1C;AACArB,IAAAA,SAAS,CAACI,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCF,KAAK,CAACkB,IAAxC,EAA8CC,MAA9C,CAAqD;AACjD,OAACF,IAAD,GAAQrB,QAAQ,CAACC,SAAT,CAAmBuB,UAAnB,CAA8BC,WAA9B,CAA0C;AAAC,gBAAO,QAAR;AAAkB,qBAAYrB,KAAK,CAACsB,SAApC;AAA+C,mBAAWtB,KAAK,CAACuB,OAAhE;AAAyE,cAAMxB;AAA/E,OAA1C;AADyC,KAArD,EAGKK,IAHL,CAIQC,OAAO,CAACC,GAAR,CAAY,2CAAZ,CAJR,EAKKC,KALL,CAKW,UAASC,KAAT,EAAgB;AACnBH,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC;AACP,KAPD,EALoB,CAcpB;;AACAX,IAAAA,SAAS,CAACI,UAAV,CAAqB,QAArB,EAA+BC,GAA/B,CAAmCc,KAAnC,EAA0Cf,UAA1C,CAAqD,iBAArD,EAAwEuB,KAAxE,CAA8E,UAA9E,EAA0F,IAA1F,EAAgGzB,EAAhG,EACK0B,GADL,GAEKrB,IAFL,CAEU,UAASsB,aAAT,EAAwB;AAC1BA,MAAAA,aAAa,CAACX,OAAd,CAAsB,UAASb,GAAT,EAAc;AAClCA,QAAAA,GAAG,CAACyB,GAAJ,CAAQxB,MAAR;AACD,OAFD;AAGH,KANL;AAOH,GAtBD;AAwBH;;AAED,SAASyB,kBAAT,CAA4BV,IAA5B,EAAkC;AAC9BtB,EAAAA,QAAQ,CAACC,SAAT,GAAqBI,UAArB,CAAgC,OAAhC,EAAyCC,GAAzC,CAA6CgB,IAA7C,EAAmDW,GAAnD,CAAuD;AACnDC,IAAAA,QAAQ,EAAE,KADyC;AAEnDC,IAAAA,GAAG,EAAE,KAF8C;AAGnDC,IAAAA,GAAG,EAAE,KAH8C;AAInDC,IAAAA,GAAG,EAAE,KAJ8C;AAKnDC,IAAAA,SAAS,EAAE,KALwC;AAMnDC,IAAAA,MAAM,EAAE;AAN2C,GAAvD;AAQH;;AAED,SAAQrC,oBAAR,EAA8B8B,kBAA9B","sourcesContent":["import firebase from \"./Firebase.js\";\n\nlet firestore = firebase.firestore();\n\nfunction firebaseDeleteFlight(id, props) {\n    //Delete from events \n    firestore.collection(\"events\").doc(id)\n        .delete()\n        .then(\n            console.log(\"Document successfully deleted from events\"))\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n    });\n\n    var pilots = [props.captain, props.fo];\n    if (props.crew) {pilots.push(props.crew)};\n    if (props.fe) {pilots.push(props.fe)};\n    \n    pilots.forEach(pilot => {\n        var path = \"events.\" + pilot;\n\n        //Delete from dates\n        console.log(\"Deleting from date: \", props.date);\n        firestore.collection(\"dates\").doc(props.date).update({\n            [path]: firebase.firestore.FieldValue.arrayRemove({'type':'flight', 'startTime':props.timeStart, 'endTime': props.timeEnd, 'id': id})\n        })\n            .then(\n                console.log(\"Document successfully deleted from events\"))\n            .catch(function(error) {\n                console.log(\"Error getting documents: \", error);\n        });\n\n        //Delete from pilots\n        firestore.collection(\"pilots\").doc(pilot).collection('upcoming-events').where('flightid', '==', id)\n            .get()\n            .then(function(querySnapshot) {\n                querySnapshot.forEach(function(doc) {\n                  doc.ref.delete();\n                });\n            });\n    })\n    \n}\n\nfunction firebaseCreateDate(date) {\n    firebase.firestore().collection(\"dates\").doc(date).set({\n        twilight: 'N/A',\n        sgt: 'N/A',\n        mvp: 'N/A',\n        fdo: 'N/A',\n        groundrun: 'N/A',\n        events: {},\n    });\n}\n\nexport {firebaseDeleteFlight, firebaseCreateDate};"]},"metadata":{},"sourceType":"module"}