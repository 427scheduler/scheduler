{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/MeetingForm.js\";\nimport React from \"react\";\nimport \"./Form.css\";\nimport firebase from \"./Firebase.js\";\nimport Helper from \"./Helper.js\";\nimport { RenderSuccessDialog } from \"./Overlay.js\";\n\nDate.prototype.toDateInputValue = function () {\n  var local = new Date(this);\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n  return local.toJSON().slice(0, 10);\n};\n\nfunction getOptionsList(values) {\n  //Creates a datalist object for dropdown options\n  var l = [];\n  values.forEach(v => {\n    l.push(React.createElement(\"option\", {\n      value: v,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }));\n  });\n  return React.createElement(\"datalist\", {\n    id: \"pilots\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }, l);\n}\n\nclass MeetingForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      type: \"meeting\",\n      date: new Date().toDateInputValue(),\n      startTime: 0,\n      endTime: 0,\n      location: \"\",\n      confLink: \"\",\n      notes: \"\",\n      userid: \"\",\n      p1: \"\",\n      p2: \"\",\n      p3: \"\",\n      p4: \"\",\n      pilotsList: [],\n      ok: true\n    };\n  }\n\n  checkError(field, value) {\n    switch (field) {\n      case 'p1':\n        if (!this.state.pilotsList.includes(value) && value != \"\") {\n          Helper.flag('p1', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p2':\n        if (!this.state.pilotsList.includes(value) && value != \"\") {\n          Helper.flag('p2', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p3':\n        if (!this.state.pilotsList.includes(value) && value != \"\") {\n          Helper.flag('p3', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p4':\n        if (!this.state.pilotsList.includes(value) && value != \"\") {\n          Helper.flag('p4', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'startTime':\n        if (isNaN(value) || !Helper.timeValid(value)) {\n          Helper.flag('startTime', 'Enter between 0000 and 2359');\n          this.setState({\n            ok: false\n          });\n        } else if (parseInt(value) >= parseInt(this.state.endTime)) {\n          Helper.flag('endTime', 'Return must be after dep.');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'endTime':\n        if (isNaN(value) || !Helper.timeValid(value)) {\n          Helper.flag('endTime', 'Enter between 0000 and 2359');\n        } else if (parseInt(this.state.startTime) >= parseInt(value)) {\n          Helper.flag('endTime', 'Return must be after dep.');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      default:\n        this.setState({\n          ok: true\n        });\n        break;\n    }\n  }\n\n  onSubmit() {\n    var required = ['title', 'startTime', 'endTime'];\n    var remove = document.getElementsByClassName('alert-validate');\n\n    for (let item of remove) {\n      item.classList.remove('alert-validate');\n    }\n\n    required.forEach(field => {\n      if (this.state[field] == \"\") {\n        Helper.flag(field, \"Required\");\n        this.setState({\n          ok: false\n        });\n      }\n    });\n    var fieldsToCheck = ['startTime', 'endTime', 'p1', 'p2', 'p3', 'p4'];\n    fieldsToCheck.forEach(field => {\n      if (this.state.ok) {\n        this.checkError(field, this.state[field]);\n      }\n    });\n\n    if (this.state.ok) {\n      //TODO TODO TODO : now we have 4 users potentially!!! How to deal with this? \n      //TODO: UPDATE OVERLAY TO DISPLAY THIS \n      var newEvent = firebase.firestore().collection(\"events\").doc();\n      newEvent.set(this.state).then(function () {\n        console.log(\"Event successfully added to events!\");\n      }).catch(function (error) {\n        console.error(\"Error adding event: \", error);\n      });\n      var users = [this.state.userid, this.state.p1, this.state.p2, this.state.p3, this.state.p4];\n      users.forEach(user => {\n        var field = 'events.' + user;\n        firebase.firestore().collection(\"dates\").doc(this.state.date).update({\n          [field]: firebase.firestore.FieldValue.arrayUnion({\n            'type': 'meeting',\n            'startTime': this.state.startTime,\n            'endTime': this.state.endTime,\n            'id': newEvent.id\n          })\n        }).then(function () {\n          console.log(\"Event successfully added to dates!\");\n        }).catch(function (error) {\n          console.error(\"Error writing document: \", error);\n        });\n      });\n      document.getElementsByClassName(\"success-modal\")[0].style.display = \"block\";\n    }\n  }\n\n  onBlur(name, e, type) {\n    if (type == 'date') {\n      var d = new Date(e.target.value);\n      d.setMinutes(d.getMinutes() + d.getTimezoneOffset());\n      this.setState({\n        date: d.toDateInputValue()\n      });\n    } else if (type == 'number') {\n      this.setState({\n        [name]: e.target.value\n      });\n    } else {\n      this.setState({\n        [name]: e.target.value.trim()\n      });\n    }\n\n    e.target.parentElement.classList.remove(\"alert-validate\");\n  }\n\n  componentDidMount() {\n    this.setState({\n      userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(RenderSuccessDialog, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      className: \"form validate-form\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrap-input validate-input\",\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.title !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"title\",\n      required: true,\n      onBlur: e => {\n        this.onBlur('title', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"MEETING TITLE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input has-val\",\n      required: true,\n      type: \"date\",\n      name: \"date\",\n      defaultValue: new Date().toDateInputValue(),\n      onBlur: e => {\n        this.onBlur('date', e, 'date');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"DATE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"startTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.startTime !== 0 ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"startTime\",\n      required: true,\n      onBlur: e => {\n        this.onBlur('startTime', e, 'number');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"START TIME\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"endTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.endTime !== 0 ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"endTime\",\n      required: true,\n      onBlur: e => {\n        this.onBlur('endTime', e, 'number');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"END TIME\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, getOptionsList(this.state.pilotsList), React.createElement(\"input\", {\n      className: \"input\" + (this.state.p1 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p1\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.setState({\n          p1: e.target.value.trim()\n        });\n        this.checkError(e.target.name, e.target.value.trim());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p2 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p2\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.setState({\n          p2: e.target.value.trim()\n        });\n        this.checkError(e.target.name, e.target.value.trim());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p3 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p3\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.setState({\n          p3: e.target.value.trim()\n        });\n        this.checkError(e.target.name, e.target.value.trim());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p4 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p4\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.setState({\n          p4: e.target.value.trim()\n        });\n        this.checkError(e.target.name, e.target.value.trim());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.location !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"esp\",\n      onBlur: e => {\n        this.onBlur('location', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"LOCATION\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.confLink !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('confLink', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"CONFERENCE LINK\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"large-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.notes !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('notes', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"NOTES\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"container-form-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrap-form-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-bgbtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"form-btn\",\n      onClick: e => {\n        e.preventDefault();\n        this.onSubmit();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Add Meeting\")))));\n  }\n\n}\n\nexport default MeetingForm;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/MeetingForm.js"],"names":["React","firebase","Helper","RenderSuccessDialog","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","getOptionsList","values","l","forEach","v","push","MeetingForm","Component","constructor","props","state","title","type","date","startTime","endTime","location","confLink","notes","userid","p1","p2","p3","p4","pilotsList","ok","checkError","field","value","includes","flag","setState","isNaN","timeValid","parseInt","onSubmit","required","remove","document","getElementsByClassName","item","classList","fieldsToCheck","newEvent","firestore","collection","doc","set","then","console","log","catch","error","users","user","update","FieldValue","arrayUnion","id","style","display","onBlur","name","e","d","target","trim","parentElement","componentDidMount","activeUser","split","toLowerCase","render","preventDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Form.css\";\nimport firebase from \"./Firebase.js\";\nimport Helper from \"./Helper.js\";\nimport {RenderSuccessDialog} from \"./Overlay.js\";\n\nDate.prototype.toDateInputValue = (function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0,10);\n});\n\nfunction getOptionsList(values) {\n    //Creates a datalist object for dropdown options\n    var l = [];\n    values.forEach((v) => {\n        l.push(<option value={v}/>);\n    });\n    return (<datalist id='pilots'>{l}</datalist>);\n}\n\n\nclass MeetingForm extends React.Component {\n    constructor(props) { \n        super(props);\n        this.state = {\n            title: \"\", \n            type: \"meeting\", \n            date: new Date().toDateInputValue(),\n            startTime: 0,\n            endTime: 0,\n            location: \"\", \n            confLink: \"\",\n            notes: \"\",\n            userid: \"\",\n            p1:\"\",p2:\"\",p3:\"\",p4:\"\",\n            pilotsList: [],\n            ok: true,\n        }\n    }\n\n    checkError(field, value) {\n        switch (field){\n        case 'p1':\n            if (!this.state.pilotsList.includes(value) && value != \"\") {\n                Helper.flag('p1', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p2':\n            if (!this.state.pilotsList.includes(value) && value != \"\") {\n                Helper.flag('p2', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p3':\n            if (!this.state.pilotsList.includes(value) && value != \"\") {\n                Helper.flag('p3', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p4':\n            if (!this.state.pilotsList.includes(value) && value != \"\") {\n                Helper.flag('p4', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'startTime':\n            if (isNaN(value) || !Helper.timeValid(value)) {\n                Helper.flag('startTime', 'Enter between 0000 and 2359');\n                this.setState({ok: false});\n            }\n            else if (parseInt(value) >= parseInt(this.state.endTime)) {\n                Helper.flag('endTime', 'Return must be after dep.');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'endTime':\n            if (isNaN(value) || !Helper.timeValid(value)) {\n                Helper.flag('endTime', 'Enter between 0000 and 2359');\n            }\n            else if (parseInt(this.state.startTime) >= parseInt(value)) {\n                Helper.flag('endTime', 'Return must be after dep.');\n                this.setState({ok: false});\n                }\n                else {this.setState({ok: true});}\n                break;\n\n        default: \n            this.setState({ok: true});\n            break;\n        }\n    }\n\n    onSubmit() {\n        var required = ['title', 'startTime', 'endTime'];\n        var remove = document.getElementsByClassName('alert-validate');\n        for (let item of remove) {\n            item.classList.remove('alert-validate');\n        }\n        required.forEach(field => {\n            if (this.state[field] == \"\") {\n                Helper.flag(field, \"Required\");\n                this.setState({ok: false});\n            }\n        })\n        var fieldsToCheck =['startTime', 'endTime','p1','p2','p3','p4'];\n        fieldsToCheck.forEach((field) => {\n            if (this.state.ok) {\n                this.checkError(field, this.state[field])\n            }\n        });\n\n\n        if (this.state.ok) {\n            //TODO TODO TODO : now we have 4 users potentially!!! How to deal with this? \n            //TODO: UPDATE OVERLAY TO DISPLAY THIS \n            var newEvent = firebase.firestore().collection(\"events\").doc()\n            newEvent.set(this.state)\n            .then(function() {\n                console.log(\"Event successfully added to events!\");})\n            .catch(function(error) {\n                console.error(\"Error adding event: \", error);\n            });\n\n            var users = [this.state.userid, this.state.p1, this.state.p2, this.state.p3, this.state.p4];\n            users.forEach((user) => {\n                var field = 'events.'+user;\n                firebase.firestore().collection(\"dates\").doc(this.state.date).update({\n                    [field]: firebase.firestore.FieldValue.arrayUnion({'type':'meeting', 'startTime': this.state.startTime, 'endTime': this.state.endTime, 'id':newEvent.id})\n                    })\n                .then(function() {\n                    console.log(\"Event successfully added to dates!\");})\n                .catch(function(error) {\n                    console.error(\"Error writing document: \", error);\n                })\n            })\n            \n            document.getElementsByClassName(\"success-modal\")[0].style.display = \"block\";\n        }\n    }\n\n    onBlur(name, e, type) {\n        if (type == 'date') {\n            var d = new Date(e.target.value);\n            d.setMinutes( d.getMinutes() + d.getTimezoneOffset() );\n            this.setState({date: d.toDateInputValue()});\n        }\n        else if (type == 'number')  {\n            this.setState({[name]: e.target.value});\n        }\n        else {\n            this.setState({[name]: e.target.value.trim()});\n        }\n        e.target.parentElement.classList.remove(\"alert-validate\");\n    }\n\n    componentDidMount() {\n        this.setState({userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()});\n    }\n\n\n    render() {\n        \n        return (\n            <div>\n                <RenderSuccessDialog/>\n                <form className=\"form validate-form\" autoComplete=\"off\" >\n                    <div className=\"wrap-input validate-input\" id=\"title\">\n                        <input className={\"input\"+ (this.state.title !== \"\"? \" has-val\": \"\")} type=\"text\" name=\"title\" required={true} onBlur={(e)=>{this.onBlur('title',e)}}/>\n                        <span className=\"focus-input\" data-placeholder=\"MEETING TITLE\"></span>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                    <div className=\"medium-wrapper\">\n                            <input className={\"input has-val\"}  required={true}type=\"date\" name=\"date\" defaultValue={new Date().toDateInputValue()} onBlur={(e)=>{this.onBlur('date',e, 'date')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"DATE\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"startTime\">\n                            <input className={\"input\"+ (this.state.startTime !== 0 ? \" has-val\": \"\")} type=\"text\" name=\"startTime\" \n                                required={true}\n                                onBlur={(e)=>{this.onBlur('startTime',e, 'number')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"START TIME\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"endTime\">\n                            <input className={\"input\"+ (this.state.endTime !== 0 ? \" has-val\": \"\")} type=\"text\" name=\"endTime\" \n                                required={true}\n                                onBlur={(e)=>{this.onBlur('endTime',e, 'number')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"END TIME\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"medium-wrapper validate-input\" id=\"p1\">\n                        {getOptionsList(this.state.pilotsList)}\n                            <input className={\"input\"+ (this.state.p1 !== \"\" ? \" has-val\": \"\")}name=\"p1\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.setState({p1: e.target.value.trim()}); this.checkError(e.target.name, e.target.value.trim());}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 1\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p2\" >\n                            <input className={\"input\"+ (this.state.p2 !== \"\" ? \" has-val\": \"\")} name=\"p2\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.setState({p2: e.target.value.trim()}); this.checkError(e.target.name, e.target.value.trim());}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 2\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p3\" >\n                            <input className={\"input\"+ (this.state.p3 !== \"\" ? \" has-val\": \"\")} name=\"p3\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.setState({p3: e.target.value.trim()}); this.checkError(e.target.name, e.target.value.trim());}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 3\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p4\" >\n                            <input className={\"input\"+ (this.state.p4 !== \"\" ? \" has-val\": \"\")} name=\"p4\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.setState({p4: e.target.value.trim()}); this.checkError(e.target.name, e.target.value.trim());}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 4\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"medium-wrapper\">\n                            <input className={\"input\"+ (this.state.location !== \"\" ? \" has-val\": \"\")} type=\"text\" name=\"esp\" onBlur={(e)=>{this.onBlur('location',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"LOCATION\"></span>\n                        </div>\n                        <div className=\"medium-wrapper\">\n                            <input className={\"input\"+ (this.state.confLink !== \"\" ? \" has-val\": \"\")} type=\"text\" onBlur={(e)=>{this.onBlur('confLink',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"CONFERENCE LINK\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"large-wrapper\">\n                            <input className={\"input\"+ (this.state.notes !== \"\" ? \" has-val\": \"\")} type=\"text\" onBlur={(e)=>{this.onBlur('notes',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"NOTES\"></span>\n                        </div>\n                    </div>\n                    \n                    <div className=\"container-form-btn\">\n                        <div className=\"wrap-form-btn\">\n                            <div className=\"form-bgbtn\"></div>\n                            <button className=\"form-btn\" onClick={(e)=>{e.preventDefault();this.onSubmit()}}>\n                                Add Meeting\n                            </button>\n                        </div>\n                    </div>\n                </form>\n\n            </div>\n\n        );\n    }\n}\n\nexport default MeetingForm;"]},"metadata":{},"sourceType":"module"}