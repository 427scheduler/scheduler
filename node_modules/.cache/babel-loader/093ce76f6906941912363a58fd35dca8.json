{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Personnel.js\";\nimport Login from \"./Login\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\nimport { parseName, parseID } from './Helper.js';\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Personnel');\n}\n\nfunction PersonnelInfo(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, React.createElement(RenderInfo, {\n    user: props.user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }), React.createElement(RenderLogoutBtn, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }));\n}\n\nfunction RenderInfo(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"myInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, \"UserID\"), React.createElement(\"input\", {\n    id: \"userid\",\n    defaultValue: props.user,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    id: \"name\",\n    defaultValue: props.name,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"teamInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"teamInfo\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  })));\n}\n\nfunction teamInfo() {\n  var team = [];\n  this.state.team.forEach(member => {\n    team.push(React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, parseID(member)));\n  });\n  return team;\n}\n\nfunction getTeamMembers(user) {\n  firebase.firestore().collection(\"pilots\").doc(user).get().then(querySnapshot => {\n    if (!querySnapshot.empty) {\n      var newteam = querySnapshot.data().team;\n      firebase.firestore().collection(\"pilots\").doc(newteam.toString()).get().then(querySnapshot => {\n        if (!querySnapshot.empty) {\n          this.setState({\n            team: querySnapshot.data().pilots\n          });\n        } else {\n          console.log(\"Document doesn't exist\");\n          this.setState({\n            team: null\n          });\n        }\n\n        ;\n      });\n    } else {\n      console.log(\"Document doesn't exist\");\n      this.setState({\n        team: null\n      });\n    }\n\n    ;\n  }).catch(function (error) {\n    console.log(\"This user doesn't exist: \", error);\n  });\n}\n\nfunction RenderLogoutBtn() {\n  return React.createElement(\"div\", {\n    className: \"logout-btn-div \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"logout-btn\",\n    type: \"button\",\n    onClick: logOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Log Out\"));\n}\n\nfunction logOut() {\n  if (!window.confirm(\"Are you sure you want to log out?\")) {\n    return;\n  }\n\n  return React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  });\n}\n\nclass Personnel extends React.Component {\n  constructor(props) {\n    super(props);\n    /* user */\n\n    this.state = {\n      team: [],\n      userID: '',\n      hasError: false\n    };\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  componentDidMount() {\n    var name = parsName(thiss.props.user);\n    initializeReactGA();\n    this.setState({\n      userID: name\n    });\n    getTeamMembers(this.state.userID);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(PersonnelInfo, {\n      user: this.state.userID,\n      name: this.props.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Personnel;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Personnel.js"],"names":["Login","React","ReactGA","firebase","ErrorPage","parseName","parseID","initializeReactGA","initialize","pageview","PersonnelInfo","props","user","RenderInfo","name","teamInfo","team","state","forEach","member","push","getTeamMembers","firestore","collection","doc","get","then","querySnapshot","empty","newteam","data","toString","setState","pilots","console","log","catch","error","RenderLogoutBtn","logOut","window","confirm","Personnel","Component","constructor","userID","hasError","componentDidCatch","info","componentDidMount","parsName","thiss","render"],"mappings":"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","sourcesContent":["import Login from \"./Login\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\nimport {parseName, parseID} from './Helper.js';\n\nfunction initializeReactGA() {\n    ReactGA.initialize('UA-108277898-5');\n    ReactGA.pageview('/Personnel');\n}\n\nfunction PersonnelInfo(props) {\n    return (\n        <div>\n            <RenderInfo user={props.user}/>\n            <RenderLogoutBtn/>\n        </div>\n    )\n}\n\nfunction RenderInfo(props) {\n    return (\n        <div>\n            <div className=\"myInfo\">\n                <div className=\"info\">\n                    <h6>UserID</h6>\n                    <input id=\"userid\" defaultValue={props.user} type=\"text\"/>\n                </div>\n                <div className=\"info\">\n                    <h6>Name</h6>\n                    <input id=\"name\" defaultValue={props.name} type=\"text\"/>\n                </div>\n            </div>\n            <div className=\"teamInfo\">\n                <teamInfo/>\n            </div>\n        </div>\n    )\n}\n\nfunction teamInfo() {\n    var team = [];\n\n    this.state.team.forEach((member) => {\n        team.push(<p>{parseID(member)}</p>)\n    }) \n\n    return team\n\n}\n\nfunction getTeamMembers(user) {\n    firebase.firestore().collection(\"pilots\").doc(user)\n    .get()\n    .then((querySnapshot) => {\n        if (!querySnapshot.empty) {\n            var newteam = querySnapshot.data().team;\n            firebase.firestore().collection(\"pilots\").doc(newteam.toString())\n            .get()\n            .then((querySnapshot) => {\n                if (!querySnapshot.empty) {\n                    this.setState({team: querySnapshot.data().pilots});\n                }\n                else {\n                    console.log(\"Document doesn't exist\");\n                    this.setState({team: null});\n                };\n            });  \n        }\n        else {\n            console.log(\"Document doesn't exist\");\n            this.setState({team: null});\n        };\n    })\n    .catch(function(error) {\n        console.log(\"This user doesn't exist: \", error);\n    });\n}\n\nfunction RenderLogoutBtn() {\n    return (\n        <div className='logout-btn-div '>\n                <button className=\"logout-btn\" type=\"button\" onClick={logOut}>\n                    Log Out\n                </button>\n        </div>\n    );\n}\n\nfunction logOut() {\n    if (!window.confirm(\"Are you sure you want to log out?\")) {\n        return;\n      } \n    return <Login/>\n}\n\n\nclass Personnel extends React.Component{\n    constructor(props) {\n        super(props)\n        /* user */\n        this.state={\n            team: [],\n            userID: '',\n            hasError: false\n        };\n    }\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    componentDidMount() {\n        var name = parsName(thiss.props.user);\n        initializeReactGA();\n        this.setState({userID: name});\n        getTeamMembers(this.state.userID);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return <ErrorPage/>\n        }\n        return (\n            <PersonnelInfo user={this.state.userID} name={this.props.user}/>\n        )\n    }\n}\n\nexport default Personnel;"]},"metadata":{},"sourceType":"module"}