{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Dashboard.js\";\nimport React from 'react';\nimport './index.css';\nimport './Dashboard.css';\nimport firebase from \"./Firebase.js\";\nimport ReactGA from 'react-ga';\nimport Helper from './Helper.js';\nimport HELI_GRAY from './img/helicopter-gray.png';\nimport Calendar from './Calendar.js';\nimport ErrorPage from './ErrorPage.js';\n\nDate.prototype.toDateInputValue = function () {\n  var local = new Date(this);\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n  return local.toJSON().slice(0, 10);\n};\n\nDate.prototype.toDateInputValuePos = function () {\n  var local = new Date(this);\n  local.setMinutes(this.getMinutes() + this.getTimezoneOffset());\n  return local.toJSON().slice(0, 10);\n};\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Dashboard');\n}\n\nfunction AddFlightCard(props) {\n  return React.createElement(\"div\", {\n    className: \"addFlight\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"addFlightLogo\",\n    src: HELI_GRAY,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"addFlightText\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, \" No Upcoming Flights \"), React.createElement(\"button\", {\n    className: \"addFlightBtn\",\n    onClick: props.changeTab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"Add a Flight\")));\n}\n\nfunction FlightCard(props) {\n  var date = \"\";\n\n  if (props.data.date == props.today.toDateInputValue()) {\n    date = 'Today';\n  } else if (props.data.date == props.tomorrow.toDateInputValue()) {\n    date = \"Tomorrow\";\n  } else {\n    var tmp = new Date(props.data.date);\n    tmp.setDate(tmp.getDate() + 1);\n    date = tmp.toDateString().slice(0, 10).replace(' ', ', ');\n  }\n\n  var time = props.data.startTime + ' - ' + props.data.endTime;\n  return React.createElement(\"div\", {\n    className: \"flightCard\",\n    onClick: props.toggleOverlay.bind(this, props.data.flightid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, date), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, time)), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"flight-card-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"CAFPT\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, Helper.parseID(props.data.captain)))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"FO\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, Helper.parseID(props.data.fo)))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"A/C\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, props.data.ac))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"TYPE\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, props.data.details))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"CONFIG\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, props.data.config)))));\n}\n\nclass Dashboard extends React.Component {\n  //TODO: Should not be hardcoded userid\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      curDate: new Date(),\n      hasError: false,\n      userid: \"aearhart\"\n    };\n  }\n  /*  initWeek() {\n        var week = [];\n        var cur = new Date();\n        var startOfWeek = moment(cur).startOf('isoweek');\n        for (var i =0; i < 5; i++) {\n            week.push([startOfWeek.month(), startOfWeek.date()]);\n            startOfWeek.add(1, 'day');\n        }\n        return week; \n    }*/\n\n  /*\n      setCurWeek(day) {\n          var week = [];\n  \n          var startOfWeek = this.state.showWeekends ? day.startOf('week') : day.startOf('isoweek');\n          var dayCount = this.state.showWeekends ? 7 : 5;\n          for (var i =0; i < dayCount; i++) {\n              week.push([startOfWeek.month(), startOfWeek.date()]);\n              startOfWeek.add(1, 'day');\n          }\n          \n          this.setState({curWeek: week});\n          this.getData(week);\n      }\n  \n      getData(week) {\n          var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase();\n          this.setState({curWeekData: []});\n          week.forEach(day => {\n              var d = this.state.curDate.getFullYear() + '-' + (day[0] < 9 ? '0' : '') + (day[0]+1) + '-' + (day[1] < 10 ? '0' : '') + day[1] ;\n              firebase.firestore().collection('dates').doc(d).get()\n                  .then((querySnapshot) => {\n                      var tmp = this.state.curWeekData;\n                      tmp.push(querySnapshot.data().events[id]);\n                      this.setState({curWeekData: tmp});\n                  })\n                  .catch(function(error) {\n                      console.log(\"Error getting documents: \", error);\n              });\n          })\n      }\n  */\n\n\n  renderUpcomingEvents() {\n    //this.setCurWeek(new Date(this.state.curDate));\n    return React.createElement(Calendar, {\n      id: this.props.id,\n      toggleOverlay: (type, id) => {\n        this.props.toggleOverlay(type, id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    });\n  }\n\n  renderUpcomingFlights() {\n    //this.initWeek();\n    var cards = [];\n    var today = new Date(this.state.curDate);\n    var tomorrow = new Date(this.state.curDate);\n    tomorrow.setDate(today.getDate() + 1);\n\n    if (this.state.data.length > 0) {\n      for (var i = 0; i < this.state.data.length; i++) {\n        cards.push(React.createElement(FlightCard, {\n          key: this.state.data[i].data().flightid,\n          data: this.state.data[i].data(),\n          today: today,\n          tomorrow: tomorrow,\n          toggleOverlay: id => {\n            this.props.toggleOverlay('flight', id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }));\n      }\n    } else {\n      cards.push(React.createElement(AddFlightCard, {\n        key: 'emptyFlightCard',\n        changeTab: this.props.changeTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }));\n    }\n\n    return cards;\n  }\n\n  componentDidMount() {\n    //this.setState({userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()});\n    var id = (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase();\n    firebase.firestore().collection(\"pilots\").doc(id).collection('upcoming-events').where('date', '>=', this.state.curDate.toDateInputValue()).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        this.setState({\n          data: querySnapshot.docs\n        });\n      } else {\n        console.log(\"No entries in document\");\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    }); //this.getData(this.state.curWeek);\n\n    initializeReactGA();\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  toggleWeekendView() {\n    if (this.state.showWeekends) {\n      document.getElementsByClassName('show-weekends-toggle')[0].classList.remove('toggle-active');\n      this.setState({\n        showWeekends: false\n      });\n    } else {\n      document.getElementsByClassName('show-weekends-toggle')[0].classList.add('toggle-active');\n      this.setState({\n        showWeekends: true\n      });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"My Upcoming Flights\"), React.createElement(\"div\", {\n      className: \"upcomingFlights\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.renderUpcomingFlights()), this.renderUpcomingEvents());\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Dashboard.js"],"names":["React","firebase","ReactGA","Helper","HELI_GRAY","Calendar","ErrorPage","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","toDateInputValuePos","initializeReactGA","initialize","pageview","AddFlightCard","props","changeTab","FlightCard","date","data","today","tomorrow","tmp","setDate","getDate","toDateString","replace","time","startTime","endTime","toggleOverlay","bind","flightid","parseID","captain","fo","ac","details","config","Dashboard","Component","constructor","state","curDate","hasError","userid","renderUpcomingEvents","id","type","renderUpcomingFlights","cards","length","i","push","componentDidMount","activeUser","split","toLowerCase","firestore","collection","doc","where","get","then","querySnapshot","empty","setState","docs","console","log","catch","error","componentDidCatch","info","toggleWeekendView","showWeekends","document","getElementsByClassName","classList","remove","add","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAO,iBAAP;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;;AAEAC,IAAI,CAACC,SAAL,CAAeC,gBAAf,GAAmC,YAAW;AAC1C,MAAIC,KAAK,GAAG,IAAIH,IAAJ,CAAS,IAAT,CAAZ;AACAG,EAAAA,KAAK,CAACC,UAAN,CAAiB,KAAKC,UAAL,KAAoB,KAAKC,iBAAL,EAArC;AACA,SAAOH,KAAK,CAACI,MAAN,GAAeC,KAAf,CAAqB,CAArB,EAAuB,EAAvB,CAAP;AACH,CAJD;;AAKAR,IAAI,CAACC,SAAL,CAAeQ,mBAAf,GAAsC,YAAW;AAC7C,MAAIN,KAAK,GAAG,IAAIH,IAAJ,CAAS,IAAT,CAAZ;AACAG,EAAAA,KAAK,CAACC,UAAN,CAAiB,KAAKC,UAAL,KAAoB,KAAKC,iBAAL,EAArC;AACA,SAAOH,KAAK,CAACI,MAAN,GAAeC,KAAf,CAAqB,CAArB,EAAuB,EAAvB,CAAP;AACH,CAJD;;AAMA,SAASE,iBAAT,GAA6B;AACzBf,EAAAA,OAAO,CAACgB,UAAR,CAAmB,gBAAnB;AACAhB,EAAAA,OAAO,CAACiB,QAAR,CAAiB,YAAjB;AACH;;AAED,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC1B,SACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAA+B,IAAA,GAAG,EAAEjB,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAiC,IAAA,OAAO,EAAEiB,KAAK,CAACC,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,CAFJ,CADJ;AASH;;AAED,SAASC,UAAT,CAAoBF,KAApB,EAA2B;AACvB,MAAIG,IAAI,GAAG,EAAX;;AACA,MAAIH,KAAK,CAACI,IAAN,CAAWD,IAAX,IAAmBH,KAAK,CAACK,KAAN,CAAYjB,gBAAZ,EAAvB,EAAsD;AAAEe,IAAAA,IAAI,GAAG,OAAP;AAAgB,GAAxE,MACK,IAAIH,KAAK,CAACI,IAAN,CAAWD,IAAX,IAAmBH,KAAK,CAACM,QAAN,CAAelB,gBAAf,EAAvB,EAA0D;AAAEe,IAAAA,IAAI,GAAG,UAAP;AAAmB,GAA/E,MACA;AAAC,QAAII,GAAG,GAAG,IAAIrB,IAAJ,CAASc,KAAK,CAACI,IAAN,CAAWD,IAApB,CAAV;AACFI,IAAAA,GAAG,CAACC,OAAJ,CAAYD,GAAG,CAACE,OAAJ,KAAgB,CAA5B;AACAN,IAAAA,IAAI,GAAGI,GAAG,CAACG,YAAJ,GAAmBhB,KAAnB,CAAyB,CAAzB,EAA2B,EAA3B,EAA+BiB,OAA/B,CAAuC,GAAvC,EAA4C,IAA5C,CAAP;AAA0D;;AAE9D,MAAIC,IAAI,GAAGZ,KAAK,CAACI,IAAN,CAAWS,SAAX,GAAuB,KAAvB,GAA+Bb,KAAK,CAACI,IAAN,CAAWU,OAArD;AACA,SACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,OAAO,EAAEd,KAAK,CAACe,aAAN,CAAoBC,IAApB,CAAyB,IAAzB,EAA+BhB,KAAK,CAACI,IAAN,CAAWa,QAA1C,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKd,IAAL,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIS,IAAJ,CAFJ,CADJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,EAMI;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK9B,MAAM,CAACoC,OAAP,CAAelB,KAAK,CAACI,IAAN,CAAWe,OAA1B,CAAL,CADJ,CAJJ,CADJ,EASI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADJ,EAII;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKrC,MAAM,CAACoC,OAAP,CAAelB,KAAK,CAACI,IAAN,CAAWgB,EAA1B,CAAL,CADJ,CAJJ,CATJ,EAiBI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAvB,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKpB,KAAK,CAACI,IAAN,CAAWiB,EAAhB,CAAtB,CAFJ,CAjBJ,EAqBI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAvB,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKrB,KAAK,CAACI,IAAN,CAAWkB,OAAhB,CAAtB,CAFJ,CArBJ,EAyBI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAvB,CADJ,EAEI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKtB,KAAK,CAACI,IAAN,CAAWmB,MAAhB,CAAtB,CAFJ,CAzBJ,CANJ,CADJ;AAuCH;;AAED,MAAMC,SAAN,SAAwB7C,KAAK,CAAC8C,SAA9B,CAAwC;AAEpC;AACAC,EAAAA,WAAW,CAAC1B,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAK2B,KAAL,GAAa;AACTvB,MAAAA,IAAI,EAAE,EADG;AAETwB,MAAAA,OAAO,EAAE,IAAI1C,IAAJ,EAFA;AAGT2C,MAAAA,QAAQ,EAAE,KAHD;AAITC,MAAAA,MAAM,EAAE;AAJC,KAAb;AAMH;AAEH;;;;;;;;;;;AAWF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCIC,EAAAA,oBAAoB,GAAG;AACnB;AACA,WACI,oBAAC,QAAD;AAAY,MAAA,EAAE,EAAE,KAAK/B,KAAL,CAAWgC,EAA3B;AACY,MAAA,aAAa,EAAE,CAACC,IAAD,EAAMD,EAAN,KAAW;AAAC,aAAKhC,KAAL,CAAWe,aAAX,CAAyBkB,IAAzB,EAA8BD,EAA9B;AAAkC,OADzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAKH;;AAEDE,EAAAA,qBAAqB,GAAG;AACpB;AACA,QAAIC,KAAK,GAAG,EAAZ;AACA,QAAI9B,KAAK,GAAG,IAAInB,IAAJ,CAAS,KAAKyC,KAAL,CAAWC,OAApB,CAAZ;AACA,QAAItB,QAAQ,GAAG,IAAIpB,IAAJ,CAAS,KAAKyC,KAAL,CAAWC,OAApB,CAAf;AACAtB,IAAAA,QAAQ,CAACE,OAAT,CAAiBH,KAAK,CAACI,OAAN,KAAkB,CAAnC;;AACA,QAAI,KAAKkB,KAAL,CAAWvB,IAAX,CAAgBgC,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B,WAAK,IAAIC,CAAC,GAAE,CAAZ,EAAeA,CAAC,GAAG,KAAKV,KAAL,CAAWvB,IAAX,CAAgBgC,MAAnC,EAA2CC,CAAC,EAA5C,EAAgD;AAC5CF,QAAAA,KAAK,CAACG,IAAN,CAAW,oBAAC,UAAD;AAAY,UAAA,GAAG,EAAE,KAAKX,KAAL,CAAWvB,IAAX,CAAgBiC,CAAhB,EAAmBjC,IAAnB,GAA0Ba,QAA3C;AAAqD,UAAA,IAAI,EAAE,KAAKU,KAAL,CAAWvB,IAAX,CAAgBiC,CAAhB,EAAmBjC,IAAnB,EAA3D;AAAsF,UAAA,KAAK,EAAEC,KAA7F;AAAoG,UAAA,QAAQ,EAAEC,QAA9G;AAAwH,UAAA,aAAa,EAAG0B,EAAD,IAAM;AAAC,iBAAKhC,KAAL,CAAWe,aAAX,CAAyB,QAAzB,EAAmCiB,EAAnC;AAAwC,WAAtL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAX;AACH;AACJ,KAJD,MAKK;AACDG,MAAAA,KAAK,CAACG,IAAN,CAAW,oBAAC,aAAD;AAAe,QAAA,GAAG,EAAE,iBAApB;AAAuC,QAAA,SAAS,EAAE,KAAKtC,KAAL,CAAWC,SAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAX;AACH;;AAED,WAAOkC,KAAP;AACH;;AAEDI,EAAAA,iBAAiB,GAAG;AAEhB;AACA,QAAIP,EAAE,GAAG,CAAC,KAAKhC,KAAL,CAAWwC,UAAX,CAAsB,CAAtB,IAA2B,KAAKxC,KAAL,CAAWwC,UAAX,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CAA5B,EAAiEC,WAAjE,EAAT;AACA9D,IAAAA,QAAQ,CAAC+D,SAAT,GAAqBC,UAArB,CAAgC,QAAhC,EAA0CC,GAA1C,CAA8Cb,EAA9C,EAAkDY,UAAlD,CAA6D,iBAA7D,EAAgFE,KAAhF,CAAsF,MAAtF,EAA8F,IAA9F,EAAoG,KAAKnB,KAAL,CAAWC,OAAX,CAAmBxC,gBAAnB,EAApG,EACC2D,GADD,GAECC,IAFD,CAEOC,aAAD,IAAmB;AACrB,UAAI,CAACA,aAAa,CAACC,KAAnB,EAA0B;AACtB,aAAKC,QAAL,CAAc;AAAC/C,UAAAA,IAAI,EAAE6C,aAAa,CAACG;AAArB,SAAd;AACH,OAFD,MAGK;AACDC,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;;AAAA;AACJ,KATD,EAUCC,KAVD,CAUO,UAASC,KAAT,EAAgB;AACnBH,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC;AACH,KAZD,EAJgB,CAkBhB;;AAEA5D,IAAAA,iBAAiB;AACpB;;AAED6D,EAAAA,iBAAiB,CAACD,KAAD,EAAQE,IAAR,EAAc;AAC3B;AACA,SAAKP,QAAL,CAAc;AAAEtB,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AACAwB,IAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ,EAAmBE,IAAnB;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,QAAI,KAAKhC,KAAL,CAAWiC,YAAf,EAA6B;AACzBC,MAAAA,QAAQ,CAACC,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2DC,SAA3D,CAAqEC,MAArE,CAA4E,eAA5E;AACA,WAAKb,QAAL,CAAc;AAACS,QAAAA,YAAY,EAAE;AAAf,OAAd;AACH,KAHD,MAIK;AACDC,MAAAA,QAAQ,CAACC,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,EAA2DC,SAA3D,CAAqEE,GAArE,CAAyE,eAAzE;AACA,WAAKd,QAAL,CAAc;AAACS,QAAAA,YAAY,EAAE;AAAf,OAAd;AACH;AACJ;;AAEDM,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKvC,KAAL,CAAWE,QAAf,EAAyB;AACrB,aAAO,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;AACH,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKK,qBAAL,EADL,CAFJ,EAKK,KAAKH,oBAAL,EALL,CADJ;AAUH;;AA3ImC;;AA8IxC,eAAeP,SAAf","sourcesContent":["import React from 'react';\nimport './index.css';\nimport './Dashboard.css';\nimport firebase from \"./Firebase.js\";\nimport ReactGA from 'react-ga';\nimport Helper from './Helper.js';\nimport HELI_GRAY from './img/helicopter-gray.png';\nimport Calendar from './Calendar.js';\nimport ErrorPage from './ErrorPage.js';\n\nDate.prototype.toDateInputValue = (function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0,10);\n});\nDate.prototype.toDateInputValuePos = (function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() + this.getTimezoneOffset());\n    return local.toJSON().slice(0,10);\n});\n\nfunction initializeReactGA() {\n    ReactGA.initialize('UA-108277898-5');\n    ReactGA.pageview('/Dashboard');\n}\n\nfunction AddFlightCard(props) {\n    return (\n        <div className=\"addFlight\">\n            <img className=\"addFlightLogo\" src={HELI_GRAY}/>\n            <div className=\"addFlightText\"> \n                <h4> No Upcoming Flights </h4>\n                <button className=\"addFlightBtn\" onClick={props.changeTab}>Add a Flight</button>\n            </div>\n        </div>\n    );\n}\n\nfunction FlightCard(props) {\n    var date = \"\";\n    if (props.data.date == props.today.toDateInputValue()){ date = 'Today';} \n    else if (props.data.date == props.tomorrow.toDateInputValue()) { date = \"Tomorrow\";} \n    else {var tmp = new Date(props.data.date);\n        tmp.setDate(tmp.getDate() + 1);\n        date = tmp.toDateString().slice(0,10).replace(' ', ', ');}\n\n    var time = props.data.startTime + ' - ' + props.data.endTime;\n    return (\n        <div className=\"flightCard\" onClick={props.toggleOverlay.bind(this, props.data.flightid)}>\n            <div className=\"date\">\n                <h2>{date}</h2>\n                <p>{time}</p>\n            </div>\n            <hr/>\n            <div className=\"flight-card-content\">\n                <div className=\"infoLine\">\n                    <div className=\"title\">\n                        <h5>CAFPT</h5>\n                    </div>\n                    <div className=\"text\">\n                        <h5>{Helper.parseID(props.data.captain)}</h5>\n                    </div>\n                </div>\n                <div className=\"infoLine\">\n                    <div className=\"title\">\n                        <h5>FO</h5>\n                    </div>\n                    <div className=\"text\">\n                        <h5>{Helper.parseID(props.data.fo)}</h5>\n                    </div>\n                </div>\n                <div className=\"infoLine\">\n                    <div className=\"title\"><h5>A/C</h5></div>\n                    <div className=\"text\"><h5>{props.data.ac}</h5></div>\n                </div>\n                <div className=\"infoLine\">\n                    <div className=\"title\"><h5>TYPE</h5></div>\n                    <div className=\"text\"><h5>{props.data.details}</h5></div>\n                </div>\n                <div className=\"infoLine\">\n                    <div className=\"title\"><h5>CONFIG</h5></div>\n                    <div className=\"text\"><h5>{props.data.config}</h5></div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nclass Dashboard extends React.Component {\n\n    //TODO: Should not be hardcoded userid\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n            curDate: new Date(),\n            hasError: false,\n            userid: \"aearhart\",\n        }\n    }\n\n  /*  initWeek() {\n        var week = [];\n        var cur = new Date();\n        var startOfWeek = moment(cur).startOf('isoweek');\n        for (var i =0; i < 5; i++) {\n            week.push([startOfWeek.month(), startOfWeek.date()]);\n            startOfWeek.add(1, 'day');\n        }\n        return week; \n    }*/\n\n/*\n    setCurWeek(day) {\n        var week = [];\n\n        var startOfWeek = this.state.showWeekends ? day.startOf('week') : day.startOf('isoweek');\n        var dayCount = this.state.showWeekends ? 7 : 5;\n        for (var i =0; i < dayCount; i++) {\n            week.push([startOfWeek.month(), startOfWeek.date()]);\n            startOfWeek.add(1, 'day');\n        }\n        \n        this.setState({curWeek: week});\n        this.getData(week);\n    }\n\n    getData(week) {\n        var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase();\n        this.setState({curWeekData: []});\n        week.forEach(day => {\n            var d = this.state.curDate.getFullYear() + '-' + (day[0] < 9 ? '0' : '') + (day[0]+1) + '-' + (day[1] < 10 ? '0' : '') + day[1] ;\n            firebase.firestore().collection('dates').doc(d).get()\n                .then((querySnapshot) => {\n                    var tmp = this.state.curWeekData;\n                    tmp.push(querySnapshot.data().events[id]);\n                    this.setState({curWeekData: tmp});\n                })\n                .catch(function(error) {\n                    console.log(\"Error getting documents: \", error);\n            });\n        })\n    }\n*/\n\n\n    renderUpcomingEvents() {\n        //this.setCurWeek(new Date(this.state.curDate));\n        return (\n            <Calendar   id={this.props.id} \n                        toggleOverlay={(type,id)=>{this.props.toggleOverlay(type,id)}}\n            />\n        )\n    }\n\n    renderUpcomingFlights() {\n        //this.initWeek();\n        var cards = [];\n        var today = new Date(this.state.curDate);\n        var tomorrow = new Date(this.state.curDate);\n        tomorrow.setDate(today.getDate() + 1);\n        if (this.state.data.length > 0) {\n            for (var i= 0; i < this.state.data.length; i++) {\n                cards.push(<FlightCard key={this.state.data[i].data().flightid} data={this.state.data[i].data()} today={today} tomorrow={tomorrow} toggleOverlay={(id)=>{this.props.toggleOverlay('flight', id);}}/>)\n            }\n        }\n        else {\n            cards.push(<AddFlightCard key={'emptyFlightCard'} changeTab={this.props.changeTab}/>);\n        }\n        \n        return cards\n    }\n\n    componentDidMount() {\n\n        //this.setState({userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()});\n        var id = (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase();\n        firebase.firestore().collection(\"pilots\").doc(id).collection('upcoming-events').where('date', '>=', this.state.curDate.toDateInputValue())\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                this.setState({data: querySnapshot.docs})\n            }\n            else {\n                console.log(\"No entries in document\");\n            };\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n\n        //this.getData(this.state.curWeek);\n\n        initializeReactGA();\n    }\n\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    toggleWeekendView() {\n        if (this.state.showWeekends) {\n            document.getElementsByClassName('show-weekends-toggle')[0].classList.remove('toggle-active');\n            this.setState({showWeekends: false});\n        }\n        else {\n            document.getElementsByClassName('show-weekends-toggle')[0].classList.add('toggle-active');\n            this.setState({showWeekends: true});\n        }\n    }\n\n    render() { \n        if (this.state.hasError) {\n            return <ErrorPage/>\n          }\n        return (\n            <div>\n                <h2>My Upcoming Flights</h2>\n                <div className=\"upcomingFlights\">\n                    {this.renderUpcomingFlights()}\n                </div>\n                {this.renderUpcomingEvents()}\n            </div>\n            \n        )\n    };\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}