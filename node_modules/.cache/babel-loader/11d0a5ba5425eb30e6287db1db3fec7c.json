{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Flights.js\";\nimport React from 'react';\nimport \"./Flights.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport firebase from \"./Firebase.js\";\nimport { ENGINE_METHOD_NONE } from 'constants';\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\nvar yyyy = today.getFullYear();\ntoday = mm + '/' + dd + '/' + yyyy;\n/** var data = []\nfirebase.collection(\"flights\").get().then(querySnapshot => {\nquerySnapshot.docs.map(doc => {\n    console.log(doc)\n});})*/\n\nfunction date(curDate) {\n  //var today = new Date();\n  var weekday = curDate.getDay();\n  var day = curDate.getDate();\n  var month = curDate.getMonth();\n  var year = curDate.getFullYear();\n  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  return React.createElement(\"div\", {\n    className: \"flight-date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, days[weekday] + \", \" + months[month] + \" \" + day + \", \" + year));\n}\n\nfunction RenderFlightDayHeader(props) {\n  var displayDate = new Date(props.date);\n  var curDate = new Date();\n  var diff = Math.round((displayDate.getTime() - curDate.getTime()) / (24 * 60 * 60 * 1000)); // Only show flights for last 3 days to the next 2 weeks\n\n  var disableLeft = diff == -3;\n  var disableRight = diff == 14;\n  return React.createElement(\"div\", {\n    className: \"flight-day-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: 'date-btn' + (disableLeft ? ' disabled' : ''),\n    src: LEFT_BTN,\n    onClick: () => {\n      props.changeDate(disableLeft ? 0 : -1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), date(displayDate), React.createElement(\"img\", {\n    className: 'date-btn' + (disableRight ? ' disabled' : ''),\n    src: RIGHT_BTN,\n    onClick: () => {\n      props.changeDate(disableRight ? 0 : 1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }));\n}\n\nfunction parseName(name) {\n  return name[1].toUpperCase() + name.slice(2);\n}\n\nfunction RenderFlightDay(props) {\n  var headers = ['ETD', 'AC', 'CREW', 'MISSION', 'DETAILS', 'CONFIG', 'REMARKS', 'SQ PRI', 'DCO', 'ETR'];\n  var tableHeaders = [];\n  var ac = React.createElement(\"div\", {\n    className: \"ac-wrap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"462\");\n  var dot = React.createElement(\"div\", {\n    className: \"dot ok\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  });\n  headers.forEach(title => {\n    tableHeaders.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, title));\n  });\n  var data = props.data != null ? props.data : [['0900', ac, 'Amelia E | Charlies L', '427 AU H102 G00', 'SME', 'DC6S', \"\", '1 SOA', dot, '1030'], ['2520', ac, 'D.B. Cooper | Maverick', '427 AU H105 G00', 'ALP1', 'DC6S', \"\", '3 SOA', dot, '1230']];\n  var tableRows = [];\n\n  if (data != props.data) {\n    data.forEach(row => {\n      var r = [];\n\n      for (var i = 0; i < row.length; i++) {\n        r.push(React.createElement(\"td\", {\n          className: headers[i].toLowerCase(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, row[i]));\n      }\n\n      var hr = parseInt(row[0][0] + row[0][1]);\n      var min = parseInt(row[0][2] + row[0][3]);\n      tableRows.push(React.createElement(\"tr\", {\n        className: props.curTime.getHours() > hr || hr == props.curTime.getHours() && props.curTime.getMinutes() > min ? 'expired' : '',\n        onClick: props.toggleOverlay.bind(this, '521512'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, r));\n    });\n  } else {\n    data.forEach(entry => {\n      var d = entry.data();\n      var r = [React.createElement(\"td\", {\n        className: \"etd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, (d.timeStart < 100 ? '0' : '') + (d.timeStart < 1000 ? '0' : '') + d.timeStart), React.createElement(\"td\", {\n        className: \"ac\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ac-wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, d.ac)), React.createElement(\"td\", {\n        className: \"crew\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, parseName(d.captain) + ' | ' + parseName(d.fo)), React.createElement(\"td\", {\n        className: \"mission\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, d.mission), React.createElement(\"td\", {\n        className: \"details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, d.details), React.createElement(\"td\", {\n        className: \"config\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, d.config), React.createElement(\"td\", {\n        className: \"remarks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, d.remarks), React.createElement(\"td\", {\n        className: \"pri\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, d.pri + ' SOA'), React.createElement(\"td\", {\n        className: \"dco\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dot \" + d.dco,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        className: \"etr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, (d.timeEnd < 100 ? '0' : '') + (d.timeEnd < 1000 ? '0' : '') + d.timeEnd)];\n      var startTime = parseInt(d.timeStart);\n      tableRows.push(React.createElement(\"tr\", {\n        className: props.curTime.getDate() == props.date.getDate() && startTime < props.curTime.getHours() * 100 + props.curTime.getMinutes() ? 'expired' : '',\n        onClick: props.toggleOverlay.bind(this, entry.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, r));\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"flight-day\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, tableHeaders), tableRows));\n}\n\nfunction RenderFlightDayBox(props) {\n  return React.createElement(\"div\", {\n    className: \"flight-day-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(RenderFlightDayHeader, {\n    date: props.date,\n    changeDate: offset => {\n      props.changeDate(offset);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(RenderFlightDay, {\n    date: props.date,\n    data: props.data,\n    curTime: props.curTime,\n    toggleOverlay: id => {\n      props.toggleOverlay(id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }));\n}\n\nfunction RenderInfoBox(props) {\n  return React.createElement(\"div\", {\n    className: \"info-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"info-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, props.title)), React.createElement(\"div\", {\n    className: \"info-content\",\n    contentEditable: true,\n    suppressContentEditableWarning: true,\n    onBlur: event => {\n      props.updateDayStats(props.id, event.target.textContent);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, props.value[props.id] || \"N/A\")));\n}\n\nfunction RenderInfoBar(props) {\n  const default_info = {\n    \"EVENING TWILIGHT\": props.twilight,\n    \"SNAGS DESK SGT\": props.sgt,\n    \"DUTY MVP\": props.mvp,\n    \"FDO\": props.fdo,\n    \"DUTY GROUND RUN\": props.groundrun\n  };\n  var boxes = [];\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"EVENING TWILIGHT\",\n    value: props,\n    id: 'twilight',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"SNAGS DESK SGT\",\n    value: props,\n    id: 'sgt',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"DUTY MVP\",\n    value: props,\n    id: 'mvp',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"FDO\",\n    value: props,\n    id: 'fdo',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"DUTY GROUND RUN\",\n    value: props,\n    id: 'groundrun',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }));\n  return React.createElement(\"div\", {\n    className: \"info-bar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"time-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"CURRENT TIME\")), React.createElement(\"div\", {\n    className: \"time\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, (props.curTime.getHours() < 10 ? \"0\" : \"\") + props.curTime.getHours() + ':' + (props.curTime.getMinutes() < 10 ? \"0\" : \"\") + props.curTime.getMinutes())), boxes);\n}\n\nclass Flights extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      curTime: new Date(),\n      date: new Date(),\n      data: null,\n      twlight: \"N/A\",\n      sgt: \"N/A\",\n      mvp: \"N/A\",\n      fdo: \"N/A\",\n      groundrun: \"N/A\"\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.getData(new Date());\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    this.setState({\n      curTime: new Date()\n    });\n  }\n\n  updateDayStats(field, newValue) {\n    if (this.state[field] !== newValue) {\n      this.setState({\n        [field]: newValue\n      });\n      var date = (this.state.date.getMonth() < 9 ? '0' : '') + (this.state.date.getMonth() + 1) + '-' + (this.state.date.getDate() < 10 ? '0' : '') + this.state.date.getDate() + '-' + this.state.date.getFullYear();\n      firebase.firestore().collection(\"dates\").doc(date).set({\n        [field]: newValue\n      }, {\n        merge: true\n      }).then(function () {\n        console.log(\"Document successfully written!\");\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    }\n  }\n\n  getData(newDate) {\n    var date = (newDate.getMonth() < 9 ? '0' : '') + (newDate.getMonth() + 1) + '-' + (newDate.getDate() < 10 ? '0' : '') + newDate.getDate() + '-' + newDate.getFullYear(); //get new data\n\n    firebase.firestore().collection(\"events\").where('type', '==', 'flight').where('date', '==', date).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        this.setState({\n          data: querySnapshot\n        });\n      } else {\n        console.log(\"Document doesn't exist\");\n        this.setState({\n          data: null\n        });\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n    firebase.firestore().collection(\"dates\").doc(date).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        var d = querySnapshot;\n        this.setState({\n          twilight: d.twilight,\n          sgt: d.sgt,\n          mvp: d.mvp,\n          fdo: d.fdo,\n          groundrun: d.groundrun\n        });\n      }\n\n      console.log(this.state);\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }\n\n  changeDate(offset) {\n    if (offset != 0) {\n      var newDate = new Date(this.state.date);\n      newDate.setDate(newDate.getDate() + offset);\n      this.setState({\n        date: new Date(newDate)\n      });\n      this.getData(newDate);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(RenderFlightDayBox, {\n      date: this.state.date,\n      data: this.state.data,\n      curTime: this.state.curTime,\n      toggleOverlay: id => {\n        this.props.toggleOverlay(id);\n      },\n      changeDate: offset => {\n        this.changeDate(offset);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(RenderInfoBar, {\n      date: this.state.date,\n      curTime: this.state.curTime,\n      updateDayStats: (f, e) => {\n        this.updateDayStats(f, e);\n      },\n      twilight: this.state.twilight,\n      sgt: this.state.sgt,\n      mvp: this.state.mvp,\n      fdo: this.state.fdo,\n      groundrun: this.state.groundrun,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Flights;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Flights.js"],"names":["React","RIGHT_BTN","LEFT_BTN","firebase","ENGINE_METHOD_NONE","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","date","curDate","weekday","getDay","day","month","year","days","months","RenderFlightDayHeader","props","displayDate","diff","Math","round","getTime","disableLeft","disableRight","changeDate","parseName","name","toUpperCase","slice","RenderFlightDay","headers","tableHeaders","ac","dot","forEach","title","push","data","tableRows","row","r","i","length","toLowerCase","hr","parseInt","min","curTime","getHours","getMinutes","toggleOverlay","bind","entry","d","timeStart","captain","fo","mission","details","config","remarks","pri","dco","timeEnd","startTime","id","RenderFlightDayBox","offset","RenderInfoBox","event","updateDayStats","target","textContent","value","RenderInfoBar","default_info","twilight","sgt","mvp","fdo","groundrun","boxes","f","e","Flights","Component","constructor","state","twlight","componentDidMount","timerID","setInterval","tick","getData","componentWillUnmount","clearInterval","setState","field","newValue","firestore","collection","doc","set","merge","then","console","log","catch","error","newDate","where","get","querySnapshot","empty","setDate","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./Flights.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport firebase from \"./Firebase.js\";\nimport { ENGINE_METHOD_NONE } from 'constants';\n\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\nvar yyyy = today.getFullYear();\n\ntoday = mm + '/' + dd + '/' + yyyy;\n\n/** var data = []\nfirebase.collection(\"flights\").get().then(querySnapshot => {\nquerySnapshot.docs.map(doc => {\n    console.log(doc)\n});})*/\n\n\n\nfunction date(curDate) {\n    //var today = new Date();\n    var weekday = curDate.getDay();\n    var day = curDate.getDate();\n    var month = curDate.getMonth();\n    var year = curDate.getFullYear();\n    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\n    return (\n        <div className='flight-date'>\n            <h2>{days[weekday] +\", \"+months[month]+\" \"+day+\", \"+year}</h2>\n        </div>\n    )\n}\n\nfunction RenderFlightDayHeader(props) {\n    var displayDate = new Date(props.date);\n    var curDate = new Date();\n    var diff = Math.round((displayDate.getTime() - curDate.getTime())/(24*60*60*1000));\n\n    // Only show flights for last 3 days to the next 2 weeks\n    var disableLeft = diff == -3;\n    var disableRight= diff == 14;\n\n    return (\n        <div className=\"flight-day-header\">\n            <img className={'date-btn' + (disableLeft ? ' disabled': '')} src={LEFT_BTN} onClick={()=>{props.changeDate(disableLeft ? 0 : -1)}}></img>\n            {date(displayDate)}\n            <img className={'date-btn' + (disableRight ? ' disabled': '')} src={RIGHT_BTN} onClick={()=>{props.changeDate(disableRight ? 0 : 1)}}></img>\n        </div>\n    )\n}\n\nfunction parseName(name) {\n    return name[1].toUpperCase() + name.slice(2);\n}\n\n\nfunction RenderFlightDay(props) {\n\n    var headers = ['ETD', 'AC', 'CREW', 'MISSION', 'DETAILS', 'CONFIG', 'REMARKS', 'SQ PRI', 'DCO', 'ETR'];\n    var tableHeaders = [];\n    var ac = <div className='ac-wrap'>462</div>;\n    var dot = <div className=\"dot ok\"></div>;\n    headers.forEach(title => {\n        tableHeaders.push(<th>{title}</th>)\n    });\n    var data = props.data != null ? props.data : [['0900', ac, 'Amelia E | Charlies L', '427 AU H102 G00', 'SME', 'DC6S', \"\", '1 SOA', dot, '1030'], \n                ['2520', ac, 'D.B. Cooper | Maverick', '427 AU H105 G00', 'ALP1', 'DC6S', \"\", '3 SOA', dot, '1230']]\n    var tableRows = [];\n    \n    if (data != props.data) {\n        data.forEach(row => {\n            var r = [];\n            \n            for (var i = 0; i<row.length; i++) {\n                r.push(<td className={headers[i].toLowerCase()}>{row[i]}</td>);\n            }  \n            var hr = parseInt(row[0][0]+row[0][1]);\n            var min = parseInt(row[0][2]+row[0][3]);\n            \n            tableRows.push(<tr className={(props.curTime.getHours() > hr) || (hr == props.curTime.getHours() && props.curTime.getMinutes() > min) ? 'expired':''} onClick={props.toggleOverlay.bind(this,'521512')}>{r}</tr>);\n        });\n    }\n    else {data.forEach(entry => {\n        var d = entry.data();\n        var r = [<td className='etd'>{(d.timeStart < 100 ? '0' : '') +(d.timeStart < 1000 ? '0' : '') + d.timeStart}</td>,\n        <td className='ac'><div className='ac-wrap'>{d.ac}</div></td>,\n        <td className='crew'>{parseName(d.captain) + ' | ' + parseName(d.fo)}</td>,\n        <td className='mission'>{d.mission}</td>,\n        <td className='details'>{d.details}</td>,\n        <td className='config'>{d.config}</td>,\n        <td className='remarks'>{d.remarks}</td>,\n        <td className='pri'>{d.pri + ' SOA'}</td>,\n        <td className='dco'><div className={\"dot \"+d.dco}></div></td>,\n        <td className='etr'>{(d.timeEnd < 100 ? '0' : '') +(d.timeEnd < 1000 ? '0' : '') + d.timeEnd}</td>,\n        ];\n        \n        var startTime = parseInt(d.timeStart);\n        tableRows.push(<tr className={(props.curTime.getDate() == props.date.getDate() && startTime < props.curTime.getHours()*100+props.curTime.getMinutes()) ? 'expired':''} onClick={props.toggleOverlay.bind(this,entry.id)}>{r}</tr>);\n        })\n    }\n    return (\n        <div className=\"flight-day\">\n            <table>\n                <tr>\n                    {tableHeaders}\n                </tr>\n                {tableRows}\n            </table>\n        </div>\n    )\n}\n\nfunction RenderFlightDayBox(props) {\n    return (\n        <div className=\"flight-day-box\">\n            <RenderFlightDayHeader date={props.date} changeDate={(offset)=>{props.changeDate(offset)}}/>\n            <RenderFlightDay date={props.date} data={props.data} curTime={props.curTime} toggleOverlay={(id)=>{props.toggleOverlay(id)}}/>\n        </div>\n    )\n}\n\nfunction RenderInfoBox(props) {\n    return (\n        <div className=\"info-box\">\n            <div className=\"info-title\">\n                <h5>{props.title}</h5>\n            </div>\n            <div className=\"info-content\" contentEditable={true} suppressContentEditableWarning={true} onBlur={(event)=>{props.updateDayStats(props.id, event.target.textContent);}}>\n                <h5>{props.value[props.id] || \"N/A\"}</h5>\n            </div>\n        </div>\n    )\n}\n\nfunction RenderInfoBar(props) {\n    const default_info = {\"EVENING TWILIGHT\":props.twilight, \"SNAGS DESK SGT\": props.sgt, \"DUTY MVP\": props.mvp, \"FDO\": props.fdo, \"DUTY GROUND RUN\": props.groundrun};\n    var boxes = [];\n    boxes.push(<RenderInfoBox title={\"EVENING TWILIGHT\"} value={props} id={'twilight'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}}/>)\n    boxes.push(<RenderInfoBox title={\"SNAGS DESK SGT\"} value={props} id={'sgt'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}}/>)\n    boxes.push(<RenderInfoBox title={\"DUTY MVP\"} value={props} id={'mvp'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}}/>)\n    boxes.push(<RenderInfoBox title={\"FDO\"} value={props} id={'fdo'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}}/>)\n    boxes.push(<RenderInfoBox title={\"DUTY GROUND RUN\"} value={props} id={'groundrun'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}}/>)\n    \n    return (\n        <div className=\"info-bar\">\n            <div className=\"time-title\">\n                <h5>CURRENT TIME</h5>\n            </div>\n            <div className=\"time\">\n                <h2>{(props.curTime.getHours()<10?\"0\":\"\")+props.curTime.getHours()+':'+(props.curTime.getMinutes()<10?\"0\":\"\")+props.curTime.getMinutes()}</h2>\n            </div>\n            {boxes}\n        </div>\n    )\n}\n\nclass Flights extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curTime: new Date(),\n            date: new Date(),\n            data: null,\n            twlight: \"N/A\",\n            sgt: \"N/A\", \n            mvp: \"N/A\", \n            fdo: \"N/A\",\n            groundrun: \"N/A\",\n        }\n    }\n    componentDidMount() {\n        this.timerID = setInterval(() => this.tick(), 1000);\n        this.getData(new Date());\n    }\n\n    componentWillUnmount() {clearInterval(this.timerID);}\n\n    tick() {this.setState({curTime: new Date()});}\n\n    updateDayStats(field, newValue) {\n        if (this.state[field] !== newValue) {\n            this.setState({[field]: newValue});\n            var date = (this.state.date.getMonth() < 9 ? '0':'') + (this.state.date.getMonth()+1) + '-' + (this.state.date.getDate() < 10 ? '0':'') + (this.state.date.getDate()) + '-' + this.state.date.getFullYear();\n            \n            firebase.firestore().collection(\"dates\").doc(date).set({\n                [field]: newValue\n                }, {merge: true})\n                .then(function() {\n                console.log(\"Document successfully written!\");\n                })\n                .catch(function(error) {\n                console.error(\"Error writing document: \", error);\n            });\n        }\n    }    \n\n    getData(newDate) {\n        var date = (newDate.getMonth() < 9 ? '0':'') + (newDate.getMonth()+1) + '-' + (newDate.getDate() < 10 ? '0':'') + (newDate.getDate()) + '-' + newDate.getFullYear();\n        //get new data\n        firebase.firestore().collection(\"events\").where('type', '==', 'flight').where('date', '==', date)\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                this.setState({data: querySnapshot})\n            }\n            else {\n                console.log(\"Document doesn't exist\");\n                this.setState({data: null});\n            };\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n\n        firebase.firestore().collection(\"dates\").doc(date)\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                var d = querySnapshot;\n                this.setState({\n                twilight: d.twilight,\n                sgt: d.sgt, \n                mvp: d.mvp, \n                fdo: d.fdo,\n                groundrun: d.groundrun})\n            }\n            console.log(this.state)\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n    }\n\n    changeDate(offset) {\n        if (offset != 0) {\n            var newDate = new Date(this.state.date);\n            newDate.setDate(newDate.getDate() + offset);\n            this.setState({date: new Date(newDate)})\n            this.getData(newDate);\n        }\n    }\n\n    render() {\n        return (\n            <div className='container'>\n                <RenderFlightDayBox date={this.state.date} \n                                    data={this.state.data}\n                                    curTime={this.state.curTime} \n                                    toggleOverlay={(id)=>{this.props.toggleOverlay(id)}} \n                                    changeDate={(offset)=>{this.changeDate(offset)}}/>\n                <RenderInfoBar date={this.state.date} curTime={this.state.curTime} updateDayStats={(f,e)=>{this.updateDayStats(f,e)}}\n                                twilight={this.state.twilight}\n                                sgt={this.state.sgt} \n                                mvp={this.state.mvp}\n                                fdo={this.state.fdo}\n                                groundrun={this.state.groundrun}/>\n            </div>\n        )\n    }\n}\n\nexport default Flights;\n"]},"metadata":{},"sourceType":"module"}