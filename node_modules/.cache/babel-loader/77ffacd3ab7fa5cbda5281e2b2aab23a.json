{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/App.js\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport Dashboard from './Dashboard.js';\nimport Flights from './Flights.js';\nimport Schedule from \"./Schedule.js\";\nimport Add from \"./Add.js\";\nimport Login from \"./Login.js\";\nimport Overlay from './Overlay.js';\nimport './App.css';\nimport DASHBOARD_LOGO from './img/Dashboard.png';\nimport DASHBOARD_ACTIVE_LOGO from './img/Dashboard_active.png';\nimport FLIGHTS_LOGO from './img/Flights.png';\nimport FLIGHTS_ACTIVE_LOGO from './img/Flights_active.png';\nimport SCHEDULE_LOGO from './img/calendar.png';\nimport SCHEDULE_ACTIVE_LOGO from './img/calendar_blue.png';\nimport ADD_LOGO from './img/add.png';\nimport ADD_ACTIVE_LOGO from './img/add_blue.png';\nimport LOGOUT_LOGO from './img/logout.png';\nimport LOGOUT_ACTIVE_LOGO from './img/logout_active.png';\nimport firebase from './Firebase.js';\nimport ErrorPage from './ErrorPage.js';\nconst navigationTabs = [\"Dashboard\", \"Daily Flying Ordere\", \"Availability\", \"Add\", \"Login\"];\nconst logos = {\n  \"Dashboard\": DASHBOARD_LOGO,\n  \"Daily Flying Order\": FLIGHTS_LOGO,\n  \"Availability\": SCHEDULE_LOGO,\n  \"Add\": ADD_LOGO,\n  \"Login\": LOGOUT_LOGO\n};\nconst activelogos = {\n  \"Dashboard\": DASHBOARD_ACTIVE_LOGO,\n  \"Daily Flying Order\": FLIGHTS_ACTIVE_LOGO,\n  \"Availability\": SCHEDULE_ACTIVE_LOGO,\n  \"Add\": ADD_ACTIVE_LOGO,\n  \"Login\": LOGOUT_ACTIVE_LOGO\n};\n\nwindow.onerror = error => {\n  this.setState({\n    hasError: true\n  });\n  console.log(\"ERROR: \", error);\n};\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Home');\n}\n\nfunction Header(props) {\n  var title = props.activePage === 'Dashboard' ? 'Hi, ' + props.user.split(\" \")[0] : props.activePage;\n  return React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, title + (props.addTab === \"\" ? \"\" : \" \" + props.addTab));\n}\n\nfunction NavBarTab(props) {\n  return React.createElement(\"div\", {\n    className: \"navBarTab\",\n    onClick: props.onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"icon\",\n    src: props.icon,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }));\n}\n\nclass NavBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n\n  changeTab(tabName) {\n    if (tabName === \"Login\") {\n      if (!window.confirm(\"Are you sure you want to log out?\")) {\n        return;\n      }\n    }\n\n    this.props.changeTab(tabName);\n    this.props.updateHeader(tabName === \"Add\" ? \"Flight\" : \"\");\n  }\n\n  renderNavBarTab(tabName) {\n    const logo = this.props.activePage === tabName ? activelogos[tabName] : logos[tabName];\n    return React.createElement(NavBarTab, {\n      tabName: tabName,\n      icon: logo,\n      openNavBar: this.props.openNavBar,\n      onClick: () => {\n        this.changeTab(tabName);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    });\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      });\n    }\n\n    var tabs = [];\n    navigationTabs.forEach(tab => {\n      tabs.push(this.renderNavBarTab(tab));\n    });\n    return React.createElement(\"div\", {\n      className: \"navBar\",\n      style: this.props.activePage === 'Login' ? {\n        display: 'none'\n      } : {\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navBarTabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, tabs));\n  }\n\n}\n\nclass AppBody extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleConnectionChange = () => {\n      const condition = navigator.onLine ? 'online' : 'offline';\n\n      if (condition === 'online') {\n        const webPing = setInterval(() => {\n          fetch('//google.com', {\n            mode: 'no-cors'\n          }).then(() => {\n            this.setState({\n              isDisconnected: false\n            }, () => {\n              return clearInterval(webPing);\n            });\n          }).catch(() => this.setState({\n            isDisconnected: true\n          }));\n        }, 2000);\n        return;\n      }\n\n      return this.setState({\n        isDisconnected: true\n      });\n    };\n\n    this.state = {\n      activePage: \"Login\",\n      //activePage: 'Dashboard',\n      user: null,\n      addTab: \"\",\n      flights: [\"Thurs, May 2\", \"Fri, May 4\"],\n      showOverlay: false,\n      hasError: false,\n      isDisconnected: false\n    };\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n    firebase.auth().onAuthStateChanged(authUser => {\n      authUser && authUser.emailVerified ? this.setState({\n        user: authUser.displayName,\n        activePage: \"Dashboard\"\n      }) : this.setState({\n        user: null\n      });\n    });\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function () {// Existing and future Auth states are now persisted in the current\n      // session only. Closing the window would clear any existing state even\n      // if a user forgets to sign out.\n      // ...\n      // New sign-in will be persisted with session persistence.\n    }).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, \": \", errorMessage);\n    }); //Listen for if the user goes offline \n\n    this.handleConnectionChange();\n    window.addEventListener('online', this.handleConnectionChange);\n    window.addEventListener('offline', this.handleConnectionChange);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('online', this.handleConnectionChange);\n    window.removeEventListener('offline', this.handleConnectionChange);\n  }\n\n  renderNavBar() {\n    return React.createElement(NavBar, {\n      activePage: this.state.activePage,\n      navTabs: navigationTabs,\n      changeTab: tabName => {\n        this.changeTab(tabName);\n      },\n      updateHeader: title => {\n        this.updateHeader(title);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    });\n  }\n\n  renderHeader() {\n    return React.createElement(Header, {\n      activePage: this.state.activePage,\n      addTab: this.state.addTab,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    });\n  }\n\n  renderOfflineError() {\n    return React.createElement(\"div\", {\n      className: \"alert\",\n      style: {\n        display: this.state.isDisconnected ? 'block' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"closebtn\",\n      onClick: e => {\n        e.target.parentElement.style.display = 'none';\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"\\xD7\"), \"Internet offline. Please try again later.\");\n  }\n\n  updateHeader(title) {\n    this.setState({\n      addTab: title\n    });\n  }\n\n  renderOverlay() {\n    var content = \"\";\n\n    if (this.state.showOverlay) {\n      content = React.createElement(Overlay, {\n        event: this.state.overlayEvent,\n        id: this.state.overlayId,\n        onClose: () => {\n          this.toggleOverlay('', '');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      });\n    }\n\n    return content;\n  }\n\n  shouldComponentUpdate(nextState) {\n    return this.state.activePage !== nextState.activePage;\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  toggleOverlay(event, id) {\n    const currentState = this.state.showOverlay;\n    this.setState({\n      showOverlay: !currentState,\n      overlayEvent: event,\n      overlayId: id\n    });\n  }\n\n  changeTab(tabName) {\n    this.setState({\n      activePage: tabName\n    });\n  }\n\n  renderContent(tabName) {\n    switch (tabName) {\n      case 'Dashboard':\n        return React.createElement(Dashboard, {\n          flights: this.state.flights,\n          toggleOverlay: (type, id) => {\n            this.toggleOverlay(type, id);\n          },\n          id: this.state.user,\n          changeTab: () => {\n            this.changeTab(\"Add\");\n          },\n          activeUser: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        });\n\n      case 'Flights':\n        return React.createElement(Flights, {\n          toggleOverlay: id => {\n            this.toggleOverlay('flight', id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          },\n          __self: this\n        });\n\n      case \"Schedule\":\n        return React.createElement(Schedule, {\n          toggleOverlay: (event, id) => {\n            this.toggleOverlay(event, id);\n          },\n          user: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        });\n\n      case \"Add\":\n        return React.createElement(Add, {\n          updateHeader: title => {\n            this.updateHeader(title);\n          },\n          activeUser: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        });\n\n      case \"Login\":\n        return React.createElement(Login, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        });\n\n      default:\n        return React.createElement(Dashboard, {\n          flights: this.state.flights,\n          toggleOverlay: id => {\n            this.toggleOverlay('flight', id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, this.renderOfflineError(), this.renderOverlay(), React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, this.renderHeader(), React.createElement(\"button\", {\n      id: \"install\",\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Install App\")), this.renderNavBar(), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, this.renderContent(this.state.activePage))));\n  }\n\n}\n\nfunction App() {\n  return React.createElement(AppBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/App.js"],"names":["React","ReactGA","Dashboard","Flights","Schedule","Add","Login","Overlay","DASHBOARD_LOGO","DASHBOARD_ACTIVE_LOGO","FLIGHTS_LOGO","FLIGHTS_ACTIVE_LOGO","SCHEDULE_LOGO","SCHEDULE_ACTIVE_LOGO","ADD_LOGO","ADD_ACTIVE_LOGO","LOGOUT_LOGO","LOGOUT_ACTIVE_LOGO","firebase","ErrorPage","navigationTabs","logos","activelogos","window","onerror","error","setState","hasError","console","log","initializeReactGA","initialize","pageview","Header","props","title","activePage","user","split","addTab","NavBarTab","onClick","icon","NavBar","Component","constructor","state","changeTab","tabName","confirm","updateHeader","renderNavBarTab","logo","openNavBar","componentDidCatch","info","render","tabs","forEach","tab","push","display","AppBody","handleConnectionChange","condition","navigator","onLine","webPing","setInterval","fetch","mode","then","isDisconnected","clearInterval","catch","flights","showOverlay","componentDidMount","auth","onAuthStateChanged","authUser","emailVerified","displayName","setPersistence","Auth","Persistence","SESSION","errorCode","code","errorMessage","message","addEventListener","componentWillUnmount","removeEventListener","renderNavBar","renderHeader","renderOfflineError","e","target","parentElement","style","renderOverlay","content","overlayEvent","overlayId","toggleOverlay","shouldComponentUpdate","nextState","event","id","currentState","renderContent","type","App"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactGA from 'react-ga';\nimport Dashboard from './Dashboard.js';\nimport Flights from './Flights.js';\nimport Schedule from \"./Schedule.js\";\nimport Add from \"./Add.js\";\nimport Login from \"./Login.js\";\nimport Overlay from './Overlay.js';\nimport './App.css';\nimport DASHBOARD_LOGO from './img/Dashboard.png'\nimport DASHBOARD_ACTIVE_LOGO from './img/Dashboard_active.png'\nimport FLIGHTS_LOGO from './img/Flights.png';\nimport FLIGHTS_ACTIVE_LOGO from './img/Flights_active.png';\nimport SCHEDULE_LOGO from './img/calendar.png';\nimport SCHEDULE_ACTIVE_LOGO from './img/calendar_blue.png';\nimport ADD_LOGO from './img/add.png';\nimport ADD_ACTIVE_LOGO from './img/add_blue.png';\nimport LOGOUT_LOGO from './img/logout.png';\nimport LOGOUT_ACTIVE_LOGO from './img/logout_active.png';\nimport firebase from './Firebase.js';\nimport ErrorPage from './ErrorPage.js';\n\nconst navigationTabs = [\"Dashboard\", \"Daily Flying Ordere\", \"Availability\", \"Add\", \"Login\"];\nconst logos = {\"Dashboard\": DASHBOARD_LOGO, \"Daily Flying Order\": FLIGHTS_LOGO, \"Availability\": SCHEDULE_LOGO, \"Add\": ADD_LOGO, \"Login\": LOGOUT_LOGO}\nconst activelogos = {\"Dashboard\": DASHBOARD_ACTIVE_LOGO, \"Daily Flying Order\": FLIGHTS_ACTIVE_LOGO, \"Availability\": SCHEDULE_ACTIVE_LOGO, \"Add\": ADD_ACTIVE_LOGO, \"Login\": LOGOUT_ACTIVE_LOGO}\n\nwindow.onerror = ((error)=>{this.setState({ hasError: true }); console.log(\"ERROR: \", error)});\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Home');\n}\n\nfunction Header(props) {\n  var title = props.activePage === 'Dashboard' ? 'Hi, '+props.user.split(\" \")[0] : props.activePage\n  return <h1>{title + (props.addTab === \"\" ? \"\" : \" \"+props.addTab)}</h1>\n}\n\nfunction NavBarTab(props) {\n    return (\n      <div className='navBarTab'\n        onClick={props.onClick}>\n        <img className='icon' src={props.icon} alt=\"\"/>\n      </div>\n    )\n}\n\nclass NavBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state={hasError: false,}\n  }\n\n  changeTab(tabName) {\n    if (tabName === \"Login\") {\n      if (!window.confirm(\"Are you sure you want to log out?\")) {\n        return;\n      } \n    }\n    this.props.changeTab(tabName); \n    this.props.updateHeader(tabName===\"Add\" ? \"Flight\" : \"\")\n  }\n\n  renderNavBarTab(tabName) {\n\n    const logo = this.props.activePage === tabName ? activelogos[tabName] : logos[tabName];\n    return <NavBarTab tabName={tabName} icon={logo} openNavBar={this.props.openNavBar} onClick={() => {this.changeTab(tabName)}}/>\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true });\n    console.log(error, info);\n  }\n\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage/>\n    }\n    var tabs = [];\n    navigationTabs.forEach(tab => {\n      tabs.push(this.renderNavBarTab(tab));\n    }) \n    return (\n      <div className=\"navBar\" style={this.props.activePage === 'Login' ?{display: 'none'}: {display: 'block'}}>\n        <div className='navBarTabs'>\n          {tabs}\n        </div>\n      </div>\n    );\n  }\n    \n}\n\nclass AppBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activePage: \"Login\",\n      //activePage: 'Dashboard',\n      user: null,\n      addTab: \"\",\n      flights: [\"Thurs, May 2\", \"Fri, May 4\"],\n      showOverlay: false,\n      hasError: false,\n      isDisconnected: false,\n    };\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n    firebase.auth().onAuthStateChanged(\n      authUser => {\n        authUser && authUser.emailVerified\n          ? this.setState({ user: authUser.displayName, activePage: \"Dashboard\"})\n          : this.setState({ user: null });\n      },\n    );\n    \n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)\n  .then(function() {\n    // Existing and future Auth states are now persisted in the current\n    // session only. Closing the window would clear any existing state even\n    // if a user forgets to sign out.\n    // ...\n    // New sign-in will be persisted with session persistence.\n  })\n  .catch(function(error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    console.log(errorCode, \": \", errorMessage);\n  });\n\n    //Listen for if the user goes offline \n    this.handleConnectionChange();\n    window.addEventListener('online', this.handleConnectionChange);\n    window.addEventListener('offline', this.handleConnectionChange);\n\n\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('online', this.handleConnectionChange);\n    window.removeEventListener('offline', this.handleConnectionChange);\n  }\n\n  handleConnectionChange = () => {\n    const condition = navigator.onLine ? 'online' : 'offline';\n    if (condition === 'online') {\n      const webPing = setInterval(\n        () => {\n          fetch('//google.com', {\n            mode: 'no-cors',\n            })\n          .then(() => {\n            this.setState({ isDisconnected: false }, () => {\n              return clearInterval(webPing)\n            });\n          }).catch(() => this.setState({ isDisconnected: true }) )\n        }, 2000);\n      return;\n    }\n\n    return this.setState({ isDisconnected: true });\n  }\n\n  renderNavBar() {\n    return <NavBar\n      activePage={this.state.activePage} \n      navTabs={navigationTabs} \n      changeTab={(tabName)=>{this.changeTab(tabName)}}\n      updateHeader={(title)=>{this.updateHeader(title)}}/>\n  }\n\n  renderHeader() {\n    return <Header activePage = {this.state.activePage} addTab={this.state.addTab} user={this.state.user}/>\n  }\n\n  renderOfflineError() {\n    return (\n      <div className=\"alert\" style={{display: this.state.isDisconnected ? 'block' : 'none'}}>\n        <span className=\"closebtn\" onClick={(e)=> {e.target.parentElement.style.display='none';}}>&times;</span> \n        Internet offline. Please try again later. \n      </div>\n    )\n  }\n\n  updateHeader(title) {\n    this.setState({addTab: title});\n  }\n\n  renderOverlay() {\n    var content = \"\";\n    if (this.state.showOverlay) {\n      content = <Overlay event={this.state.overlayEvent} id={this.state.overlayId} onClose={()=>{this.toggleOverlay('', '');}}/>\n    }\n    \n    return content;\n  }\n\n  shouldComponentUpdate(nextState) {\n    return this.state.activePage !== nextState.activePage;\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true });\n    console.log(error, info);\n  }\n\n  toggleOverlay(event, id) {\n    const currentState = this.state.showOverlay;\n    this.setState({showOverlay: !currentState, overlayEvent: event, overlayId: id});\n  }\n\n  changeTab(tabName) {\n    this.setState({activePage: tabName});\n  }\n\n  renderContent(tabName) {\n    switch(tabName) {\n      case 'Dashboard': \n        return <Dashboard flights={this.state.flights} toggleOverlay={(type,id)=>{this.toggleOverlay(type, id)}} id={this.state.user} changeTab={()=>{this.changeTab(\"Add\")}} activeUser={this.state.user}/>\n      case 'Flights': \n        return <Flights  toggleOverlay={(id)=>{this.toggleOverlay('flight', id)}}/>\n      case \"Schedule\": \n        return <Schedule toggleOverlay={(event, id)=>{this.toggleOverlay(event, id)}} user={this.state.user}/>\n      case \"Add\": \n        return <Add updateHeader={(title)=>{this.updateHeader(title)}} activeUser={this.state.user}/>\n      case \"Login\": \n        return <Login/>\n      default: \n        return <Dashboard flights={this.state.flights} toggleOverlay={(id)=>{this.toggleOverlay('flight', id)}}/>\n    }\n  }\n\n  \n  render() {\n\n    if (this.state.hasError) {\n      return <ErrorPage/>\n    }\n    return (\n      <div className=\"App\">\n        {this.renderOfflineError()}\n        {this.renderOverlay()}\n        <div className=\"wrapper\">\n          <div className=\"header\">\n            \n            {this.renderHeader()}\n            <button id=\"install\" hidden>Install App</button>\n          </div>\n            {this.renderNavBar()} \n          <div className=\"content\"> \n            {this.renderContent(this.state.activePage)} \n          </div>\n        </div>   \n      </div>\n    );\n  };\n}\n\nfunction App() {\n  \n  return (\n    <AppBody/>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}