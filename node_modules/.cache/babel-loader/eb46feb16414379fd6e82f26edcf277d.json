{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Personnel.js\";\nimport Login from \"./Login\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\nimport './Personnel.css';\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Personnel');\n}\n\nfunction PersonnelInfo(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"personnelInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, React.createElement(RenderInfo, {\n    user: props.user,\n    team: props.team,\n    name: props.name,\n    teamNum: props.teamNum,\n    lastFlight: props.lastFlight,\n    role: props.role,\n    email: props.email,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  })), React.createElement(RenderLogoutBtn, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }), React.createElement(Approvals, {\n    role: props.role,\n    approvals: props.approvals,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }));\n}\n\nfunction RenderInfo(props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"myInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"UserID\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"userid\",\n    defaultValue: props.user,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"name\",\n    defaultValue: props.name,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Last Flight\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"lastFlight\",\n    defaultValue: props.lastFlight,\n    type: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Role\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"role\",\n    defaultValue: props.role,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"useremail\",\n    defaultValue: props.email,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"infoField\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Team Number\"), React.createElement(\"input\", {\n    className: \"pinput\",\n    id: \"teamNum\",\n    defaultValue: props.teamNum,\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"teamInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(TeamInfo, {\n    team: props.team,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })));\n}\n\nfunction TeamInfo(props) {\n  var team = [];\n  props.team.forEach(member => {\n    team.push(React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, parseID(member)));\n  });\n  return React.createElement(\"table\", {\n    className: \"teamTable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Team Members\")), team);\n}\n\nfunction Approvals(props) {\n  var approvedtable = [];\n  var notapprovedtable = [];\n  props.approvals.forEach(pilot => {\n    var name = pilot.firstName + ' ' + pilot.lastName;\n    var email = pilot.email != null ? pilot.email : '';\n\n    if (pilot.role == 'admin') {\n      approvedtable.push(React.createElement(\"tr\", {\n        id: pilot.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(RenderAdminTag, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), pilot.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, pilot.role), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(RenderApprovedBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }))));\n    } else if (pilot.approved) {\n      approvedtable.push(React.createElement(\"tr\", {\n        id: pilot.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, pilot.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, pilot.role), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(RenderApprovedBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }))));\n    } else {\n      notapprovedtable.push(React.createElement(\"tr\", {\n        id: pilot.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, pilot.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, pilot.role), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(RenderApproveBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }))));\n    }\n  });\n  /** \n      var testData = (<tr><td>Jimmy Doolittle</td><td>jdoolittle@forces.gc.ca</td><td>Pilot</td><td><RenderApproveBtn/></td></tr>\n      <tr><td>Orvill Wright</td><td>owright@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>\n      <tr><td>Wilbur Wright</td><td>wwright@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>\n      <tr><td>Chesley Sullenberger</td><td>csullenberger@forces.gc.ca</td><td>Pilot</td><td><RenderApproveBtn/></td></tr>\n      <tr><td>Bessie Coleman</td><td>bcoleman@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>);\n      **/\n\n  if (props.role == 'admin') {\n    return React.createElement(\"table\", {\n      className: \"approvalsTable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Role\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Approve\")), notapprovedtable, approvedtable);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  });\n}\n\nfunction RenderApproveBtn() {\n  return React.createElement(\"div\", {\n    className: \"approve-btn-div \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"approve-btn\",\n    type: \"button\",\n    onClick: e => {\n      e.target.className += ' approved';\n      e.target.innerHTML = 'Approved';\n      var pilot = e.target.parentElement.parentElement.parentElement.id;\n      firebase.firestore().collection(\"pilots\").doc(pilot).update({\n        approved: true\n      }).then(function (docRef) {\n        console.log(\"Successfully Approved!\");\n      }).catch(function (error) {\n        console.error(\"Error making approval: \", error);\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Approve\"));\n}\n\nfunction RenderApprovedBtn() {\n  return React.createElement(\"div\", {\n    className: \"approved-btn-div \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"approved\",\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"Approved\"));\n}\n\nfunction RenderAdminTag() {\n  return React.createElement(\"button\", {\n    className: \"admin-tag\",\n    type: \"button\",\n    disabled: \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"ADMIN\");\n}\n\nfunction RenderLogoutBtn() {\n  return React.createElement(\"div\", {\n    className: \"logout-btn-div \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"logout-btn\",\n    type: \"button\",\n    onClick: logOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Log Out\"));\n}\n\nfunction logOut() {\n  if (!window.confirm(\"Are you sure you want to log out?\")) {\n    return;\n  }\n\n  return React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  });\n}\n\nfunction parseID(id) {\n  //aearhart to A. Earhart \n  if (id) {\n    return id[0].toUpperCase() + \". \" + id[1].toUpperCase() + id.slice(2);\n  }\n}\n\nfunction parseName(name) {\n  //Amelia Earhart to aearhart\n  if (name) {\n    return name[0].toLowerCase() + name.slice(name.indexOf(' ') + 1).toLowerCase();\n  }\n}\n\nclass Personnel extends React.Component {\n  constructor(props) {\n    super(props);\n    /* name */\n\n    this.state = {\n      userID: '',\n      team: [],\n      teamNum: null,\n      lastFlight: null,\n      email: '',\n      hasError: false,\n      approvals: []\n    };\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n    this.getTeamMembers();\n    var id = parseName(this.props.name);\n    this.setState({\n      userID: id\n    });\n    this.getApprovals();\n    console.log(this.state.approvals);\n  }\n\n  getApprovals() {\n    firebase.firestore().collection(\"pilots\").get().then(querySnapshot => {\n      var approvals = [];\n      querySnapshot.forEach(pilot => {\n        if (pilot.data().displayName != null) {\n          approvals.push({\n            id: pilot.id,\n            firstName: pilot.data().displayName,\n            //TODO: change later \n            lastName: pilot.data().lastName,\n            email: pilot.data().email,\n            role: pilot.data().role,\n            approved: pilot.data().approved\n          });\n        }\n      });\n      this.setState({\n        approvals: approvals\n      });\n      console.log(approvals);\n    }).catch(function (error) {\n      console.log(\"This user doesn't exist: \", error);\n    });\n  }\n\n  getTeamMembers() {\n    var user = parseName(this.props.name);\n    firebase.firestore().collection(\"pilots\").doc(user).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        var lastFlight = querySnapshot.data().lastFlight;\n        var email = querySnapshot.data().email;\n        var num = querySnapshot.data().team;\n        var role = querySnapshot.data().role;\n        this.setState({\n          teamNum: num,\n          lastFlight: lastFlight,\n          email: email,\n          role: role\n        });\n        firebase.firestore().collection(\"pilots\").doc(num.toString()).get().then(querySnapshot => {\n          if (!querySnapshot.empty && querySnapshot.data()) {\n            this.setState({\n              team: querySnapshot.data().pilots\n            });\n          } else {\n            console.log(\"Document doesn't exist\");\n            this.setState({\n              team: null\n            });\n          }\n\n          ;\n        });\n      } else {\n        console.log(\"Document doesn't exist\");\n        this.setState({\n          team: null\n        });\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"This user doesn't exist: \", error);\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(PersonnelInfo, {\n      user: this.state.userID,\n      name: this.props.name,\n      role: this.state.role,\n      team: this.state.team,\n      teamNum: this.state.teamNum,\n      lastFlight: this.state.lastFlight,\n      email: this.state.email,\n      approvals: this.state.approvals,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Personnel;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Personnel.js"],"names":["Login","React","ReactGA","firebase","ErrorPage","initializeReactGA","initialize","pageview","PersonnelInfo","props","user","team","name","teamNum","lastFlight","role","email","approvals","RenderInfo","TeamInfo","forEach","member","push","parseID","Approvals","approvedtable","notapprovedtable","pilot","firstName","lastName","id","approved","RenderApproveBtn","e","target","className","innerHTML","parentElement","firestore","collection","doc","update","then","docRef","console","log","catch","error","RenderApprovedBtn","RenderAdminTag","RenderLogoutBtn","logOut","window","confirm","toUpperCase","slice","parseName","toLowerCase","indexOf","Personnel","Component","constructor","state","userID","hasError","componentDidCatch","info","setState","componentDidMount","getTeamMembers","getApprovals","get","querySnapshot","data","displayName","empty","num","toString","pilots","render"],"mappings":"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","sourcesContent":["import Login from \"./Login\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport firebase from \"./Firebase.js\";\nimport ErrorPage from './ErrorPage.js';\nimport './Personnel.css';\n\nfunction initializeReactGA() {\n    ReactGA.initialize('UA-108277898-5');\n    ReactGA.pageview('/Personnel');\n}\n\nfunction PersonnelInfo(props) {\n    return (\n        <div>\n            <div className=\"personnelInfo\">\n                <RenderInfo user={props.user} team={props.team} name={props.name} teamNum={props.teamNum} lastFlight={props.lastFlight} role={props.role} email={props.email}/>\n            </div>\n            <RenderLogoutBtn/>\n            <Approvals role={props.role} approvals={props.approvals}/>\n        </div>\n    )\n}\n\nfunction RenderInfo(props) {\n    return (\n        <div>\n            <div className=\"myInfo\">\n                <div className=\"infoField\">\n                    <h5>UserID</h5>\n                    <input className='pinput' id=\"userid\" defaultValue={props.user} type=\"text\"/>\n                </div>\n                <div className=\"infoField\">\n                    <h5>Name</h5>\n                    <input className='pinput' id=\"name\" defaultValue={props.name} type=\"text\"/>\n                </div>\n                <div className=\"infoField\">\n                    <h5>Last Flight</h5>\n                    <input className='pinput' id=\"lastFlight\" defaultValue={props.lastFlight} type=\"date\"/>\n                </div>\n                <div className=\"infoField\">\n                    <h5>Role</h5>\n                    <input className='pinput' id=\"role\" defaultValue={props.role} type=\"text\"/>\n                </div>\n                <div className=\"infoField\">\n                    <h5>Email</h5>\n                    <input className='pinput' id=\"useremail\" defaultValue={props.email} type=\"text\"/>\n                </div>\n                <div className=\"infoField\">\n                    <h5>Team Number</h5>\n                    <input className='pinput' id=\"teamNum\" defaultValue={props.teamNum} type=\"text\"/>\n                </div>\n            </div>\n            <div className=\"teamInfo\">\n                <TeamInfo team={props.team}/>\n            </div>\n        </div>\n    )\n}\n\nfunction TeamInfo(props) {\n    var team = [];\n\n    props.team.forEach((member) => {\n        team.push(<tr>{parseID(member)}</tr>)\n    }) \n\n    return (\n        <table className=\"teamTable\">\n            <tr><th>Team Members</th></tr>\n            {team}\n        </table>\n    )\n}\n\nfunction Approvals(props) {\n    var approvedtable = [];\n    var notapprovedtable = [];\n\n    props.approvals.forEach((pilot)=> {\n        var name = pilot.firstName + ' ' + pilot.lastName;\n        var email = pilot.email != null ? pilot.email : '';\n        if (pilot.role == 'admin') {\n            approvedtable.push(<tr id={pilot.id}><td><RenderAdminTag/>{pilot.id}</td><td>{name}</td><td>{email}</td><td>{pilot.role}</td><td><RenderApprovedBtn/></td></tr>)\n\n        }\n        else if (pilot.approved) {\n           approvedtable.push(<tr id={pilot.id}><td>{pilot.id}</td><td>{name}</td><td>{email}</td><td>{pilot.role}</td><td><RenderApprovedBtn/></td></tr>)\n        }\n        else {\n            notapprovedtable.push(<tr id={pilot.id}><td>{pilot.id}</td><td>{name}</td><td>{email}</td><td>{pilot.role}</td><td><RenderApproveBtn/></td></tr>)\n        }\n    })\n/** \n    var testData = (<tr><td>Jimmy Doolittle</td><td>jdoolittle@forces.gc.ca</td><td>Pilot</td><td><RenderApproveBtn/></td></tr>\n    <tr><td>Orvill Wright</td><td>owright@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>\n    <tr><td>Wilbur Wright</td><td>wwright@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>\n    <tr><td>Chesley Sullenberger</td><td>csullenberger@forces.gc.ca</td><td>Pilot</td><td><RenderApproveBtn/></td></tr>\n    <tr><td>Bessie Coleman</td><td>bcoleman@forces.gc.ca</td><td>Staff</td><td><RenderApproveBtn/></td></tr>);\n    **/\n\n    if (props.role == 'admin') {\n        return (\n            <table className=\"approvalsTable\">\n            <tr>\n                <th>ID</th>\n                <th>Name</th>\n                <th>Email</th>\n                <th>Role</th>\n                <th>Approve</th>\n            </tr>\n            {notapprovedtable}\n            {approvedtable}\n            </table>\n        )\n    }\n\n    return <div></div>;\n}\n\nfunction RenderApproveBtn() {\n    return (\n        <div className='approve-btn-div '>\n                <button className=\"approve-btn\" type=\"button\" onClick={((e) => {\n                    e.target.className += ' approved';\n                    e.target.innerHTML = 'Approved';\n                    var pilot = e.target.parentElement.parentElement.parentElement.id;\n\n                    firebase.firestore().collection(\"pilots\").doc(pilot).update({\n                        approved: true,\n                    })\n                        .then(function(docRef) {\n                        console.log(\"Successfully Approved!\");\n                        })\n                        .catch(function(error) {\n                        console.error(\"Error making approval: \", error);\n                    });\n                    })}>\n                    Approve\n                </button>\n        </div>\n    );\n}\nfunction RenderApprovedBtn() {\n    return (\n        <div className='approved-btn-div '>\n                <button className=\"approved\" type=\"button\">\n                    Approved\n                </button>\n        </div>\n    );\n}\n\nfunction RenderAdminTag() {\n    return (\n                <button className=\"admin-tag\" type=\"button\" disabled='true'>\n                    ADMIN\n                </button>\n    );\n}\n\n\nfunction RenderLogoutBtn() {\n    return (\n        <div className='logout-btn-div '>\n                <button className=\"logout-btn\" type=\"button\" onClick={logOut}>\n                    Log Out\n                </button>\n        </div>\n    );\n}\n\nfunction logOut() {\n    if (!window.confirm(\"Are you sure you want to log out?\")) {\n        return;\n      } \n    return <Login/>\n}\n\nfunction parseID(id) {\n    //aearhart to A. Earhart \n    if (id) {\n    return id[0].toUpperCase() + \". \" + id[1].toUpperCase() + id.slice(2);}\n}\n\nfunction parseName(name) {\n    //Amelia Earhart to aearhart\n    if (name) {\n    return name[0].toLowerCase() + name.slice(name.indexOf(' ')+1).toLowerCase();}\n}\n\n\n\n\nclass Personnel extends React.Component{\n    constructor(props) {\n        super(props)\n        /* name */\n        this.state={\n            userID: '',\n            team: [],\n            teamNum: null,\n            lastFlight: null,\n            email: '',\n            hasError: false,\n            approvals: [],\n        };\n    }\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    componentDidMount() {\n        initializeReactGA();\n        this.getTeamMembers();\n        var id = parseName(this.props.name);\n        this.setState({userID: id});\n        this.getApprovals();\n        console.log(this.state.approvals);\n    }\n\n    getApprovals() {\n        firebase.firestore().collection(\"pilots\")\n        .get()\n        .then((querySnapshot) => {\n            var approvals = []\n            querySnapshot.forEach((pilot)=> {\n                if (pilot.data().displayName != null) {\n                    approvals.push({\n                        id: pilot.id,\n                        firstName: pilot.data().displayName, //TODO: change later \n                                lastName: pilot.data().lastName, \n                                email: pilot.data().email, \n                                role: pilot.data().role, \n                                approved: pilot.data().approved})\n                }\n            })\n            this.setState({approvals: approvals});\n            console.log(approvals);\n        })\n        .catch(function(error) {\n            console.log(\"This user doesn't exist: \", error);\n        });\n    }\n\n    getTeamMembers() {\n        var user = parseName(this.props.name);\n        firebase.firestore().collection(\"pilots\").doc(user)\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                var lastFlight = querySnapshot.data().lastFlight;\n                var email = querySnapshot.data().email;\n                var num = querySnapshot.data().team;\n                var role = querySnapshot.data().role;\n                this.setState({teamNum: num, lastFlight: lastFlight, email: email, role: role});\n                firebase.firestore().collection(\"pilots\").doc(num.toString())\n                .get()\n                .then((querySnapshot) => {\n                    if (!querySnapshot.empty && querySnapshot.data()) {\n                        this.setState({team: querySnapshot.data().pilots});\n                    }\n                    else {\n                        console.log(\"Document doesn't exist\");\n                        this.setState({team: null});\n                    };\n                });  \n            }\n            else {\n                console.log(\"Document doesn't exist\");\n                this.setState({team: null});\n            };\n        })\n        .catch(function(error) {\n            console.log(\"This user doesn't exist: \", error);\n        });\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return <ErrorPage/>\n        }\n        return (\n            <PersonnelInfo user={this.state.userID} name={this.props.name} role={this.state.role} team={this.state.team} teamNum={this.state.teamNum} \n                            lastFlight={this.state.lastFlight}\n                            email={this.state.email} approvals={this.state.approvals}/>\n        )\n    }\n}\n\nexport default Personnel;"]},"metadata":{},"sourceType":"module"}