{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/MeetingForm.js\";\nimport React from \"react\";\nimport \"./Form.css\";\nimport firebase from \"./Firebase.js\";\nimport Const from \"./Const.js\";\nimport Helper from \"./Helper.js\";\nimport { RenderSuccessDialog } from \"./Overlay.js\";\n\nDate.prototype.toDateInputValue = function () {\n  var local = new Date(this);\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n  return local.toJSON().slice(0, 10);\n};\n\nclass MeetingForm extends React.Component {\n  constructor(props) {\n    super(props); //allPilotIDs\n\n    this.state = {\n      title: \"\",\n      type: \"meeting\",\n      date: new Date().toDateInputValue(),\n      startTime: 0,\n      endTime: 0,\n      location: \"\",\n      confLink: \"\",\n      notes: \"\",\n      userid: \"\",\n      p1: \"\",\n      p2: \"\",\n      p3: \"\",\n      p4: \"\"\n    };\n  }\n\n  checkError(field, value) {\n    switch (field) {\n      case 'p1':\n        if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n          Helper.flag('p1', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p2':\n        if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n          Helper.flag('p2', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p3':\n        if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n          Helper.flag('p3', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'p4':\n        if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n          Helper.flag('p4', 'Invalid pilot');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'startTime':\n        if (isNaN(value) || !Helper.timeValid(value)) {\n          Helper.flag('startTime', 'Enter between 0000 and 2359');\n          this.setState({\n            ok: false\n          });\n        } else if (parseInt(value) >= parseInt(this.state.endTime)) {\n          Helper.flag('endTime', 'Return must be after dep.');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      case 'endTime':\n        if (isNaN(value) || !Helper.timeValid(value)) {\n          Helper.flag('endTime', 'Enter between 0000 and 2359');\n        } else if (parseInt(this.state.startTime) >= parseInt(value)) {\n          Helper.flag('endTime', 'Return must be after dep.');\n          this.setState({\n            ok: false\n          });\n        } else {\n          this.setState({\n            ok: true\n          });\n        }\n\n        break;\n\n      default:\n        this.setState({\n          ok: true\n        });\n        break;\n    }\n  }\n\n  onSubmit() {\n    var required = ['title', 'startTime', 'endTime'];\n    var remove = document.getElementsByClassName('alert-validate');\n\n    for (let item of remove) {\n      item.classList.remove('alert-validate');\n    }\n\n    required.forEach(field => {\n      if (this.state[field] == \"\") {\n        Helper.flag(field, \"Required\");\n      }\n    });\n\n    if (document.getElementsByClassName('alert-validate').length == 0) {\n      //TODO TODO TODO : now we have 4 users potentially!!! How to deal with this? \n      //TODO: UPDATE OVERLAY TO DISPLAY THIS \n      var newEvent = firebase.firestore().collection(\"events\").doc();\n      newEvent.set(this.state).then(function () {\n        console.log(\"Event successfully added to events!\");\n      }).catch(function (error) {\n        console.error(\"Error adding event: \", error);\n      });\n      var users = [this.state.userid, this.state.p1, this.state.p2, this.state.p3, this.state.p4];\n      users.forEach(user => {\n        var field = 'events.' + user;\n        firebase.firestore().collection(\"dates\").doc(this.state.date).update({\n          [field]: firebase.firestore.FieldValue.arrayUnion({\n            'type': 'meeting',\n            'startTime': this.state.startTime,\n            'endTime': this.state.endTime,\n            'id': newEvent.id\n          })\n        }).then(function () {\n          console.log(\"Event successfully added to dates!\");\n        }).catch(function (error) {\n          console.error(\"Error writing document: \", error);\n        });\n      });\n      document.getElementsByClassName(\"success-modal\")[0].style.display = \"block\";\n    }\n  }\n\n  onBlur(name, e, type) {\n    console.log(name, e.target.value.trim());\n\n    if (type == 'date') {\n      var d = new Date(e.target.value);\n      d.setMinutes(d.getMinutes() + d.getTimezoneOffset());\n      this.setState({\n        date: d.toDateInputValue()\n      });\n    } else if (type == 'number') {\n      this.setState({\n        [name]: e.target.value\n      });\n      Helper.checkFieldError(name, e.target.value, null);\n    } else if (type == 'pilot') {\n      this.setState({\n        [name]: e.target.value.trim()\n      });\n      Helper.checkFieldError(name, e.target.value.trim(), this.props.allPilotIDs);\n    } else {\n      {\n        Helper.getOptionsList(\"p1\", this.props.allPilotIDs);\n      }\n    }\n\n    e.target.parentElement.classList.remove(\"alert-validate\");\n  }\n\n  componentDidMount() {\n    this.setState({\n      userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()\n    });\n  }\n\n  renderField(field) {\n    const name = field.name;\n    const displayName = field.hasOwnProperty(\"displayName\") ? field.displayName.toUpperCase() : field.name.toUpperCase();\n    const wrapperClassName = field.size + \"-wrapper\";\n    const fieldClassName = \"input\" + (this.state[name] != \"\" ? \" has-val\" : \"\");\n    var acceptedValues = [];\n\n    if ([\"p1\", \"p2\", \"p3\", \"p4\"].includes(field.name)) {\n      acceptedValues = this.props.allPilotIDs;\n    } //const datalist = field.hasOwnProperty('select') ? field.select : '';\n\n\n    return React.createElement(\"div\", {\n      id: name,\n      className: wrapperClassName + \" validate-input\",\n      onFocus: e => {\n        e.target.parentElement.classList.remove(\"alert-validate\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, Helper.getOptionsList('pilots', this.props.allPilotIDs), React.createElement(\"input\", {\n      className: fieldClassName,\n      type: \"text\",\n      name: name,\n      list: field.selectList,\n      onBlur: e => {\n        this.onBlur(name, e, 'pilot');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": displayName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }));\n  }\n\n  renderCustomField(field) {\n    switch (field.name) {\n      case \"date\":\n        return React.createElement(\"div\", {\n          className: \"medium-wrapper\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"input has-val validate-input\",\n          type: \"date\",\n          name: \"name\",\n          defaultValue: new Date().toDateInputValue(),\n          onBlur: e => {\n            var d = new Date(e.target.value);\n            d.setMinutes(d.getMinutes() + d.getTimezoneOffset());\n            this.setState({\n              date: d.toDateInputValue()\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"focus-input\",\n          \"data-placeholder\": \"DATE\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }));\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(RenderSuccessDialog, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      className: \"form validate-form\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrap-input validate-input\",\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.title !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"title\",\n      required: true,\n      onBlur: e => {\n        this.onBlur('title', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"MEETING TITLE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input has-val\",\n      required: true,\n      type: \"date\",\n      name: \"date\",\n      defaultValue: new Date().toDateInputValue(),\n      onBlur: e => {\n        this.onBlur('date', e, 'date');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"DATE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      onFocus: e => {\n        e.target.parentElement.classList.remove(\"alert-validate\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.startTime !== 0 ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"startTime\",\n      onBlur: e => {\n        this.onBlur('startTime', e, 'number');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"START TIME\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"endTime\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.endTime !== 0 ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"endTime\",\n      onBlur: e => {\n        this.onBlur('endTime', e, 'number');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"END TIME\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, Helper.getOptionsList(\"pilots\", this.props.allPilotIDs), React.createElement(\"input\", {\n      className: \"input\" + (this.state.p1 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p1\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('p1', e, 'pilot');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p2 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p2\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('p2', e, 'pilot');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p3 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p3\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('p3', e, 'pilot');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper validate-input\",\n      id: \"p4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.p4 !== \"\" ? \" has-val\" : \"\"),\n      name: \"p4\",\n      list: \"pilots\",\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('p4', e, 'pilot');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"ATTENDEE 4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.location !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      name: \"esp\",\n      onBlur: e => {\n        this.onBlur('location', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"LOCATION\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"medium-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.confLink !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('confLink', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"CONFERENCE LINK\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"large-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"input\" + (this.state.notes !== \"\" ? \" has-val\" : \"\"),\n      type: \"text\",\n      onBlur: e => {\n        this.onBlur('notes', e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"focus-input\",\n      \"data-placeholder\": \"NOTES\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"container-form-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrap-form-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-bgbtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"form-btn\",\n      onClick: e => {\n        e.preventDefault();\n        this.onSubmit();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Add Meeting\")))));\n  }\n\n  renderRow(row) {\n    var fields = [];\n    Object.values(row).forEach(field => {\n      if (field.hasOwnProperty('custom')) {\n        fields.push(this.renderCustomField(field));\n      } else {\n        fields.push(this.renderField(field));\n      }\n    });\n    return React.createElement(\"div\", {\n      className: \"row-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, fields);\n  }\n\n  renderForm() {\n    var rows = [];\n    Const.flightFormFields.forEach(row => {\n      console.log(row);\n      rows.push(this.renderRow(row));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"form\",\n      autoComplete: \"off\",\n      onSubmit: e => {\n        e.preventDefault();\n        this.onSubmit();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, rows, React.createElement(RenderSuccessDialog, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }), Helper.RenderFormButton(this.props.onSubmit, \"Add Flight\")));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, this.renderForm());\n  }\n\n}\n\nexport default MeetingForm;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/MeetingForm.js"],"names":["React","firebase","Const","Helper","RenderSuccessDialog","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","MeetingForm","Component","constructor","props","state","title","type","date","startTime","endTime","location","confLink","notes","userid","p1","p2","p3","p4","checkError","field","value","allPilotIDs","includes","flag","setState","ok","isNaN","timeValid","parseInt","onSubmit","required","remove","document","getElementsByClassName","item","classList","forEach","length","newEvent","firestore","collection","doc","set","then","console","log","catch","error","users","user","update","FieldValue","arrayUnion","id","style","display","onBlur","name","e","target","trim","d","checkFieldError","getOptionsList","parentElement","componentDidMount","activeUser","split","toLowerCase","renderField","displayName","hasOwnProperty","toUpperCase","wrapperClassName","size","fieldClassName","acceptedValues","selectList","renderCustomField","render","preventDefault","renderRow","row","fields","Object","values","push","renderForm","rows","flightFormFields","RenderFormButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Form.css\";\nimport firebase from \"./Firebase.js\";\nimport Const from \"./Const.js\";\nimport Helper from \"./Helper.js\";\nimport {RenderSuccessDialog} from \"./Overlay.js\";\n\nDate.prototype.toDateInputValue = (function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0,10);\n});\n\nclass MeetingForm extends React.Component {\n    constructor(props) { \n        super(props);\n        //allPilotIDs\n        this.state = {\n            title: \"\", \n            type: \"meeting\", \n            date: new Date().toDateInputValue(),\n            startTime: 0,\n            endTime: 0,\n            location: \"\", \n            confLink: \"\",\n            notes: \"\",\n            userid: \"\",\n            p1:\"\",p2:\"\",p3:\"\",p4:\"\",\n        }\n    }\n\n    checkError(field, value) {\n        switch (field){\n        case 'p1':\n            if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n                Helper.flag('p1', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p2':\n            if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n                Helper.flag('p2', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p3':\n            if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n                Helper.flag('p3', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'p4':\n            if (!this.props.allPilotIDs.includes(value) && value != \"\") {\n                Helper.flag('p4', 'Invalid pilot');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'startTime':\n            if (isNaN(value) || !Helper.timeValid(value)) {\n                Helper.flag('startTime', 'Enter between 0000 and 2359');\n                this.setState({ok: false});\n            }\n            else if (parseInt(value) >= parseInt(this.state.endTime)) {\n                Helper.flag('endTime', 'Return must be after dep.');\n                this.setState({ok: false});\n            }\n            else {this.setState({ok: true});}\n            break;\n        case 'endTime':\n            if (isNaN(value) || !Helper.timeValid(value)) {\n                Helper.flag('endTime', 'Enter between 0000 and 2359');\n            }\n            else if (parseInt(this.state.startTime) >= parseInt(value)) {\n                Helper.flag('endTime', 'Return must be after dep.');\n                this.setState({ok: false});\n                }\n                else {this.setState({ok: true});}\n                break;\n\n        default: \n            this.setState({ok: true});\n            break;\n        }\n    }\n\n    onSubmit() {\n        var required = ['title', 'startTime', 'endTime'];\n        var remove = document.getElementsByClassName('alert-validate');\n        for (let item of remove) {\n            item.classList.remove('alert-validate');\n        }\n        required.forEach(field => {\n            if (this.state[field] == \"\") {\n                Helper.flag(field, \"Required\");\n            }\n        })\n\n\n        if (document.getElementsByClassName('alert-validate').length == 0) {\n            //TODO TODO TODO : now we have 4 users potentially!!! How to deal with this? \n            //TODO: UPDATE OVERLAY TO DISPLAY THIS \n            var newEvent = firebase.firestore().collection(\"events\").doc()\n            newEvent.set(this.state)\n            .then(function() {\n                console.log(\"Event successfully added to events!\");})\n            .catch(function(error) {\n                console.error(\"Error adding event: \", error);\n            });\n\n            var users = [this.state.userid, this.state.p1, this.state.p2, this.state.p3, this.state.p4];\n            users.forEach((user) => {\n                var field = 'events.'+user;\n                firebase.firestore().collection(\"dates\").doc(this.state.date).update({\n                    [field]: firebase.firestore.FieldValue.arrayUnion({'type':'meeting', 'startTime': this.state.startTime, 'endTime': this.state.endTime, 'id':newEvent.id})\n                    })\n                .then(function() {\n                    console.log(\"Event successfully added to dates!\");})\n                .catch(function(error) {\n                    console.error(\"Error writing document: \", error);\n                })\n            })\n            \n            document.getElementsByClassName(\"success-modal\")[0].style.display = \"block\";\n        }\n    }\n\n    onBlur(name, e, type) {\n        console.log(name, e.target.value.trim())\n        if (type == 'date') {\n            var d = new Date(e.target.value);\n            d.setMinutes( d.getMinutes() + d.getTimezoneOffset() );\n            this.setState({date: d.toDateInputValue()});\n        }\n        else if (type == 'number')  {\n            this.setState({[name]: e.target.value});\n            Helper.checkFieldError(name, e.target.value, null);\n        }\n        else if (type == 'pilot') {\n            this.setState({[name]: e.target.value.trim()}); \n            Helper.checkFieldError(name, e.target.value.trim(), this.props.allPilotIDs);\n        }\n        else {\n            {Helper.getOptionsList(\"p1\", this.props.allPilotIDs)}\n        }\n        e.target.parentElement.classList.remove(\"alert-validate\");\n    }\n\n    componentDidMount() {\n        this.setState({userid: (this.props.activeUser[0] + this.props.activeUser.split(' ')[1]).toLowerCase()});\n    }\n\n    renderField(field) {\n        const name = field.name;\n        const displayName = field.hasOwnProperty(\"displayName\") ? field.displayName.toUpperCase() : field.name.toUpperCase();\n        const wrapperClassName = field.size + \"-wrapper\";\n        const fieldClassName = \"input\"+ (this.state[name] != \"\" ? \" has-val\": \"\");\n        var acceptedValues = [];\n        if ([\"p1\", \"p2\", \"p3\", \"p4\"].includes(field.name)) {\n            acceptedValues = this.props.allPilotIDs;\n\n        }\n\n        //const datalist = field.hasOwnProperty('select') ? field.select : '';\n        return (\n            <div id={name} className={wrapperClassName + \" validate-input\"} onFocus={(e)=>{e.target.parentElement.classList.remove(\"alert-validate\")}}>\n\n            {Helper.getOptionsList('pilots', this.props.allPilotIDs)}\n            <input className={fieldClassName} type=\"text\" name={name} list={field.selectList} \n                    onBlur={(e)=>{this.onBlur(name,e, 'pilot')}}/>\n            <span className=\"focus-input\" data-placeholder={displayName}></span>\n            </div>\n            \n        )\n    }\n\n    renderCustomField(field) {\n        switch(field.name) {\n            \n            case \"date\": \n                return (<div className=\"medium-wrapper\">\n                <input className=\"input has-val validate-input\" type=\"date\" name=\"name\" defaultValue={new Date().toDateInputValue()} onBlur={(e)=>{var d = new Date(e.target.value);\n                    d.setMinutes( d.getMinutes() + d.getTimezoneOffset() );\n                    this.setState({date: d.toDateInputValue()});}}/>\n                <span className=\"focus-input\" data-placeholder=\"DATE\"></span>\n            </div>)\n        }\n    }\n\n\n\n    render() {\n        \n        return (\n            <div>\n                <RenderSuccessDialog/>\n                <form className=\"form validate-form\" autoComplete=\"off\" >\n                    <div className=\"wrap-input validate-input\" id=\"title\">\n                        <input className={\"input\"+ (this.state.title !== \"\"? \" has-val\": \"\")} type=\"text\" name=\"title\" required={true} onBlur={(e)=>{this.onBlur('title',e)}}/>\n                        <span className=\"focus-input\" data-placeholder=\"MEETING TITLE\"></span>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                    <div className=\"medium-wrapper\">\n                            <input className={\"input has-val\"}  required={true}type=\"date\" name=\"date\" defaultValue={new Date().toDateInputValue()} onBlur={(e)=>{this.onBlur('date',e, 'date')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"DATE\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" onFocus={(e)=>{e.target.parentElement.classList.remove(\"alert-validate\")}}>\n                            <input className={\"input\"+ (this.state.startTime !== 0 ? \" has-val\": \"\")} type=\"text\" name=\"startTime\" \n                                onBlur={(e)=>{this.onBlur('startTime',e, 'number')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"START TIME\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"endTime\">\n                            <input className={\"input\"+ (this.state.endTime !== 0 ? \" has-val\": \"\")} type=\"text\" name=\"endTime\" \n                                onBlur={(e)=>{this.onBlur('endTime',e, 'number')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"END TIME\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"medium-wrapper validate-input\" id=\"p1\">\n                        {Helper.getOptionsList(\"pilots\", this.props.allPilotIDs)}\n                            <input className={\"input\"+ (this.state.p1 !== \"\" ? \" has-val\": \"\")}name=\"p1\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.onBlur('p1',e, 'pilot')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 1\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p2\" >\n                            <input className={\"input\"+ (this.state.p2 !== \"\" ? \" has-val\": \"\")} name=\"p2\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.onBlur('p2',e, 'pilot')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 2\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p3\" >\n                            <input className={\"input\"+ (this.state.p3 !== \"\" ? \" has-val\": \"\")} name=\"p3\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.onBlur('p3',e, 'pilot')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 3\"></span>\n                        </div>\n                        <div className=\"medium-wrapper validate-input\" id=\"p4\" >\n                            <input className={\"input\"+ (this.state.p4 !== \"\" ? \" has-val\": \"\")} name=\"p4\" list=\"pilots\" type=\"text\" onBlur={(e)=>{this.onBlur('p4',e, 'pilot')}}/>\n                            <span className=\"focus-input\" data-placeholder=\"ATTENDEE 4\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"medium-wrapper\">\n                            <input className={\"input\"+ (this.state.location !== \"\" ? \" has-val\": \"\")} type=\"text\" name=\"esp\" onBlur={(e)=>{this.onBlur('location',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"LOCATION\"></span>\n                        </div>\n                        <div className=\"medium-wrapper\">\n                            <input className={\"input\"+ (this.state.confLink !== \"\" ? \" has-val\": \"\")} type=\"text\" onBlur={(e)=>{this.onBlur('confLink',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"CONFERENCE LINK\"></span>\n                        </div>\n                    </div>\n                    <div className=\"row-wrapper\"> \n                        <div className=\"large-wrapper\">\n                            <input className={\"input\"+ (this.state.notes !== \"\" ? \" has-val\": \"\")} type=\"text\" onBlur={(e)=>{this.onBlur('notes',e)}}/>\n                            <span className=\"focus-input\" data-placeholder=\"NOTES\"></span>\n                        </div>\n                    </div>\n                    \n                    <div className=\"container-form-btn\">\n                        <div className=\"wrap-form-btn\">\n                            <div className=\"form-bgbtn\"></div>\n                            <button className=\"form-btn\" onClick={(e)=>{e.preventDefault();this.onSubmit()}}>\n                                Add Meeting\n                            </button>\n                        </div>\n                    </div>\n                </form>\n\n            </div>\n\n        );\n    }\n\n    renderRow(row) {\n        var fields = [];\n        Object.values(row).forEach(field => {\n            if (field.hasOwnProperty('custom')) {\n                fields.push(this.renderCustomField(field));\n            }\n            else {\n                fields.push(this.renderField(field));\n            }\n            \n        });\n        return (\n            <div className=\"row-wrapper\"> \n                {fields}\n            </div>\n        )\n    }\n\n\n    renderForm() {\n        var rows = []\n        Const.flightFormFields.forEach(row => {\n            console.log(row);\n            rows.push(this.renderRow(row));\n        });\n        return (\n            <div>\n                <form className=\"form\" autoComplete=\"off\"  onSubmit={(e)=>{e.preventDefault(); this.onSubmit()}}>\n                    {rows}\n                    <RenderSuccessDialog/>\n                    {Helper.RenderFormButton(this.props.onSubmit, \"Add Flight\")}\n                </form>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                {this.renderForm()}\n            </div>\n        );\n    }\n\n}\n\nexport default MeetingForm;"]},"metadata":{},"sourceType":"module"}