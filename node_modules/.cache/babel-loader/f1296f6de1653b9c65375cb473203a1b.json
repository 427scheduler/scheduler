{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Dashboard.js\";\nimport React from 'react';\nimport './index.css';\nimport './Dashboard.css';\nimport firebase from \"./Firebase.js\";\nimport moment from 'moment';\nimport ADD_LOGO from './img/add.png';\nimport WeekCalendar, { MonthCalendar } from './Calendar.js';\nimport updateData from './insertDataTest.js';\nimport ErrorPage from './ErrorPage.js';\n\nDate.prototype.toDateInputValue = function () {\n  var local = new Date(this);\n  local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n  return local.toJSON().slice(0, 10);\n};\n\nfunction FlightCard(props) {\n  var date = \"\";\n\n  if (props.data.date == props.today.toDateInputValue()) {\n    date = 'Today';\n  } else if (props.data.date == props.tomorrow.toDateInputValue()) {\n    date = \"Tomorrow\";\n  } else {\n    date = new Date(props.data.date).toDateString().slice(0, 10).replace(' ', ', ');\n  }\n\n  var time = (props.data.timeStart < 100 ? '0' : '') + (props.data.timeStart < 1000 ? '0' : '') + props.data.timeStart + ' - ' + (props.data.timeEnd < 100 ? '0' : '') + (props.data.timeEnd < 1000 ? '0' : '') + props.data.timeEnd;\n  return React.createElement(\"div\", {\n    className: \"flightCard\",\n    onClick: props.toggleOverlay.bind(this, props.data.flightid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, date), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, time)), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"CAPT\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, props.data.captain[0].toUpperCase() + \". \" + props.data.captain[1].toUpperCase() + props.data.captain.slice(2)))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"FO\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, props.data.fo[0].toUpperCase() + \". \" + props.data.fo[1].toUpperCase() + props.data.fo.slice(2)))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"A/C\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, props.data.ac))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"TYPE\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, props.data.details))), React.createElement(\"div\", {\n    className: \"infoLine\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"CONFIG\")), React.createElement(\"div\", {\n    className: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, props.data.config))));\n}\n\nfunction WeekView(props) {\n  return React.createElement(WeekCalendar, {\n    events: props.events,\n    dates: props.curWeek,\n    curWeekData: props.curWeekData,\n    toggleOverlay: (type, id) => {\n      props.toggleOverlay(type, id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  });\n}\n\nfunction MonthView(props) {\n  return React.createElement(MonthCalendar, {\n    curWeek: props.curWeek,\n    changeCurWeek: day => {\n      props.changeCurWeek(day);\n    },\n    id: props.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  });\n}\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {},\n      curDate: new Date(),\n      curWeek: this.initWeek(),\n      curWeekData: [],\n      hasError: false\n    };\n  }\n\n  initWeek() {\n    var week = [];\n    var cur = new Date();\n    var startOfWeek = moment(cur).startOf('isoweek');\n\n    for (var i = 0; i < 5; i++) {\n      week.push([startOfWeek.month(), startOfWeek.date()]);\n      startOfWeek.add(1, 'day');\n    }\n\n    return week;\n  }\n\n  changeCurWeek(day) {\n    var week = [];\n    var startOfWeek = day.startOf('isoweek');\n\n    for (var i = 0; i < 5; i++) {\n      week.push([startOfWeek.month(), startOfWeek.date()]);\n      startOfWeek.add(1, 'day');\n    }\n\n    this.setState({\n      curWeek: week\n    });\n    this.getData(week);\n  }\n\n  getData(week) {\n    var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase();\n    week.forEach(day => {\n      var d = this.state.curDate.getFullYear() + '-' + (day[0] < 9 ? '0' : '') + (day[0] + 1) + '-' + (day[1] < 10 ? '0' : '') + day[1];\n      console.log(d);\n      firebase.firestore().collection('dates').doc(d).get().then(querySnapshot => {\n        var tmp = this.state.curWeekData;\n        tmp.push(querySnapshot.data().events[id]);\n        this.setState({\n          curWeekData: tmp\n        });\n      }).catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n    });\n  }\n\n  renderUpcomingEvents() {\n    var events = [[['flight', 12, 13, 'ALP'], ['apt', 13, 14, 'Medical'], ['apt', 15, 17]], [['meeting', 10, 11, 'Classroom 2'], ['apt', 13, 16]], [['flight', 8, 9], ['meeting', 12, 15]], [['meeting', 6, 8], ['meeting', 14, 15, 'Classroom A']], [['flight', 3, 5, 'SME'], ['apt', 5, 6]]];\n    var dates = [4, 5, 6, 7, 8];\n    return React.createElement(\"div\", {\n      className: \"upcomingEvents\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"weekView\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(WeekView, {\n      curWeek: this.state.curWeek,\n      curWeekData: this.state.curWeekData,\n      toggleOverlay: (type, id) => {\n        this.props.toggleOverlay(type, id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"monthView\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(MonthView, {\n      curWeek: this.state.curWeek,\n      changeCurWeek: day => {\n        this.changeCurWeek(day);\n      },\n      id: this.props.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })));\n  }\n\n  renderUpcomingFlights() {\n    this.initWeek();\n    var cards = [];\n    var today = new Date(this.state.curDate);\n    var tomorrow = new Date(this.state.curDate);\n    tomorrow.setDate(today.getDate() + 1);\n    console.log(today, tomorrow);\n\n    for (var i = 0; i < this.state.data.length; i++) {\n      cards.push(React.createElement(FlightCard, {\n        data: this.state.data[i].data(),\n        today: today,\n        tomorrow: tomorrow,\n        toggleOverlay: id => {\n          this.props.toggleOverlay('flight', id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }));\n    }\n\n    return cards;\n  }\n\n  componentDidMount() {\n    //updateData();\n    firebase.firestore().collection(\"pilots\").doc('aearhart').collection('upcoming-events').where('date', '>=', this.state.curDate.toDateInputValue()).get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        this.setState({\n          data: querySnapshot.docs\n        });\n      } else {\n        console.log(\"Document doesn't exist\");\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n    this.getData(this.state.curWeek);\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"My Upcoming Flights\"), React.createElement(\"div\", {\n      className: \"upcomingFlights\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.renderUpcomingFlights()), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"My Schedule\"), this.renderUpcomingEvents());\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Dashboard.js"],"names":["React","firebase","moment","ADD_LOGO","WeekCalendar","MonthCalendar","updateData","ErrorPage","Date","prototype","toDateInputValue","local","setMinutes","getMinutes","getTimezoneOffset","toJSON","slice","FlightCard","props","date","data","today","tomorrow","toDateString","replace","time","timeStart","timeEnd","toggleOverlay","bind","flightid","captain","toUpperCase","fo","ac","details","config","WeekView","events","curWeek","curWeekData","type","id","MonthView","day","changeCurWeek","Dashboard","Component","constructor","state","curDate","initWeek","hasError","week","cur","startOfWeek","startOf","i","push","month","add","setState","getData","toLowerCase","split","forEach","d","getFullYear","console","log","firestore","collection","doc","get","then","querySnapshot","tmp","catch","error","renderUpcomingEvents","dates","renderUpcomingFlights","cards","setDate","getDate","length","componentDidMount","where","empty","docs","componentDidCatch","info","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './index.css';\nimport './Dashboard.css';\nimport firebase from \"./Firebase.js\";\nimport moment from 'moment';\nimport ADD_LOGO from './img/add.png';\nimport WeekCalendar, { MonthCalendar } from './Calendar.js';\nimport updateData from './insertDataTest.js';\nimport ErrorPage from './ErrorPage.js';\n\nDate.prototype.toDateInputValue = (function() {\n    var local = new Date(this);\n    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());\n    return local.toJSON().slice(0,10);\n});\n\nfunction FlightCard(props) {\n    var date = \"\";\n    if (props.data.date == props.today.toDateInputValue()){ date = 'Today';} \n    else if (props.data.date == props.tomorrow.toDateInputValue()) { date = \"Tomorrow\";} \n    else {date = new Date(props.data.date).toDateString().slice(0,10).replace(' ', ', ');}\n\n    var time = (props.data.timeStart < 100 ? '0' : '') +(props.data.timeStart < 1000 ? '0' : '') + props.data.timeStart + ' - ' + (props.data.timeEnd < 100 ? '0' : '') +(props.data.timeEnd < 1000 ? '0' : '') + props.data.timeEnd;\n    return (\n        <div className=\"flightCard\" onClick={props.toggleOverlay.bind(this, props.data.flightid)}>\n            <div className=\"date\">\n                <h2>{date}</h2>\n                <p>{time}</p>\n            </div>\n            <hr/>\n            <div className=\"infoLine\">\n                <div className=\"title\">\n                    <h5>CAPT</h5>\n                </div>\n                <div className=\"text\">\n                    <h5>{props.data.captain[0].toUpperCase() + \". \" + props.data.captain[1].toUpperCase() + props.data.captain.slice(2)}</h5>\n                </div>\n            </div>\n            <div className=\"infoLine\">\n                <div className=\"title\">\n                    <h5>FO</h5>\n                </div>\n                <div className=\"text\">\n                    <h5>{props.data.fo[0].toUpperCase() + \". \" + props.data.fo[1].toUpperCase() + props.data.fo.slice(2)}</h5>\n                </div>\n            </div>\n            <div className=\"infoLine\">\n                <div className=\"title\"><h5>A/C</h5></div>\n                <div className=\"text\"><h5>{props.data.ac}</h5></div>\n            </div>\n            <div className=\"infoLine\">\n                <div className=\"title\"><h5>TYPE</h5></div>\n                <div className=\"text\"><h5>{props.data.details}</h5></div>\n            </div>\n            <div className=\"infoLine\">\n                <div className=\"title\"><h5>CONFIG</h5></div>\n                <div className=\"text\"><h5>{props.data.config}</h5></div>\n            </div>\n        </div>\n    );\n}\n\nfunction WeekView (props) {\n    return (\n        <WeekCalendar events={props.events} dates={props.curWeek} curWeekData={props.curWeekData} toggleOverlay={(type,id)=>{props.toggleOverlay(type,id)}}/>\n    )\n}\n\nfunction MonthView (props) {\n    return (\n        <MonthCalendar curWeek={props.curWeek} changeCurWeek={(day)=>{props.changeCurWeek(day)}} id={props.id}/>\n    )\n}\n\nclass Dashboard extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n            curDate: new Date(),\n            curWeek: this.initWeek(),\n            curWeekData: [], \n            hasError: false,\n        }\n    }\n\n    initWeek() {\n        var week = [];\n        var cur = new Date();\n        var startOfWeek = moment(cur).startOf('isoweek');\n        for (var i =0; i < 5; i++) {\n            week.push([startOfWeek.month(), startOfWeek.date()]);\n            startOfWeek.add(1, 'day');\n        }\n        return week; \n    }\n\n    changeCurWeek(day) {\n        var week = [];\n        var startOfWeek = day.startOf('isoweek');\n        for (var i =0; i < 5; i++) {\n            week.push([startOfWeek.month(), startOfWeek.date()]);\n            startOfWeek.add(1, 'day');\n        }\n        \n        this.setState({curWeek: week});\n        this.getData(week);\n    }\n\n    getData(week) {\n        var id = this.props.id[0].toLowerCase() + this.props.id.split(' ')[1].toLowerCase();\n        week.forEach(day => {\n            var d = this.state.curDate.getFullYear() + '-' + (day[0] < 9 ? '0' : '') + (day[0]+1) + '-' + (day[1] < 10 ? '0' : '') + day[1] ;\n            \n            console.log(d);\n            firebase.firestore().collection('dates').doc(d).get()\n                .then((querySnapshot) => {\n                    var tmp = this.state.curWeekData;\n                    tmp.push(querySnapshot.data().events[id]);\n                    this.setState({curWeekData: tmp});\n                })\n                .catch(function(error) {\n                    console.log(\"Error getting documents: \", error);\n            });\n        })\n    }\n\n\n    renderUpcomingEvents() {\n        var events = [[['flight', 12, 13, 'ALP'],['apt', 13, 14, 'Medical'], ['apt', 15, 17]], \n        [['meeting', 10, 11, 'Classroom 2'], ['apt', 13, 16]],\n        [['flight', 8, 9], ['meeting', 12, 15]],\n        [['meeting', 6, 8], ['meeting', 14, 15, 'Classroom A']],\n        [['flight', 3, 5, 'SME'], ['apt', 5, 6]]];\n        var dates = [4, 5, 6, 7, 8];\n\n\n        return (\n            <div className=\"upcomingEvents\">\n                <div className=\"weekView\">\n                    <WeekView curWeek={this.state.curWeek} curWeekData={this.state.curWeekData} toggleOverlay={(type,id)=>{this.props.toggleOverlay(type,id)}}/>\n                </div>\n                <div className=\"monthView\">\n                    <MonthView curWeek={this.state.curWeek} changeCurWeek={(day)=>{this.changeCurWeek(day)}} id={this.props.id} />\n                </div>\n            </div>\n        )\n    }\n\n    renderUpcomingFlights() {\n        this.initWeek();\n        var cards = [];\n        var today = new Date(this.state.curDate);\n        var tomorrow = new Date(this.state.curDate);\n        tomorrow.setDate(today.getDate() + 1);\n        console.log(today, tomorrow)\n        for (var i= 0; i < this.state.data.length; i++) {\n            cards.push(<FlightCard data={this.state.data[i].data()} today={today} tomorrow={tomorrow} toggleOverlay={(id)=>{this.props.toggleOverlay('flight', id);}}/>)\n        }\n        return cards\n    }\n\n    componentDidMount() {\n        //updateData();\n        firebase.firestore().collection(\"pilots\").doc('aearhart').collection('upcoming-events').where('date', '>=', this.state.curDate.toDateInputValue())\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                this.setState({data: querySnapshot.docs})\n            }\n            else {\n                console.log(\"Document doesn't exist\");\n            };\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n\n        this.getData(this.state.curWeek);\n    }\n\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    render() { \n        if (this.state.hasError) {\n            return <ErrorPage/>\n          }\n        return (\n            <div>\n                <h2>My Upcoming Flights</h2>\n                <div className=\"upcomingFlights\">\n                    {this.renderUpcomingFlights()}\n                </div>\n                <h2>My Schedule</h2>\n                {this.renderUpcomingEvents()}\n            </div>\n            \n        )\n    };\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}