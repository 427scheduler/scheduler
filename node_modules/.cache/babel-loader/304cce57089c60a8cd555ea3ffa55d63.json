{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/scheduler/src/App.js\";\nimport React from 'react';\nimport ReactGA from 'react-ga';\nimport Dashboard from './Dashboard.js';\nimport Flights from './Flights.js';\nimport Schedule from \"./Schedule.js\";\nimport Add from \"./Add.js\";\nimport Login from \"./Login.js\";\nimport Personnel from \"./Personnel.js\";\nimport Overlay from './Overlay.js';\nimport './App.css';\nimport DASHBOARD_LOGO from './img/dashboard.png';\nimport DASHBOARD_ACTIVE_LOGO from './img/Dashboard_active.png';\nimport FLIGHTS_LOGO from './img/Flights.png';\nimport FLIGHTS_ACTIVE_LOGO from './img/Flights_active.png';\nimport SCHEDULE_LOGO from './img/calendar.png';\nimport SCHEDULE_ACTIVE_LOGO from './img/calendar_blue.png';\nimport ADD_LOGO from './img/add.png';\nimport ADD_ACTIVE_LOGO from './img/add_blue.png';\nimport LOGOUT_LOGO from './img/personnel.png';\nimport LOGOUT_ACTIVE_LOGO from './img/personnel_active.png';\nimport firebase from './Firebase.js';\nimport ErrorPage from './ErrorPage.js';\nconst navigationTabs = [\"Dashboard\", \"Daily Flying Order\", \"Availability\", \"Add\", \"Personnel\"];\nconst logos = {\n  \"Dashboard\": DASHBOARD_LOGO,\n  \"Daily Flying Order\": FLIGHTS_LOGO,\n  \"Availability\": SCHEDULE_LOGO,\n  \"Add\": ADD_LOGO,\n  \"Personnel\": LOGOUT_LOGO\n};\nconst activelogos = {\n  \"Dashboard\": DASHBOARD_ACTIVE_LOGO,\n  \"Daily Flying Order\": FLIGHTS_ACTIVE_LOGO,\n  \"Availability\": SCHEDULE_ACTIVE_LOGO,\n  \"Add\": ADD_ACTIVE_LOGO,\n  \"Personnel\": LOGOUT_ACTIVE_LOGO\n};\n\nwindow.onerror = error => {\n  this.setState({\n    hasError: true\n  });\n  console.log(\"ERROR: \", error);\n};\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Home');\n}\n\nfunction Header(props) {\n  var title = props.activePage === 'Dashboard' ? 'Hi, ' + props.user.split(\" \")[0] : props.activePage;\n  return React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, title + (props.addTab === \"\" ? \"\" : \" \" + props.addTab));\n}\n\nfunction NavBarTab(props) {\n  return React.createElement(\"div\", {\n    className: \"navbar-tab-container\",\n    onClick: props.onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"navBarTab\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"icon\",\n    src: props.icon,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"navbar-tab-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: props.active ? 'active-navbar-tab' : '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, props.tabName)));\n}\n\nfunction VerifyEmail() {\n  return React.createElement(\"div\", {\n    className: \"verify\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    id: \"verifyIcon\",\n    src: require('./img/mail.png'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    id: \"verifyMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Please verify your email\"));\n}\n\nfunction PendingApproval() {\n  return React.createElement(\"div\", {\n    className: \"verify\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    id: \"verifyIcon\",\n    src: require('./img/approval.png'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    id: \"verifyMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Awaiting CO approval\"));\n}\n\nclass NavBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n\n  changeTab(tabName) {\n    this.props.changeTab(tabName);\n    this.props.updateHeader(tabName === \"Add\" ? \"Flight\" : \"\");\n  }\n\n  renderNavBarTab(tabName) {\n    var isActive = this.props.activePage == tabName;\n    const logo = isActive ? activelogos[tabName] : logos[tabName];\n    return React.createElement(NavBarTab, {\n      tabName: tabName,\n      active: isActive,\n      icon: logo,\n      openNavBar: this.props.openNavBar,\n      onClick: () => {\n        this.changeTab(tabName);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    });\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      });\n    }\n\n    var tabs = [];\n    navigationTabs.forEach(tab => {\n      tabs.push(this.renderNavBarTab(tab));\n    });\n    return React.createElement(\"div\", {\n      className: \"navBar\",\n      style: ['Login', 'Verify Email', 'Pending Approval'].includes(this.props.activePage) ? {\n        display: 'none'\n      } : {\n        display: 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"navBarTabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, tabs));\n  }\n\n}\n\nclass AppBody extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleConnectionChange = () => {\n      const condition = navigator.onLine ? 'online' : 'offline';\n\n      if (condition === 'online') {\n        const webPing = setInterval(() => {\n          fetch('//google.com', {\n            mode: 'no-cors'\n          }).then(() => {\n            this.setState({\n              isDisconnected: false\n            }, () => {\n              return clearInterval(webPing);\n            });\n          }).catch(() => this.setState({\n            isDisconnected: true\n          }));\n        }, 2000);\n        return;\n      }\n\n      return this.setState({\n        isDisconnected: true\n      });\n    };\n\n    this.state = {\n      activePage: \"Login\",\n      //activePage: 'Dashboard',\n      user: null,\n      addTab: \"\",\n      flights: [\"Thurs, May 2\", \"Fri, May 4\"],\n      showOverlay: false,\n      hasError: false,\n      isDisconnected: false,\n      allPilotIDs: []\n    };\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n    firebase.auth().onAuthStateChanged(authUser => {\n      console.log(authUser);\n\n      if (authUser && authUser.emailVerified) {\n        firebase.firestore().collection(\"users\").doc(authUser.uid).get().then(querySnapshot => {\n          if (querySnapshot.data()) {\n            var id = querySnapshot.data().id;\n            firebase.firestore().collection(\"pilots\").doc(id).get().then(querySnapshot => {\n              if (querySnapshot) {\n                if (querySnapshot.data().approved && authUser && authUser.emailVerified) {\n                  this.setState({\n                    user: authUser.displayName,\n                    activePage: \"Dashboard\"\n                  });\n                } else {\n                  this.setState({\n                    activePage: \"Pending Approval\"\n                  });\n                }\n              }\n            });\n          }\n        });\n      } else if (authUser && !authUser.emailVerified) {\n        this.setState({\n          activePage: \"Verify Email\"\n        });\n      }\n    });\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).then(function () {// Existing and future Auth states are now persisted in the current\n      // session only. Closing the window would clear any existing state even\n      // if a user forgets to sign out.\n      // ...\n      // New sign-in will be persisted with session persistence.\n    }).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, \": \", errorMessage);\n    }); //Listen for if the user goes offline \n\n    this.handleConnectionChange();\n    window.addEventListener('online', this.handleConnectionChange);\n    window.addEventListener('offline', this.handleConnectionChange); //Gets all pilot ID's \n    //TODO: Perhaps could be moved to Add\n\n    this.firebaseGetAllPilotIDs();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('online', this.handleConnectionChange);\n    window.removeEventListener('offline', this.handleConnectionChange);\n  }\n\n  renderNavBar() {\n    return React.createElement(NavBar, {\n      activePage: this.state.activePage,\n      navTabs: navigationTabs,\n      changeTab: tabName => {\n        this.changeTab(tabName);\n      },\n      updateHeader: title => {\n        this.updateHeader(title);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    });\n  }\n\n  renderHeader() {\n    return React.createElement(Header, {\n      activePage: this.state.activePage,\n      addTab: this.state.addTab,\n      user: this.state.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    });\n  }\n\n  renderOfflineError() {\n    return React.createElement(\"div\", {\n      className: \"alert\",\n      style: {\n        display: this.state.isDisconnected ? 'block' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"closebtn\",\n      onClick: e => {\n        e.target.parentElement.style.display = 'none';\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"\\xD7\"), \"Internet offline. Please try again later.\");\n  }\n\n  firebaseGetAllPilotIDs() {\n    var pilots = [];\n    firebase.firestore().collection(\"pilots\").get().then(querySnapshot => {\n      querySnapshot.forEach(pilot => {\n        if (pilot.data().displayName != null) {\n          pilots.push(pilot.id);\n        }\n      });\n      this.setState({\n        allPilotIDs: pilots\n      });\n    }).catch(function (error) {\n      console.log(\"Error getting all pilots: \", error);\n    });\n  }\n\n  updateHeader(title) {\n    this.setState({\n      addTab: title\n    });\n  }\n\n  renderOverlay() {\n    var content = \"\";\n\n    if (this.state.showOverlay) {\n      content = React.createElement(Overlay, {\n        event: this.state.overlayEvent,\n        id: this.state.overlayId,\n        onClose: () => {\n          this.toggleOverlay('', '');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      });\n    }\n\n    return content;\n  }\n\n  shouldComponentUpdate(nextState) {\n    return this.state.activePage !== nextState.activePage;\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  toggleOverlay(event, id) {\n    const currentState = this.state.showOverlay;\n    this.setState({\n      showOverlay: !currentState,\n      overlayEvent: event,\n      overlayId: id\n    });\n  }\n\n  changeTab(tabName) {\n    this.setState({\n      activePage: tabName\n    });\n  }\n\n  renderContent(tabName) {\n    switch (tabName) {\n      case 'Dashboard':\n        return React.createElement(Dashboard, {\n          flights: this.state.flights,\n          toggleOverlay: (type, id) => {\n            this.toggleOverlay(type, id);\n          },\n          name: this.state.user,\n          changeTab: () => {\n            this.changeTab(\"Add\");\n          },\n          activeUser: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        });\n\n      case 'Daily Flying Order':\n        return React.createElement(Flights, {\n          toggleOverlay: id => {\n            this.toggleOverlay('flight', id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        });\n\n      case \"Availability\":\n        return React.createElement(Schedule, {\n          toggleOverlay: (event, id) => {\n            this.toggleOverlay(event, id);\n          },\n          user: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        });\n\n      case \"Add\":\n        return React.createElement(Add, {\n          updateHeader: title => {\n            this.updateHeader(title);\n          },\n          activeUser: this.state.user,\n          allPilotIDs: this.state.allPilotIDs,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        });\n\n      case \"Login\":\n        return React.createElement(Login, {\n          VerifyEmail: VerifyEmail,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        });\n\n      case \"Personnel\":\n        return React.createElement(Personnel, {\n          name: this.state.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        });\n\n      case \"Verify Email\":\n        return React.createElement(VerifyEmail, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        });\n\n      case \"Pending Approval\":\n        return React.createElement(PendingApproval, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        });\n\n      default:\n        return React.createElement(Dashboard, {\n          flights: this.state.flights,\n          toggleOverlay: id => {\n            this.toggleOverlay('flight', id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        });\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, this.renderOfflineError(), this.renderOverlay(), React.createElement(\"div\", {\n      className: \"wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, this.renderHeader(), React.createElement(\"button\", {\n      id: \"install\",\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, \"Install App\")), this.renderNavBar(), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, this.renderContent(this.state.activePage))));\n  }\n\n}\n\nfunction App() {\n  return React.createElement(AppBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339\n    },\n    __self: this\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jenny/Desktop/scheduler/src/App.js"],"names":["React","ReactGA","Dashboard","Flights","Schedule","Add","Login","Personnel","Overlay","DASHBOARD_LOGO","DASHBOARD_ACTIVE_LOGO","FLIGHTS_LOGO","FLIGHTS_ACTIVE_LOGO","SCHEDULE_LOGO","SCHEDULE_ACTIVE_LOGO","ADD_LOGO","ADD_ACTIVE_LOGO","LOGOUT_LOGO","LOGOUT_ACTIVE_LOGO","firebase","ErrorPage","navigationTabs","logos","activelogos","window","onerror","error","setState","hasError","console","log","initializeReactGA","initialize","pageview","Header","props","title","activePage","user","split","addTab","NavBarTab","onClick","icon","active","tabName","VerifyEmail","require","PendingApproval","NavBar","Component","constructor","state","changeTab","updateHeader","renderNavBarTab","isActive","logo","openNavBar","componentDidCatch","info","render","tabs","forEach","tab","push","includes","display","AppBody","handleConnectionChange","condition","navigator","onLine","webPing","setInterval","fetch","mode","then","isDisconnected","clearInterval","catch","flights","showOverlay","allPilotIDs","componentDidMount","auth","onAuthStateChanged","authUser","emailVerified","firestore","collection","doc","uid","get","querySnapshot","data","id","approved","displayName","setPersistence","Auth","Persistence","SESSION","errorCode","code","errorMessage","message","addEventListener","firebaseGetAllPilotIDs","componentWillUnmount","removeEventListener","renderNavBar","renderHeader","renderOfflineError","e","target","parentElement","style","pilots","pilot","renderOverlay","content","overlayEvent","overlayId","toggleOverlay","shouldComponentUpdate","nextState","event","currentState","renderContent","type","App"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactGA from 'react-ga';\nimport Dashboard from './Dashboard.js';\nimport Flights from './Flights.js';\nimport Schedule from \"./Schedule.js\";\nimport Add from \"./Add.js\";\nimport Login from \"./Login.js\";\nimport Personnel from \"./Personnel.js\";\nimport Overlay from './Overlay.js';\nimport './App.css';\n\nimport DASHBOARD_LOGO from './img/dashboard.png'\nimport DASHBOARD_ACTIVE_LOGO from './img/Dashboard_active.png'\nimport FLIGHTS_LOGO from './img/Flights.png';\nimport FLIGHTS_ACTIVE_LOGO from './img/Flights_active.png';\nimport SCHEDULE_LOGO from './img/calendar.png';\nimport SCHEDULE_ACTIVE_LOGO from './img/calendar_blue.png';\nimport ADD_LOGO from './img/add.png';\nimport ADD_ACTIVE_LOGO from './img/add_blue.png';\nimport LOGOUT_LOGO from './img/personnel.png';\nimport LOGOUT_ACTIVE_LOGO from './img/personnel_active.png';\nimport firebase from './Firebase.js';\nimport ErrorPage from './ErrorPage.js';\n\nconst navigationTabs = [\"Dashboard\", \"Daily Flying Order\", \"Availability\", \"Add\", \"Personnel\"];\nconst logos = {\"Dashboard\": DASHBOARD_LOGO, \"Daily Flying Order\": FLIGHTS_LOGO, \"Availability\": SCHEDULE_LOGO, \"Add\": ADD_LOGO, \"Personnel\": LOGOUT_LOGO}\nconst activelogos = {\"Dashboard\": DASHBOARD_ACTIVE_LOGO, \"Daily Flying Order\": FLIGHTS_ACTIVE_LOGO, \"Availability\": SCHEDULE_ACTIVE_LOGO, \"Add\": ADD_ACTIVE_LOGO, \"Personnel\": LOGOUT_ACTIVE_LOGO}\n\nwindow.onerror = ((error)=>{this.setState({ hasError: true }); console.log(\"ERROR: \", error)});\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Home');\n}\n\nfunction Header(props) {\n  var title = props.activePage === 'Dashboard' ? 'Hi, '+props.user.split(\" \")[0] : props.activePage\n  return <h1>{title + (props.addTab === \"\" ? \"\" : \" \"+props.addTab)}</h1>\n}\n\nfunction NavBarTab(props) {\n    return (\n      <div className='navbar-tab-container' onClick={props.onClick}>\n        <div className='navBarTab'>\n          <img className='icon' src={props.icon} alt=\"\"/>\n        </div>\n        <div className='navbar-tab-text'>\n          <p className={props.active ? 'active-navbar-tab' : ''}>{props.tabName}</p>\n        </div>\n      </div>\n    )\n}\n\n\nfunction VerifyEmail() {\n  return (\n      <div className=\"verify\">\n          <img id=\"verifyIcon\" src={ require('./img/mail.png') } />\n          <h3 id=\"verifyMessage\">Please verify your email</h3>\n      </div> \n  )\n}\n\nfunction PendingApproval() {\n  return (\n      <div className=\"verify\">\n          <img id=\"verifyIcon\" src={ require('./img/approval.png') } />\n          <h3 id=\"verifyMessage\">Awaiting CO approval</h3>\n      </div> \n  )\n}\n\n\nclass NavBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state={hasError: false,}\n  }\n\n  changeTab(tabName) {\n    this.props.changeTab(tabName); \n    this.props.updateHeader(tabName===\"Add\" ? \"Flight\" : \"\")\n  }\n\n  renderNavBarTab(tabName) {\n    var isActive = this.props.activePage == tabName;\n    const logo = isActive ? activelogos[tabName] : logos[tabName];\n    return <NavBarTab tabName={tabName} \n            active={isActive}\n            icon={logo} openNavBar={this.props.openNavBar} onClick={() => {this.changeTab(tabName)}}/>\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true });\n    console.log(error, info);\n  }\n\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorPage/>\n    }\n    var tabs = [];\n    navigationTabs.forEach(tab => {\n      tabs.push(this.renderNavBarTab(tab));\n    }) \n    return (\n      <div className=\"navBar\" style={['Login', 'Verify Email', 'Pending Approval'].includes(this.props.activePage) ?{display: 'none'}: {display: 'block'}}>\n        <div className='navBarTabs'>\n          {tabs}\n        </div>\n      </div>\n    );\n  }\n    \n}\n\nclass AppBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activePage: \"Login\",\n      //activePage: 'Dashboard',\n      user: null,\n      addTab: \"\",\n      flights: [\"Thurs, May 2\", \"Fri, May 4\"],\n      showOverlay: false,\n      hasError: false,\n      isDisconnected: false,\n      allPilotIDs: [],\n    };\n  }\n\n  componentDidMount() {\n    initializeReactGA();\n    firebase.auth().onAuthStateChanged(\n      authUser => {\n        console.log(authUser);\n        if (authUser && authUser.emailVerified) {\n        firebase.firestore().collection(\"users\").doc(authUser.uid).get().then((querySnapshot) => {\n          if (querySnapshot.data()) {\n            var id = querySnapshot.data().id;\n            firebase.firestore().collection(\"pilots\").doc(id).get().then((querySnapshot) => {\n              if (querySnapshot) {\n                if (querySnapshot.data().approved && authUser && authUser.emailVerified) {\n                    this.setState({ user: authUser.displayName, activePage: \"Dashboard\"})\n                }\n                else {\n                  this.setState({ activePage: \"Pending Approval\" });\n                }\n              }\n            })\n\n          }\n        })\n      }\n      else if (authUser && !authUser.emailVerified) {\n          this.setState({ activePage: \"Verify Email\" });\n        }\n      },\n    );\n    \n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION)\n  .then(function() {\n    // Existing and future Auth states are now persisted in the current\n    // session only. Closing the window would clear any existing state even\n    // if a user forgets to sign out.\n    // ...\n    // New sign-in will be persisted with session persistence.\n  })\n  .catch(function(error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n    console.log(errorCode, \": \", errorMessage);\n  });\n\n    //Listen for if the user goes offline \n    this.handleConnectionChange();\n    window.addEventListener('online', this.handleConnectionChange);\n    window.addEventListener('offline', this.handleConnectionChange);\n\n    //Gets all pilot ID's \n    //TODO: Perhaps could be moved to Add\n    this.firebaseGetAllPilotIDs();\n\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('online', this.handleConnectionChange);\n    window.removeEventListener('offline', this.handleConnectionChange);\n  }\n\n  handleConnectionChange = () => {\n    const condition = navigator.onLine ? 'online' : 'offline';\n    if (condition === 'online') {\n      const webPing = setInterval(\n        () => {\n          fetch('//google.com', {\n            mode: 'no-cors',\n            })\n          .then(() => {\n            this.setState({ isDisconnected: false }, () => {\n              return clearInterval(webPing)\n            });\n          }).catch(() => this.setState({ isDisconnected: true }) )\n        }, 2000);\n      return;\n    }\n\n    return this.setState({ isDisconnected: true });\n  }\n\n  renderNavBar() {\n    return <NavBar\n      activePage={this.state.activePage} \n      navTabs={navigationTabs} \n      changeTab={(tabName)=>{this.changeTab(tabName)}}\n      updateHeader={(title)=>{this.updateHeader(title)}}/>\n  }\n\n  renderHeader() {\n    return <Header activePage = {this.state.activePage} addTab={this.state.addTab} user={this.state.user}/>\n  }\n\n  renderOfflineError() {\n    return (\n      <div className=\"alert\" style={{display: this.state.isDisconnected ? 'block' : 'none'}}>\n        <span className=\"closebtn\" onClick={(e)=> {e.target.parentElement.style.display='none';}}>&times;</span> \n        Internet offline. Please try again later. \n      </div>\n    )\n  }\n\n  firebaseGetAllPilotIDs() {\n    var pilots = [];\n    firebase.firestore().collection(\"pilots\")\n        .get()\n        .then((querySnapshot) => {\n            querySnapshot.forEach((pilot)=> {\n                if (pilot.data().displayName != null) {\n                    pilots.push(pilot.id)\n                }\n            })\n            this.setState({allPilotIDs: pilots})\n        })\n        .catch(function(error) {\n            console.log(\"Error getting all pilots: \", error);\n        });\n\n}\n\n  updateHeader(title) {\n    this.setState({addTab: title});\n  }\n\n  renderOverlay() {\n    var content = \"\";\n    if (this.state.showOverlay) {\n      content = <Overlay event={this.state.overlayEvent} id={this.state.overlayId} onClose={()=>{this.toggleOverlay('', '');}}/>\n    }\n    \n    return content;\n  }\n\n  shouldComponentUpdate(nextState) {\n    return this.state.activePage !== nextState.activePage;\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true });\n    console.log(error, info);\n  }\n\n  toggleOverlay(event, id) {\n    const currentState = this.state.showOverlay;\n    this.setState({showOverlay: !currentState, overlayEvent: event, overlayId: id});\n  }\n\n  changeTab(tabName) {\n    this.setState({activePage: tabName});\n  }\n\n  renderContent(tabName) {\n    switch(tabName) {\n      case 'Dashboard': \n        return <Dashboard flights={this.state.flights} toggleOverlay={(type,id)=>{this.toggleOverlay(type, id)}} name={this.state.user} changeTab={()=>{this.changeTab(\"Add\")}} activeUser={this.state.user}/>\n      case 'Daily Flying Order': \n        return <Flights  toggleOverlay={(id)=>{this.toggleOverlay('flight', id)}}/>\n      case \"Availability\": \n        return <Schedule toggleOverlay={(event, id)=>{this.toggleOverlay(event, id)}} user={this.state.user}/>\n      case \"Add\": \n        return <Add updateHeader={(title)=>{this.updateHeader(title)}} activeUser={this.state.user} allPilotIDs={this.state.allPilotIDs}/>\n      case \"Login\": \n        return <Login VerifyEmail={VerifyEmail}/>\n      case \"Personnel\": \n        return <Personnel name={this.state.user}/>\n      case \"Verify Email\":\n        return <VerifyEmail/>\n      case \"Pending Approval\":\n        return <PendingApproval/>\n      default: \n        return <Dashboard flights={this.state.flights} toggleOverlay={(id)=>{this.toggleOverlay('flight', id)}}/>\n    }\n  }\n\n  \n  render() {\n\n    if (this.state.hasError) {\n      return <ErrorPage/>\n    }\n    return (\n      <div className=\"App\">\n        {this.renderOfflineError()}\n        {this.renderOverlay()}\n        <div className=\"wrapper\">\n          <div className=\"header\">\n            \n            {this.renderHeader()}\n            <button id=\"install\" hidden>Install App</button>\n          </div>\n            {this.renderNavBar()} \n          <div className=\"content\"> \n            {this.renderContent(this.state.activePage)} \n          </div>\n        </div>   \n      </div>\n    );\n  };\n}\n\nfunction App() {\n  \n  return (\n    <AppBody/>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}