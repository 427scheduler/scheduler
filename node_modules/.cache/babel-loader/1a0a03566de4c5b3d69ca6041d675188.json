{"ast":null,"code":"var _jsxFileName = \"/Users/jenny/Desktop/SOAS/scheduler/src/Flights.js\";\nimport React from 'react';\nimport \"./Flights.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport firebase from \"./Firebase.js\";\nimport { firebaseCreateDate } from \"./FirebaseHelper.js\";\nimport HELI_BLUE from './img/heli-blue-front.jpeg';\nimport HELI_DARK from './img/heli-dark-front.jpeg';\nimport HELI_LIGHT from './img/heli-light-front.jpeg';\nimport ErrorPage from './ErrorPage.js';\nimport ReactGA from 'react-ga';\nimport Export from './Export.js';\nconst headers = ['ETD', 'ETR', 'AC', 'CREW', 'MISSION', 'DETAILS', 'CONFIG', 'SQ PRI', 'DCO'];\nconst menu_timeout_length = 200;\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\nvar yyyy = today.getFullYear();\ntoday = mm + '/' + dd + '/' + yyyy;\n\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-108277898-5');\n  ReactGA.pageview('/Flights');\n}\n/*\nfunction date(curDate) {\n    //var today = new Date();\n    var weekday = curDate.getDay();\n    var day = curDate.getDate();\n    var month = curDate.getMonth();\n    var year = curDate.getFullYear();\n    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\n    return (\n        <div className='flight-date'>\n            <h2>{days[weekday] +\", \"+months[month]+\" \"+day+\", \"+year}</h2>\n        </div>\n    )\n}*/\n\n\nfunction RenderDate(props) {\n  var weekday = props.date.getDay();\n  var day = props.date.getDate();\n  var month = props.date.getMonth();\n  var year = props.date.getFullYear();\n  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\n  if (props.view === 'sm-view') {\n    return React.createElement(\"div\", {\n      className: 'flight-date sm-view',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, month + \" / \" + day + \" / \" + year));\n  }\n\n  return React.createElement(\"div\", {\n    className: 'flight-date lg-view',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, days[weekday] + \", \" + months[month] + \" \" + day + \", \" + year));\n}\n\nfunction RenderMore(props) {\n  return React.createElement(\"div\", {\n    className: \"more\" + (props.open ? \" show-more-menu\" : ''),\n    onMouseEnter: props.showMenu,\n    onMouseLeave: props.hideMenu,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"more-btn\",\n    className: \"more-btn\",\n    \"aria-hidden\": !props.open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"more-dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"more-dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"more-dot\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"more-menu\",\n    onMouseEnter: props.enterMenuOpt,\n    onMouseLeave: props.leaveMenuOpt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"more-menu-caret\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"more-menu-caret-outer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"more-menu-caret-inner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"ul\", {\n    className: \"more-menu-items\",\n    tabindex: \"-1\",\n    role: \"menu\",\n    \"aria-labelledby\": \"more-btn\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"more-menu-item\",\n    role: \"presentation\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"more-menu-btn\",\n    role: \"menuitem\",\n    onClick: () => {\n      props.hideMenu();\n      props.prepareForExport();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Export\")), React.createElement(\"li\", {\n    className: \"more-menu-item\",\n    role: \"presentation\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"more-menu-btn\",\n    role: \"menuitem\",\n    onClick: props.hideMenu,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"See Contacts\")))));\n}\n\nfunction RenderFlightDayHeader(props) {\n  var displayDate = new Date(props.date);\n  var curDate = new Date();\n  var diff = Math.round((displayDate.getTime() - curDate.getTime()) / (24 * 60 * 60 * 1000)); // Only show flights for last 3 days to the next 2 weeks\n\n  var disableLeft = diff === -3;\n  var disableRight = diff === 14;\n  return React.createElement(\"div\", {\n    className: \"flight-day-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: 'date-btn' + (disableLeft ? ' disabled' : ''),\n    src: LEFT_BTN,\n    onClick: () => {\n      props.changeDate(disableLeft ? 0 : -1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), React.createElement(RenderDate, {\n    date: displayDate,\n    view: \"lg-view\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(RenderDate, {\n    date: displayDate,\n    view: \"sm-view\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    className: 'date-btn' + (disableRight ? ' disabled' : ''),\n    src: RIGHT_BTN,\n    onClick: () => {\n      props.changeDate(disableRight ? 0 : 1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(RenderMore, {\n    open: props.open,\n    showMenu: props.showMenu,\n    hideMenu: props.hideMenu,\n    enterMenuOpt: props.enterMenuOpt,\n    leaveMenuOpt: props.leaveMenuOpt,\n    prepareForExport: props.prepareForExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }));\n}\n\nfunction parseName(name) {\n  if (name != \"\") {\n    return name[1].toUpperCase() + name.slice(2);\n  }\n\n  return \"\";\n}\n\nfunction RenderFlightDay(props) {\n  var tableHeaders = [];\n  headers.forEach(title => {\n    tableHeaders.push(React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, title));\n  });\n  var tableRows = [];\n  var meals = 0;\n\n  if (props.data != null) {\n    props.data.forEach(entry => {\n      if (props.test) {\n        var d = entry;\n      } else {\n        var d = entry.data();\n      }\n\n      if (parseInt(d.endTime) >= 2000) {\n        //Meals will be provided \n        meals += 2;\n        meals += d.fe != \"\" ? 1 : 0;\n        meals += d.crew != \"\" ? 1 : 0;\n      }\n\n      var fe = d.fe != '' ? ' | ' + parseName(d.fe) : '';\n      var crew = d.crew != '' ? ' | ' + parseName(d.crew) : '';\n      var r = [React.createElement(\"td\", {\n        className: \"etd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, d.startTime), React.createElement(\"td\", {\n        className: \"etr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, d.endTime), React.createElement(\"td\", {\n        className: \"ac\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ac-wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, d.ac)), React.createElement(\"td\", {\n        className: \"crew\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, parseName(d.captain) + ' | ' + parseName(d.fo) + fe + crew), React.createElement(\"td\", {\n        className: \"mission\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, d.mission), React.createElement(\"td\", {\n        className: \"details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, d.details), React.createElement(\"td\", {\n        className: \"config\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, d.config), React.createElement(\"td\", {\n        className: \"pri\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, d.pri + ' SOA'), React.createElement(\"td\", {\n        className: \"dco\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dot \" + d.dco + \"status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }))];\n      var startTime = parseInt(d.startTime);\n      tableRows.push(React.createElement(\"tr\", {\n        className: props.curTime.getDate() == props.date.getDate() && startTime < props.curTime.getHours() * 100 + props.curTime.getMinutes() ? 'expired' : '',\n        onClick: props.toggleOverlay.bind(this, entry.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, r));\n    });\n    props.setMeals(meals);\n    return React.createElement(\"div\", {\n      className: \"flight-day\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, tableHeaders), tableRows));\n  } else {\n    return React.createElement(\"div\", {\n      className: \"noFlights\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"noFlightsContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"noFlightsLogo\",\n      src: HELI_DARK,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"noFlightsLogo\",\n      src: HELI_BLUE,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"noFlightsLogo\",\n      src: HELI_LIGHT,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"noFlightsText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"No flights today\")));\n  }\n}\n\nfunction getRandom(x, y) {\n  var min = Math.ceil(x);\n  var max = Math.floor(y);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction RenderFlightDayBox(props) {\n  return React.createElement(\"div\", {\n    className: \"flight-day-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(RenderFlightDayHeader, {\n    date: props.date,\n    changeDate: offset => {\n      props.changeDate(offset);\n    },\n    open: props.open,\n    showMenu: props.showMenu,\n    hideMenu: props.hideMenu,\n    enterMenuOpt: props.enterMenuOpt,\n    leaveMenuOpt: props.leaveMenuOpt,\n    prepareForExport: props.prepareForExport,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }), React.createElement(RenderFlightDay, {\n    date: props.date,\n    test: props.test,\n    setMeals: m => {\n      props.setMeals(m);\n    },\n    data: props.data,\n    curTime: props.curTime,\n    toggleOverlay: id => {\n      props.toggleOverlay(id);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }));\n}\n\nfunction RenderInfoBox(props) {\n  return React.createElement(\"div\", {\n    className: \"info-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"info-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, props.title)), React.createElement(\"div\", {\n    className: \"info-content\",\n    contentEditable: props.edit,\n    suppressContentEditableWarning: true,\n    onBlur: event => {\n      props.updateDayStats(props.id, event.target.textContent);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, props.value[props.id])));\n}\n\nfunction RenderInfoBar(props) {\n  const default_info = {\n    \"EVENING TWILIGHT\": props.twilightciv,\n    \"SNAGS DESK SGT\": props.desksgtday,\n    \"DUTY MTP\": props.mtp,\n    \"FDO\": props.fdoday,\n    \"DUTY GROUND RUN\": props.groundrun\n  };\n  var boxes = [];\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"EVENING TWILIGHT\",\n    value: props,\n    id: 'twilightciv',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    edit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"SNAGS DESK SGT\",\n    value: props,\n    id: 'desksgtday',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    edit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"DUTY MTP\",\n    value: props,\n    id: 'mtp',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    edit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"FDO\",\n    value: props,\n    id: 'fdoday',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    edit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"DUTY GROUND RUN\",\n    value: props,\n    id: 'groundrun',\n    updateDayStats: (f, e) => {\n      props.updateDayStats(f, e);\n    },\n    edit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }));\n  boxes.push(React.createElement(RenderInfoBox, {\n    title: \"MEALS\",\n    value: {\n      'meals': props.meals\n    },\n    id: 'meals',\n    edit: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }));\n  return React.createElement(\"div\", {\n    className: \"info-bar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"time-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, \"CURRENT TIME\")), React.createElement(\"div\", {\n    className: \"time\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, (props.curTime.getHours() < 10 ? \"0\" : \"\") + props.curTime.getHours() + ':' + (props.curTime.getMinutes() < 10 ? \"0\" : \"\") + props.curTime.getMinutes())), boxes);\n}\n\nclass Flights extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.enterMenuOpt = () => {\n      this.setState({\n        mouseOverMenuOpt: true\n      });\n    };\n\n    this.leaveMenuOpt = () => {\n      setTimeout(() => {\n        this.setState({\n          mouseOverMenuOpt: false\n        });\n      }, menu_timeout_length);\n    };\n\n    this.state = {\n      curTime: new Date(),\n      date: new Date(),\n      data: null,\n      //testData: generateTestData(),\n      twlightnaut: \"N/A\",\n      twilightciv: \"N/A\",\n      desksgtday: \"N/A\",\n      desksgnight: \"N/A\",\n      mtp: \"N/A\",\n      fdoday: \"N/A\",\n      fdonight: \"N/A\",\n      meals: 0,\n      groundrun: \"N/A\",\n      hasError: false,\n      mouseOverMenu: false,\n      mouseOverMenuOpt: false\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.getData(new Date());\n    initializeReactGA();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    this.setState({\n      curTime: new Date()\n    });\n  }\n\n  showMenu() {\n    this.setState({\n      mouseOverMenu: true\n    });\n  }\n\n  hideMenu() {\n    setTimeout(() => {\n      this.setState({\n        mouseOverMenu: false\n      });\n    }, menu_timeout_length);\n  }\n\n  prepareForExport() {\n    //Get all ID's of flights happening today \n    var ids = [];\n\n    if (this.state.data.docs.length > 0) {\n      this.state.data.docs.forEach(entry => {\n        ids.push(entry.id);\n      });\n    } //Get all info for the day\n\n\n    var dayInfo = [this.state.date, this.state.twlightnaut, this.state.twilightciv, this.state.desksgtday, this.state.desksgnight, this.state.mtp, this.state.fdoday, this.state.fdonight, this.state.meals, this.state.groundrun]; //Export \n\n    Export(ids, dayInfo);\n  }\n\n  updateDayStats(field, newValue) {\n    if (this.state[field] !== newValue) {\n      this.setState({\n        [field]: newValue\n      });\n      var date = this.state.date.getFullYear() + '-' + (this.state.date.getMonth() < 9 ? '0' : '') + (this.state.date.getMonth() + 1) + '-' + (this.state.date.getDate() < 10 ? '0' : '') + this.state.date.getDate();\n      firebase.firestore().collection(\"dates\").doc(date).set({\n        [field]: newValue\n      }, {\n        merge: true\n      }).then(function () {\n        console.log(\"Document successfully written!\");\n      }).catch(function (error) {\n        console.error(\"Error writing document: \", error);\n      });\n    }\n  }\n\n  getData(newDate) {\n    var date = newDate.getFullYear() + '-' + (newDate.getMonth() < 9 ? '0' : '') + (newDate.getMonth() + 1) + '-' + (newDate.getDate() < 10 ? '0' : '') + newDate.getDate();\n    console.log(\"DATE: \" + date); //get new data\n\n    firebase.firestore().collection(\"events\").where('type', '==', 'flight').where('date', '==', date).where('startTime', '>=', '0000').orderBy(\"startTime\").get().then(querySnapshot => {\n      if (!querySnapshot.empty) {\n        this.setState({\n          data: querySnapshot\n        });\n      } else {\n        console.log(\"Document doesn't exist\");\n        this.setState({\n          data: null\n        });\n      }\n\n      ;\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n    firebase.firestore().collection(\"dates\").doc(date).get().then(querySnapshot => {\n      var d = querySnapshot.data();\n      this.setState({\n        //TODO: show civil and day/night\n        twilightciv: d.twilightciv != null ? d.twilightciv : \"N/A\",\n        twilightnaut: d.twilightnaut != null ? d.twilightnaut : \"N/A\",\n        desksgtday: d.desksgtday != null ? d.desksgtday : \"N/A\",\n        desksgtnight: d.desksgtnight != null ? d.desksgtnight : \"N/A\",\n        mtp: d.mtp != null ? d.mtp : \"N/A\",\n        fdoday: d.fdoday != null ? d.fdoday : \"N/A\",\n        fdonight: d.fdonight != null ? d.fdonight : \"N/A\",\n        groundrun: d.groundrun != null ? d.groundrun : \"N/A\"\n      });\n    }).catch(function (error) {\n      firebaseCreateDate(date);\n    });\n  }\n\n  changeDate(offset) {\n    if (offset != 0) {\n      var newDate = new Date(this.state.date);\n      newDate.setDate(newDate.getDate() + offset);\n      this.setState({\n        date: new Date(newDate)\n      });\n      this.getData(newDate);\n    }\n  }\n\n  setMeals(m) {\n    if (m != this.state.meals && m >= 0) {\n      this.setState({\n        meals: m\n      });\n    }\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({\n      hasError: true\n    });\n    console.log(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return React.createElement(ErrorPage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }, React.createElement(RenderFlightDayBox, {\n      date: this.state.date,\n      data: this.state.data,\n      test: this.state.data == null,\n      curTime: this.state.curTime,\n      toggleOverlay: id => {\n        this.props.toggleOverlay(id);\n      },\n      changeDate: offset => {\n        this.changeDate(offset);\n      },\n      setMeals: m => {\n        this.setMeals(m);\n      },\n      open: this.state.mouseOverMenu || this.state.mouseOverMenuOpt,\n      showMenu: this.showMenu.bind(this),\n      hideMenu: this.hideMenu.bind(this),\n      enterMenuOpt: this.enterMenuOpt.bind(this),\n      leaveMenuOpt: this.leaveMenuOpt.bind(this),\n      prepareForExport: this.prepareForExport.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }), React.createElement(RenderInfoBar, {\n      date: this.state.date,\n      curTime: this.state.curTime,\n      updateDayStats: (f, e) => {\n        this.updateDayStats(f, e);\n      },\n      twilightciv: this.state.twilightciv,\n      desksgtday: this.state.desksgtday,\n      mtp: this.state.mtp,\n      fdoday: this.state.fdoday,\n      groundrun: this.state.groundrun,\n      meals: this.state.meals,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Flights;","map":{"version":3,"sources":["/Users/jenny/Desktop/SOAS/scheduler/src/Flights.js"],"names":["React","RIGHT_BTN","LEFT_BTN","firebase","firebaseCreateDate","HELI_BLUE","HELI_DARK","HELI_LIGHT","ErrorPage","ReactGA","Export","headers","menu_timeout_length","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","initializeReactGA","initialize","pageview","RenderDate","props","weekday","date","getDay","day","month","year","days","months","view","RenderMore","open","showMenu","hideMenu","enterMenuOpt","leaveMenuOpt","prepareForExport","RenderFlightDayHeader","displayDate","curDate","diff","Math","round","getTime","disableLeft","disableRight","changeDate","parseName","name","toUpperCase","slice","RenderFlightDay","tableHeaders","forEach","title","push","tableRows","meals","data","entry","test","d","parseInt","endTime","fe","crew","r","startTime","ac","captain","fo","mission","details","config","pri","dco","curTime","getHours","getMinutes","toggleOverlay","bind","id","setMeals","getRandom","x","y","min","ceil","max","floor","random","RenderFlightDayBox","offset","m","RenderInfoBox","edit","event","updateDayStats","target","textContent","value","RenderInfoBar","default_info","twilightciv","desksgtday","mtp","fdoday","groundrun","boxes","f","e","Flights","Component","constructor","setState","mouseOverMenuOpt","setTimeout","state","twlightnaut","desksgnight","fdonight","hasError","mouseOverMenu","componentDidMount","timerID","setInterval","tick","getData","componentWillUnmount","clearInterval","ids","docs","length","dayInfo","field","newValue","firestore","collection","doc","set","merge","then","console","log","catch","error","newDate","where","orderBy","get","querySnapshot","empty","twilightnaut","desksgtnight","setDate","componentDidCatch","info","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./Flights.css\";\nimport RIGHT_BTN from './img/right-arrow.png';\nimport LEFT_BTN from './img/left-arrow.png';\nimport firebase from \"./Firebase.js\";\nimport {firebaseCreateDate} from \"./FirebaseHelper.js\";\nimport HELI_BLUE from './img/heli-blue-front.jpeg';\nimport HELI_DARK from './img/heli-dark-front.jpeg';\nimport HELI_LIGHT from './img/heli-light-front.jpeg';\nimport ErrorPage from './ErrorPage.js';\nimport ReactGA from 'react-ga';\nimport Export from './Export.js';\n\nconst headers = ['ETD', 'ETR', 'AC', 'CREW', 'MISSION', 'DETAILS', 'CONFIG', 'SQ PRI', 'DCO'];\nconst menu_timeout_length = 200;\n\nvar today = new Date();\nvar dd = String(today.getDate()).padStart(2, '0');\nvar mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\nvar yyyy = today.getFullYear();\n\ntoday = mm + '/' + dd + '/' + yyyy;\n\nfunction initializeReactGA() {\n    ReactGA.initialize('UA-108277898-5');\n    ReactGA.pageview('/Flights');\n}\n\n/*\nfunction date(curDate) {\n    //var today = new Date();\n    var weekday = curDate.getDay();\n    var day = curDate.getDate();\n    var month = curDate.getMonth();\n    var year = curDate.getFullYear();\n    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\n    return (\n        <div className='flight-date'>\n            <h2>{days[weekday] +\", \"+months[month]+\" \"+day+\", \"+year}</h2>\n        </div>\n    )\n}*/\n\nfunction RenderDate(props) {\n    var weekday = props.date.getDay();\n    var day = props.date.getDate();\n    var month = props.date.getMonth();\n    var year = props.date.getFullYear();\n    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\n    \n    if (props.view === 'sm-view') {\n        return (\n            <div className={'flight-date sm-view'}>\n                <h2>{month+\" / \"+day+\" / \"+year}</h2>\n            </div>\n        )\n    }\n    return (\n        <div className={'flight-date lg-view'}>\n            <h2>{days[weekday] +\", \"+months[month]+\" \"+day+\", \"+year}</h2>\n        </div>\n    )\n}\n\nfunction RenderMore(props) {\n    return (\n        <div className={\"more\" + (props.open ? \" show-more-menu\" : '')} onMouseEnter={props.showMenu} onMouseLeave={props.hideMenu} >\n        <button id=\"more-btn\" className=\"more-btn\" aria-hidden={!props.open}>\n            <span className=\"more-dot\"></span>\n            <span className=\"more-dot\"></span>\n            <span className=\"more-dot\"></span>\n        </button>\n        <div className=\"more-menu\" onMouseEnter={props.enterMenuOpt} onMouseLeave={props.leaveMenuOpt}>\n            <div className=\"more-menu-caret\">\n                <div className=\"more-menu-caret-outer\"></div>\n                <div className=\"more-menu-caret-inner\"></div>\n            </div>\n            <ul className=\"more-menu-items\" tabindex=\"-1\" role=\"menu\" aria-labelledby=\"more-btn\" aria-hidden=\"true\">\n                <li className=\"more-menu-item\" role=\"presentation\">\n                    <button type=\"button\" className=\"more-menu-btn\" role=\"menuitem\" onClick={() => {props.hideMenu(); props.prepareForExport();}}>Export</button>\n                </li>\n                <li className=\"more-menu-item\" role=\"presentation\">\n                    <button type=\"button\" className=\"more-menu-btn\" role=\"menuitem\" onClick={props.hideMenu}>See Contacts</button>\n                </li>\n            </ul>\n        </div>\n    </div>\n    )\n}\n\nfunction RenderFlightDayHeader(props) {\n    var displayDate = new Date(props.date);\n    var curDate = new Date();\n    var diff = Math.round((displayDate.getTime() - curDate.getTime())/(24*60*60*1000));\n\n    // Only show flights for last 3 days to the next 2 weeks\n    var disableLeft = diff === -3;\n    var disableRight= diff === 14;\n\n    return (\n        <div className=\"flight-day-header\">\n            <img className={'date-btn' + (disableLeft ? ' disabled': '')} src={LEFT_BTN} onClick={()=>{props.changeDate(disableLeft ? 0 : -1)}}></img>\n            <RenderDate date={displayDate} view=\"lg-view\"/>\n            <RenderDate date={displayDate} view=\"sm-view\"/>\n            <img className={'date-btn' + (disableRight ? ' disabled': '')} src={RIGHT_BTN} onClick={()=>{props.changeDate(disableRight ? 0 : 1)}}></img>\n            <RenderMore open={props.open} showMenu={props.showMenu} hideMenu={props.hideMenu} enterMenuOpt={props.enterMenuOpt} leaveMenuOpt={props.leaveMenuOpt} prepareForExport={props.prepareForExport}/>\n        </div>\n    )\n}\n\nfunction parseName(name) {\n    if (name != \"\") {\n        return name[1].toUpperCase() + name.slice(2);\n    }\n    return \"\";\n}\n\n\nfunction RenderFlightDay(props) {\n    var tableHeaders = [];\n    headers.forEach(title => {\n        tableHeaders.push(<th>{title}</th>)\n    });\n    var tableRows = [];\n    var meals = 0;\n    \n    if (props.data != null) {\n        props.data.forEach(entry => {\n        if (props.test) {\n            var d = entry;\n        }\n        else {\n            var d = entry.data();\n        }\n        if (parseInt(d.endTime) >= 2000) {\n            //Meals will be provided \n            meals += 2;\n            meals += d.fe != \"\" ? 1 : 0;\n            meals += d.crew != \"\" ? 1 : 0;\n        }\n        var fe = d.fe != '' ? ' | ' + parseName(d.fe) : '';\n        var crew = d.crew != '' ? ' | ' + parseName(d.crew) : '';\n        var r = [<td className='etd'>{d.startTime}</td>,\n        <td className='etr'>{d.endTime}</td>,\n        <td className='ac'><div className='ac-wrap'>{d.ac}</div></td>,\n        <td className='crew'>{parseName(d.captain) + ' | ' + parseName(d.fo) + fe + crew}</td>,\n        <td className='mission'>{d.mission}</td>,\n        <td className='details'>{d.details}</td>,\n        <td className='config'>{d.config}</td>,\n        <td className='pri'>{d.pri + ' SOA'}</td>,\n        <td className='dco'><div className={\"dot \"+d.dco+\"status\"}></div></td>,\n\n        ];\n        \n        var startTime = parseInt(d.startTime);\n        tableRows.push(<tr className={(props.curTime.getDate() == props.date.getDate() && startTime < props.curTime.getHours()*100+props.curTime.getMinutes()) ? 'expired':''} onClick={props.toggleOverlay.bind(this,entry.id)}>{r}</tr>);\n        })\n        props.setMeals(meals);\n\n        return (\n            <div className=\"flight-day\">\n                <table>\n                    <tr>\n                        {tableHeaders}\n                    </tr>\n                    {tableRows}\n                </table>\n            </div>\n        )\n    }\n    else {\n        return (\n            <div className=\"noFlights\">\n                <div className=\"noFlightsContent\">\n                    <img className=\"noFlightsLogo\" src={HELI_DARK}/>\n                    <img className=\"noFlightsLogo\" src={HELI_BLUE}/>\n                    <img className=\"noFlightsLogo\" src={HELI_LIGHT}/>\n                <hr/>\n                </div>\n                <div className=\"noFlightsText\">\n                    <p>No flights today</p>\n                </div>\n            </div>\n        )\n    }\n    \n}\n\n\nfunction getRandom(x, y) {\n    var min = Math.ceil(x);\n    var max = Math.floor(y);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n\nfunction RenderFlightDayBox(props) {\n    return (\n        <div className=\"flight-day-box\">\n            <RenderFlightDayHeader date={props.date} changeDate={(offset)=>{props.changeDate(offset)}} open={props.open}\n                                    showMenu={props.showMenu}\n                                    hideMenu={props.hideMenu}\n                                    enterMenuOpt={props.enterMenuOpt}\n                                    leaveMenuOpt={props.leaveMenuOpt}\n                                    prepareForExport={props.prepareForExport}/>\n            <RenderFlightDay date={props.date} test={props.test} setMeals={(m)=>{props.setMeals(m)}} data={props.data} curTime={props.curTime} toggleOverlay={(id)=>{props.toggleOverlay(id)}}/>\n        </div>\n    )\n}\n\nfunction RenderInfoBox(props) {\n    return (\n        <div className=\"info-box\">\n            <div className=\"info-title\">\n                <h5>{props.title}</h5>\n            </div>\n            <div className=\"info-content\" contentEditable={props.edit} suppressContentEditableWarning={true} onBlur={(event)=>{props.updateDayStats(props.id, event.target.textContent);}}>\n                <h5>{props.value[props.id]}</h5>\n            </div>\n        </div>\n    )\n}\n\nfunction RenderInfoBar(props) {\n    const default_info = {\"EVENING TWILIGHT\":props.twilightciv, \"SNAGS DESK SGT\": props.desksgtday, \"DUTY MTP\": props.mtp, \"FDO\": props.fdoday, \"DUTY GROUND RUN\": props.groundrun};\n    var boxes = [];\n    boxes.push(<RenderInfoBox title={\"EVENING TWILIGHT\"} value={props} id={'twilightciv'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}} edit={true}/>)\n    boxes.push(<RenderInfoBox title={\"SNAGS DESK SGT\"} value={props} id={'desksgtday'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}} edit={true}/>)\n    boxes.push(<RenderInfoBox title={\"DUTY MTP\"} value={props} id={'mtp'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}} edit={true}/>)\n    boxes.push(<RenderInfoBox title={\"FDO\"} value={props} id={'fdoday'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}} edit={true}/>)\n    boxes.push(<RenderInfoBox title={\"DUTY GROUND RUN\"} value={props} id={'groundrun'} updateDayStats={(f, e)=>{props.updateDayStats(f,e)}} edit={true}/>)\n    boxes.push(<RenderInfoBox title=\"MEALS\" value={{'meals': props.meals}} id={'meals'} edit={false}/>)\n    \n    return (\n        <div className=\"info-bar\">\n            <div className=\"time-title\">\n                <h5>CURRENT TIME</h5>\n            </div>\n            <div className=\"time\">\n                <h2>{(props.curTime.getHours()<10?\"0\":\"\")+props.curTime.getHours()+':'+(props.curTime.getMinutes()<10?\"0\":\"\")+props.curTime.getMinutes()}</h2>\n            </div>\n            {boxes}\n        </div>\n    )\n}\n\nclass Flights extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            curTime: new Date(),\n            date: new Date(),\n            data: null,\n            //testData: generateTestData(),\n            twlightnaut: \"N/A\",\n            twilightciv: \"N/A\",\n            desksgtday: \"N/A\", \n            desksgnight: \"N/A\", \n            mtp: \"N/A\", \n            fdoday: \"N/A\",\n            fdonight: \"N/A\",\n            meals: 0,\n            groundrun: \"N/A\",\n            hasError: false,\n            mouseOverMenu: false,\n            mouseOverMenuOpt: false,\n        }\n    }\n    componentDidMount() {\n        this.timerID = setInterval(() => this.tick(), 1000);\n        this.getData(new Date());\n        initializeReactGA();\n    }\n\n    componentWillUnmount() {clearInterval(this.timerID);}\n\n    tick() {this.setState({curTime: new Date()});}\n\n\n    showMenu() {\n        this.setState({ mouseOverMenu: true });\n    }\n    hideMenu() {\n        setTimeout(() => {\n            this.setState({ mouseOverMenu: false });\n          }, menu_timeout_length);\n    }\n    enterMenuOpt = () => {\n        this.setState({ mouseOverMenuOpt: true });\n      }\n    \n    leaveMenuOpt = () => {\n         setTimeout(() => {\n          this.setState({ mouseOverMenuOpt: false });\n         }, menu_timeout_length);\n    }\n\n\n    prepareForExport() {\n        //Get all ID's of flights happening today \n        var ids = [];\n        if (this.state.data.docs.length > 0) {\n            this.state.data.docs.forEach((entry)=> {\n                ids.push(entry.id);\n            })\n        }\n\n        //Get all info for the day\n        var dayInfo = [\n            this.state.date,\n            this.state.twlightnaut,\n            this.state.twilightciv,\n            this.state.desksgtday, \n            this.state.desksgnight,\n            this.state.mtp,\n            this.state.fdoday,\n            this.state.fdonight,\n            this.state.meals,\n            this.state.groundrun];\n        //Export \n        Export(ids, dayInfo);\n    }\n\n\n    updateDayStats(field, newValue) {\n        if (this.state[field] !== newValue) {\n            this.setState({[field]: newValue});\n            var date = this.state.date.getFullYear() + '-' + (this.state.date.getMonth() < 9 ? '0':'') + (this.state.date.getMonth()+1) + '-' + (this.state.date.getDate() < 10 ? '0':'') + (this.state.date.getDate());\n            \n            firebase.firestore().collection(\"dates\").doc(date).set({\n                [field]: newValue\n                }, {merge: true})\n                .then(function() {\n                console.log(\"Document successfully written!\");\n                })\n                .catch(function(error) {\n                console.error(\"Error writing document: \", error);\n            });\n        }\n    }    \n\n    getData(newDate) {\n        var date = newDate.getFullYear() + '-' + (newDate.getMonth() < 9 ? '0':'') + (newDate.getMonth()+1) + '-' + (newDate.getDate() < 10 ? '0':'') + (newDate.getDate()) ;\n        console.log(\"DATE: \" + date);\n        //get new data\n        firebase.firestore().collection(\"events\").where('type', '==', 'flight').where('date', '==', date).where('startTime', '>=', '0000').orderBy(\"startTime\")\n        .get()\n        .then((querySnapshot) => {\n            if (!querySnapshot.empty) {\n                this.setState({data: querySnapshot})\n            }\n            else {\n                console.log(\"Document doesn't exist\");\n                this.setState({data: null});\n            };\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n\n        firebase.firestore().collection(\"dates\").doc(date)\n        .get()\n        .then((querySnapshot) => {\n            var d = querySnapshot.data();\n            this.setState({\n                //TODO: show civil and day/night\n                twilightciv: d.twilightciv != null ?  d.twilightciv : \"N/A\",\n                twilightnaut: d.twilightnaut != null ? d.twilightnaut : \"N/A\",\n                desksgtday: d.desksgtday != null ? d.desksgtday : \"N/A\", \n                desksgtnight: d.desksgtnight != null ? d.desksgtnight : \"N/A\", \n                mtp: d.mtp != null ?  d.mtp: \"N/A\", \n                fdoday: d.fdoday != null ? d.fdoday  : \"N/A\",\n                fdonight: d.fdonight != null ? d.fdonight : \"N/A\",\n                groundrun: d.groundrun != null ? d.groundrun : \"N/A\"})\n            \n        })\n        .catch(function(error) {\n            firebaseCreateDate(date);\n        });\n    }\n\n    changeDate(offset) {\n        if (offset != 0) {\n            var newDate = new Date(this.state.date);\n            newDate.setDate(newDate.getDate() + offset);\n            this.setState({date: new Date(newDate)})\n            this.getData(newDate);\n        }\n    }\n\n    setMeals(m) {\n        if (m != this.state.meals && m >= 0 ) {\n            this.setState({meals: m});\n        }\n    }\n\n    componentDidCatch(error, info) {\n        // Display fallback UI\n        this.setState({ hasError: true });\n        console.log(error, info);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            return <ErrorPage/>\n          }\n        return (\n            <div className='container'>\n                <RenderFlightDayBox date={this.state.date} \n                                    data={this.state.data}\n                                    test={this.state.data == null}\n                                    curTime={this.state.curTime} \n                                    toggleOverlay={(id)=>{this.props.toggleOverlay(id)}} \n                                    changeDate={(offset)=>{this.changeDate(offset)}}\n                                    setMeals={(m)=>{this.setMeals(m)}}\n                                    open={this.state.mouseOverMenu || this.state.mouseOverMenuOpt}\n                                    showMenu={this.showMenu.bind(this)}\n                                    hideMenu={this.hideMenu.bind(this)}\n                                    enterMenuOpt={this.enterMenuOpt.bind(this)}\n                                    leaveMenuOpt={this.leaveMenuOpt.bind(this)}\n                                    prepareForExport={this.prepareForExport.bind(this)}/>\n                <RenderInfoBar date={this.state.date} curTime={this.state.curTime} updateDayStats={(f,e)=>{this.updateDayStats(f,e)}}\n                                twilightciv={this.state.twilightciv}\n                                desksgtday={this.state.desksgtday} \n                                mtp={this.state.mtp}\n                                fdoday={this.state.fdoday}\n                                groundrun={this.state.groundrun}\n                                meals={this.state.meals}/>\n            </div>\n        )\n    }\n}\n\nexport default Flights;\n"]},"metadata":{},"sourceType":"module"}